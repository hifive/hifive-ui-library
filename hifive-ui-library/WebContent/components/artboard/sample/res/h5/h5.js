/* Copyright (C) 2012-2014 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version Nightly_2015-06-12_13-35-04-211 gitCommitId ed64d650c3771d580b8c26368c0fb96a25dab9f2 (scopedglobals,util,async,resource,controller,dataModel,view,modelWithBinding,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){var fa,Oa,sa;function e(a,e,t){var n=null,B=Da[a],f=zb[a];f&&(n=f(a,B,e,t));!n&&B&&(n=d.u.str.format.apply(null,[B].concat(e)));n&&(n+="(code="+a+")");e=n?Error(n):Error("FwError: code = "+a);a&&(e.code=a);t&&(e.detail=t);throw e;}function Ab(a){for(var d in a)a.hasOwnProperty(d)&&(Da[d]=a[d])}function T(a,e,t){var n=null,B=Da[a];B&&(e=[B].concat(e),n=d.u.str.format.apply(null,e));return{code:a,message:n,detail:t}}function P(a){return null==a?a:F(a)?a:[a]}function x(a){return"string"===
typeof a}function La(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function ua(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function ka(a){return!x(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function pa(l){if("regexp"===a.type(l))return l;var d="",d=-1!==l.indexOf("*")?a.map(l.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):l;return RegExp("^"+d+"$")}function qa(a,d,e){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(d,e):a[d](e))}function Z(l,d,e,n){return l[a.hasOwnProperty("curCSS")?
"pipe":"then"](d,e,n)}function pb(a){return a&&a.document&&a.document.nodeType===Ta&&Q(a.document)===a}function N(a){return typeof a.nodeType===la?pb(a)?a.document:null:a.nodeType===Ta?a:a.ownerDocument}function Q(a){return window.document===a?window:a.defaultView||a.parentWindow}function Ea(e,z,t,n){function B(j){return function(){if(!u._rejected){var k=d.u.obj.argsToArray(arguments),c=a.inArray(j,e);q[c]=2>k.length?k[0]:k;++u._resolveCount===u._promisesLength&&u._doneCallbackExecuter()}}}var f=
e?e.length:0,i=d.async.isPromise,u=this,q=null;this._doneCallbackExecuter=function(){u._resolved=!0;z&&(q?z.call(this,q):z.apply(this,arguments))};this._failCallbackExecuter=function(){u._rejected=!0;t?t.apply(this,arguments):n&&d.settings.commonFailHandler&&d.settings.commonFailHandler.call(this,arguments)};if(1===f||i(e)){var A=1===f?e[0]:e;i(A)?(this.remove=function(a){!this._resolved&&!this._rejected&&A===a&&this._doneCallbackExecuter()},A.done(this._doneCallbackExecuter),A.fail(this._failCallbackExecuter)):
this._doneCallbackExecuter()}else{for(var f=[],j=0,r=e.length;j<r;j++){var C=e[j];i(C)&&f.push(C)}i=f.length;if(0===i)this._resolved=!0,z&&z();else{this._promises=f;q=[];this._resolveArgs=[];this._resolveCount=0;this._promisesLength=i;for(j=0;j<i;j++)r=f[j],r.done(B(r)).fail(this._failCallbackExecuter)}}}function ba(a,e,d,n){return new Ea(a,e,d,n)}var Ua=void 0;if(window.h5){if(window.h5.env&&"Nightly_2015-06-12_13-35-04-211"===window.h5.env.version)return;Ua=window.h5}var d={};window.h5=d;d.coexist=
function(){window.h5=Ua;return d};d.env={version:"Nightly_2015-06-12_13-35-04-211"};var Da={},zb={},qb=12029,la="undefined",X=1,Ta=9,ga=function(){var a=null,e=null,d=null;return function(n){a||(a=document.createElement("a"));null===d&&(a.setAttribute("href","./"),d="./"!==a.href);if(d)return a.setAttribute("href",n),a.href;e||(e=document.createElement("span"));e.innerHTML='<a href="'+n+'" />';return e.firstChild.href}}();parseHTML=a.parseHTML?a.parseHTML:function(e,d,t){if(!e||!x(e))return null;
"boolean"===typeof d&&(t=d,d=!1);d=d||document;e=a("<div>"+e+"</div>",d);t||e.find("script").remove();for(var t=e[0].childNodes,d=d.createDocumentFragment(),e=0,n=t.length;e<n;e++)d.appendChild(t[e]);return d.childNodes};var F=Array.isArray||function(){var a=Object.prototype.toString;return function(e){return"[object Array]"===a.call(e)}}(),M=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(e){return"[object Function]"===a.call(e)}}return function(a){return"function"===
typeof a}}();Ea.prototype=a.extend(Ea.prototype,{remove:function(e){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var d=a.inArray(e,this._promises);-1!==d&&(this._promises.splice(d,1),this._resolveArgs.splice(d,1),ua(e)||(this._promisesLength--,that._resolveCount===this._promisesLength&&this._doneCallbackExecuter()))}}});fa={controllerInternal:null};sa=Oa=void 0;(function(){function l(a){switch(a){case "string":return"s";
case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case q:return"u";case "undefElem":return"_";case "objElem":return"@"}}function z(a,b){if(x(a)){var c=a;b&&(c=c.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return c=c.replace(/\\/g,"\\\\").replace(/\n/g,
"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(z(a.toString())):a}function t(a,b){return"1"===b?a:x(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(t(a.toString())):a}function n(a,b,c){var h=d.async.deferred();d.ajax({url:a,async:b,cache:c,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=
u(arguments);a.push(this.url);h.notifyWith(h,a);h.resolveWith(h,a)}).fail(function(){h.rejectWith(h,u(arguments))});return h.promise()}function B(a){x(a)||e(A,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,c=0;c<b;c++)ka(a[c])||e(A,"h5.u.obj.ns()");for(var h=window,c=0;c<b;c++){var j=a[c];typeof h[j]===q&&(h[j]={});h=h[j]}return h}function f(a,b){var c=B(a),h;for(h in b)b.hasOwnProperty(h)&&(void 0!==c[h]&&e(j,[a,h]),c[h]=b[h])}function i(b){return!b||!b.jquery?!1:b.jquery===a().jquery}function u(a){return Array.prototype.slice.call(a)}
var q="undefined",A=11E3,j=11001,r=11004,C=11005,y=11006,k={},c={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},b=void 0!==document.createElement("script").onload,g=-1===/\r\n/.toString().indexOf("\r\n");f("h5.u",{loadScript:function(c,j){var g=d.async.deferred,h=P(c);(!h||0===h.length)&&e(11007);for(var f=0,r=h.length;f<r;f++)c=h[f],(!x(c)||!a.trim(c))&&e(11007);null!=j&&!a.isPlainObject(j)&&e(11008,"h5.u.loadScript()");var I=j&&!1===j.async?!1:!0,i=!!(j&&!0===j.force),f=!!(j&&!0===
j.parallel),l=!!(j&&!0===j.atomic),C=!i,y=I?g():null,q=I?function(a){y.reject(T(11010,[a]))}:null,r=I?function(){var a=g();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,t=f?[]:null,B=[],A={};if(I){if(!l&&b){var z=a("head"),F=function(a){var b=g(),c=document.createElement("script");c.onload=function(){c.onload=null;k[a]=a;b.resolve()};c.onerror=function(){c.onerror=null;b.reject(a)};c.type="text/javascript";c.src=C?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;z[0].appendChild(c);
return b.promise()};if(f)t.push(r()),a.each(h,function(){var a=ga(this.toString());if(!i&&a in k)return!0;t.push(F(a))}),ba(t,function(){y.resolve()},q);else{var S=Z(g().resolve(),r);a.each(h,function(){var a=ga(this.toString());S=Z(S,function(){if(i||!(a in k))return F(a)},q)});Z(S,function(){y.resolve()},q)}}else if(f){var v=[];t.push(r());v.push(null);a.each(h,function(){var a=ga(this.toString());if(!i&&(a in k||a in A))return!0;t.push(n(a,I,C));l?A[a]=a:v.push(null)});f=h=null;l?(h=function(){a.each(u(arguments),
function(c,b){a.globalEval(b[0])});a.extend(k,A);y.resolve()},f=a.noop):(h=function(){y.resolve()},f=function(){for(var c=u(arguments),b=0;b<v.length;b++)if(c[b]){var h=c[b][3];v[b]!==h&&(a.globalEval(c[b][0]),v.splice(b,1,h))}});d.async.when(t).done(h).fail(q).progress(f)}else S=Z(g().resolve(),r),a.each(h,function(){var b=ga(this.toString());S=Z(S,function(){var c=g();!i&&(b in k||b in A)?c.resolve():n(b,I,C).done(function(h){l?(B.push(h),A[b]=b):(a.globalEval(h),k[b]=b);c.resolve()}).fail(function(){c.reject(this.url)});
return c.promise()},q)}),Z(S,function(){l&&(a.each(B,function(b,c){a.globalEval(c)}),a.extend(k,A));y.resolve()},q);return y.promise()}a.each(h,function(){var b=ga(this.toString());if(!i&&(b in k||b in A))return!0;n(b,I,C).done(function(c){l?(B.push(c),A[b]=b):(a.globalEval(c),k[b]=b)}).fail(function(){e(11010,[b])})});l&&(a.each(B,function(b,c){a.globalEval(c)}),a.extend(k,A))},createInterceptor:function(a,b){return function(c){var h={},j=a?a.call(this,c,h):c.proceed();c.result=j;if(!b)return j;
if(j&&M(j.promise)&&!i(j)){var g=this;qa(j,"always",function(){b.call(g,c,h)});return j}b.call(this,c,h);return j}}});f("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return 0<=c&&a.lastIndexOf(b)===c},format:function(a,b){if(null==a)return"";var c=arguments;return a.replace(/\{(\d+)\}/g,function(a,b){var j=c[parseInt(b,10)+1];return typeof j===q?q:j})},escapeHtml:function(b){return"string"!==a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return c[a]})}});
f("h5.u.obj",{expose:f,ns:B,serialize:function(b){function c(a){for(var b=0,h=k.length;b<h;b++)if(a===k[b])return!0;return!1}function j(a){for(var b=0,c=k.length;b<c;b++)a===k[b]&&k.splice(b,1)}function h(b){var d=b,f=a.type(b);"object"===typeof b&&(b instanceof String?f="String":b instanceof Number?f="Number":b instanceof Boolean&&(f="Boolean"));switch(f){case "String":case "string":d=l(f)+z(d);break;case "Boolean":d=d.valueOf();case "boolean":d=l(f)+(d?1:0);break;case "Number":d=d.valueOf();if(a.isNaN&&
a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))d=Infinity===b.valueOf()?l("infinity"):-Infinity===b.valueOf()?l("-infinity"):l("nan");d=l(f)+d;break;case "number":d=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?l("infinity"):-Infinity===b?l("-infinity"):l("nan"):l(f)+d;break;case "regexp":d=l(f)+z(d.toString(),g);break;case "date":d=l(f)+ +d;break;case "array":c(b)&&e(ERR_CODE_REFERENCE_CYCLE);k.push(b);for(var w=[],d=l(f)+"[",f=0,r=b.length;f<r;f++){w[f.toString()]=!0;var i;i=b.hasOwnProperty(f)?
"function"===a.type(b[f])?l(q):h(b[f]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):l("undefElem");d+='"'+i+'"';f!==b.length-1&&(d+=",")}var f="",n;for(n in b)w[n]||"function"!==a.type(b[n])&&(f+='"'+z(n)+'":"'+h(b[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');f&&(d+=(b.length?",":"")+'"'+l("objElem")+"{"+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),d=d.replace(/,$/,""),d+='}"');d+="]";j(b);break;case "object":c(b)&&e(C);k.push(b);d=l(f)+"{";for(n in b)b.hasOwnProperty(n)&&"function"!==a.type(b[n])&&
(d+='"'+n+'":"'+h(b[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');d=d.replace(/,$/,"");d+="}";j(b);break;case "null":case q:d=l(f)}return d}M(b)&&e(11002);var k=[];return"2|"+h(b)},deserialize:function(b){function c(b){function d(a){switch(a){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";
case "a":return"array";case "o":return"object";case "l":return"null";case "u":return q;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;h=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(d(b)){case "String":h=new String(t(h,j));break;case "string":break;case "Boolean":"0"===h||"1"===h?h=new Boolean("1"===h):e(y);break;case "boolean":"0"===h||"1"===h?h="1"===h:e(y);break;case "nan":""!==h&&e(y);h=NaN;break;case "infinity":""!==h&&e(y);h=Infinity;break;case "-infinity":""!==
h&&e(y);h=-Infinity;break;case "Number":"infinity"===d(h)?h=new Number(Infinity):"-infinity"===d(h)?h=new Number(-Infinity):"nan"===d(h)?h=new Number(NaN):(h=new Number(h),isNaN(h.valueOf())&&e(y));break;case "number":h=(new Number(h)).valueOf();isNaN(h)&&e(y);break;case "array":var g;try{g=a.parseJSON(h)}catch(k){e(y)}F(g)||e(y);for(var f=0;f<g.length;f++)switch(d(g[f].substring(0,1))){case "undefElem":delete g[f];break;case "objElem":for(var w=c(l("object")+g[f].substring(1)),b=[],f=0,i=g.length-
1;f<i;f++)b[f]=g[f];g=b;for(var n in w)g[n]=w[n];break;default:g[f]=c(g[f])}h=g;break;case "object":try{g=a.parseJSON(h)}catch(u){e(y)}a.isPlainObject(g)||e(y);for(n in g)g[n]=c(g[n]);h=g;break;case "date":h=new Date(parseInt(h,10));break;case "regexp":try{f=h.match(/^\/(.*)\/(.*)$/),w=t(f[1],j),h=RegExp(w,f[2])}catch(C){e(y)}break;case "null":""!==h&&e(y);h=null;break;case q:""!==h&&e(y);h=void 0;break;default:e(r)}return t(h,j)}x(b)||e(11009);b.match(/^(.)\|(.*)/);var j=RegExp.$1;"1"!==j&&"2"!==
j&&e(11003,[j,"2"]);var h=RegExp.$2;return c(h)},isJQueryObject:i,argsToArray:u,getByPath:function(a,b){x(a)||e(A,"h5.u.obj.getByPath()");var c=a.split("."),h=0;if("window"===c[0]&&(!b||b===window))h=1;for(var j=b||window,d=c.length;h<d&&!(j=j[c[h]],null==j);h++);return j}})})();(function(){function l(a,d){a.target||(a.target=d);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var f=!1;a.isDefaultPrevented=function(){return f};a.preventDefault=function(){f=true}}if(!a.isImmediatePropagationStopped){var e=
!1;a.isImmediatePropagationStopped=function(){return e};a.stopImmediatePropagation=function(){e=true}}}function z(a){var e={},f;for(f in a){var i=a[f];if(a.hasOwnProperty(f)&&(M(i)||null===i||"string"===typeof i||"number"===typeof i||"boolean"===typeof i))e[f]=i}this._mix=function(a){for(var d in e)a[d]=e[d]};this._hasInterface=function(a){for(var f in e)if(!d.u.str.startsWith(f,"_")&&typeof a[f]===la)return!1;return!0}}function t(a){return new z(a)}a.extend(z.prototype,{mix:function(a){return this._mix(a)},
hasInterface:function(a){return this._hasInterface(a)}});d.u.obj.expose("h5.mixin",{createMixin:t,eventDispatcher:t({hasEventListener:function(a,d){if(!this._eventListeners)return!1;var e=this._eventListeners[a];if(!e||!this._eventListeners.hasOwnProperty(a))return!1;for(var i=0,l=e.length;i<l;i++)if(e[i]===d)return!0;return!1},addEventListener:function(a,d){(2>arguments.length||!x(a))&&e(16E3);null==d||this.hasEventListener(a,d)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||
(this._eventListeners[a]=[]),this._eventListeners[a].push(d))},removeEventListener:function(a,d){if(this.hasEventListener(a,d))for(var e=this._eventListeners[a],i=0,l=e.length;i<l;i++)if(e[i]===d){e.splice(i,1);break}},dispatchEvent:function(a){if(this._eventListeners){var d=this._eventListeners[a.type];if(d){d=d.slice(0);l(a,this);for(var e=0,i=d.length;e<i&&!a.isImmediatePropagationStopped();e++)M(d[e])?d[e].call(a.target,a):d[e].handleEvent&&d[e].handleEvent(a);return a.isDefaultPrevented()}}}})})})();
(function(){var l,z,t,n,B,f,i;function u(a){return a.match(/^error$/i)?l:a.match(/^warn$/i)?z:a.match(/^info$/i)?t:a.match(/^debug$/i)?n:a.match(/^trace$/i)?B:a.match(/^all$/i)?f:a.match(/^none$/i)?i:null}function q(a,b){var c={},j=a.slice(0,b),d=Math.min(E,b),g=j.slice(0,d).join(" <- ");j.length>d&&(g+=" ...");c.preview=g;c.all=j.join("\n");return c}function A(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function j(b){for(var b=d.u.obj.argsToArray(b),
c=[],j=0,g=b.length;j<g;j++)c.push(a.type(b[j]));return c.join(", ")}function r(){}function C(b){(!x(b)||0===a.trim(b).length)&&e(c);this.category=a.trim(b)}var y=10003,k=10004,c=10005,b=10007,g=10008,w=10010,E=3;l=50;z=40;t=30;n=20;B=10;f=0;i=-1;var H=null;r.prototype={init:function(){},log:function(a){window.console&&(x(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,c=null,c=1===b.length?b[0]:d.u.str.format.apply(d.u.str,b),b=this._getLogPrefix(a)+c;a.logger.enableStackTrace&&
(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var c=!1;a==l&&console.error?(console.error(b),c=!0):a==z&&console.warn?(console.warn(b),c=!0):a==t&&console.info?(console.info(b),c=!0):a==n&&console.debug&&(console.debug(b),c=!0);!c&&console.log&&console.log(b)},
_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,c=this._getLogPrefix(a);b.unshift(c);a.level==l&&console.error?this._output(console.error,b):a.level==z&&console.warn?this._output(console.warn,b):a.level==t&&console.info?this._output(console.info,b):a.level==n&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,
b);return}}catch(c){}a(b)}};C.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(l,arguments,this.error)},warn:function(a){this._log(z,arguments,this.warn)},info:function(a){this._log(t,arguments,this.info)},debug:function(a){this._log(n,arguments,this.debug)},trace:function(a){this._log(B,arguments,this.trace)},_traceFunctionName:function(b){var c=[],d=Error();if(d=d.stack||d.stacktrace)var g=/_traceFunctionName/,c=d.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,
"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),e=null,k=null,c=a.map(c,function(b,c){if(0===b.length)return null==k?"":null;e=""===a.trim(b)?"{anonymous}":a.trim(b);null===k&&g.test(b)&&(k=c);return e}).slice(k+3);else for(var b=b.caller,d=0,f=this.maxStackSize;d<f;d++){var w=A(b),r=j(b.arguments),i;try{i=b.caller}catch(l){c.push("{unable to trace}");break}w?c.push("{"+w+"}("+r+")"):i?c.push("{anonymous}("+r+")"):c.push("{root}("+r+")");if(!i)break;b=i}return q(c,this.maxStackSize)},
_log:function(a,b,c){var b={level:a,args:d.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(c):""},j=H.out,g=H.defaultOut,c=[],e=!1;if(j)for(var j=P(j),k=0,f=j.length;k<f;k++){var w=j[k];if(w.compiledCategory.test(this.category)&&a>=w.compiledLevel&&0<=w.compiledLevel&&(c.push(w),!1!==w.terminate)){e=!0;break}}(!c.length||!e)&&c.push(g);k=0;for(j=c.length;k<j;k++){g=c[k];f=g.compiledLevel;g=g.compiledTargets;if(a<f||0>f)break;b.logger=this;b.date=new Date;b.levelString=
this._levelToString(a);if(!g||0===g.length)break;e=0;for(f=g.length;e<f;e++)g[e].log(b)}},_levelToString:function(a){if(a===l)return"ERROR";if(a===z)return"WARN";if(a===t)return"INFO";if(a===n)return"DEBUG";if(a===B)return"TRACE"}};d.u.obj.expose("h5.log",{createLogger:function(a){return new C(a)},configure:function(){function c(d,f,h){if(!h){var r=f.category;(!x(r)||0===a.trim(r).length)&&e(w);r=a.trim(r);f.compiledCategory=pa(r);l.push(r)}h=null==f.level?u(h?j.level:i.level):x(f.level)?u(a.trim(f.level)):
f.level;"number"!==typeof h&&e(y,f.level);f.compiledLevel=h;h=[];r=f.targets;if(null!=r){var C=[];null==r||F(r)||x(r)&&a.trim(r).length||e(g);for(var r=P(r),E=0,v=r.length;E<v;E++){null==r[E]||x(r[E])&&a.trim(r[E]).length||e(g);var R=r[E];if(R){-1!==a.inArray(R,C)&&e(b,R);var ca=d[R];ca||e(k,R);C.push(R);h.push(ca.compiledTarget)}}}f.compiledTargets=h}var j={level:"NONE",targets:null},f=a.extend(!0,{},d.settings.log),i=f.defaultOut;i||(i=j,f.defaultOut=i);var l=[],C=f.target;C||(C={},f.target=C);
(function(b){a.isPlainObject(b)||e(10009);for(var c in b){var j=b[c];a.type(j.type)!=="object"&&j.type!=="console"&&e(1E4);var d=null,d=j.type==="console"?new r:a.extend(true,{},j.type);d.init&&d.init(j);j.compiledTarget=d}b.console={type:"console",compiledTarget:new r}})(C);c(C,i,!0);var E=f.out;if(E)for(var E=P(E),n=0,q=E.length;n<q;n++)c(C,E[n]);H=f}})})();(function(){function e(l){d.settings.aspects=a.map(P(l),function(a){a.target&&(a.compiledTarget=pa(a.target));a.pointCut&&(a.compiledPointCut=
pa(a.pointCut));return a})}d.u.obj.ns("h5.settings");d.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||a===qb))return!1}},trackstartTouchAction:"none",res:{baseUrl:null,timeoutTime:1E4}};var z=d.u.createInterceptor(function(a,d){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);d.start=new Date;
return a.proceed()},function(a,d){var e=(new Date).getTime()-d.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,e)});d.u.obj.expose("h5.core.interceptor",{lapInterceptor:z,logInterceptor:z,errorInterceptor:function(a){var e=null;try{e=a.proceed()}catch(l){d.settings.commonFailHandler&&M(d.settings.commonFailHandler)&&d.settings.commonFailHandler.call(null,l)}return e}});a(document).trigger("h5preinit");d.settings.aspects&&e(d.settings.aspects);d.log.configure()})();
(function(){d.u.obj.expose("h5.env",{ua:function(d){function e(a,b){var c=x(a,"[^;)]*",b).split(" ");return 1===c.length?"":c[c.length-1]}function t(a,b){var c=x(a,"[^;) ]*",b).split("/");return 1===c.length?"":c[c.length-1]}function n(a,b){var c=x(a,"[^;) ]*",b).split(":");return 1===c.length?"":c[c.length-1]}var B=!!d.match(/iPhone/i),f=!!d.match(/iPad/i),i=B||f,u=!!d.match(/android/i),q=!!d.match(/Windows Phone/i),A=!!d.match(/MSIE/)||!!d.match(/Trident/),j=!!d.match(/Firefox/i),r=!!d.match(/Chrome/i)||
!!d.match(/CrMo/)||!!d.match(/CriOS/),C=!u&&!!d.match(/Safari/i)&&!r,y=!!d.match(/Webkit/i),k=!!d.match(/Opera/i),c=u&&!!d.match(/Safari/i)&&!r,b=!(!B&&!q&&!(c&&d.match(/Mobile/)&&!d.match(/SC-01C/)||u&&r&&d.match(/Mobile/)||d.match(/Fennec/i)||d.match(/Opera Mobi/i))),g=!(!f&&!(c&&!d.match(/Mobile/)||u&&r&&!d.match(/Mobile/)||d.match(/SC-01C/)||d.match(/Fennec/i)||d.match(/Opera Tablet/i))),w=!b&&!g,E=null,H=null,h=function(b,c){return a.trim(d.substring(d.indexOf(b)+b.length,d.indexOf(c))).split("_")},
x=function(b,c,j){return a.trim(d.match(!1===j?RegExp(b+c):RegExp(b+c,"i")))};if(B)H=h("iPhone OS","like"),E=parseInt(H[0]),H=H.join(".");else if(f)H=h("CPU OS","like"),E=parseInt(H[0]),H=H.join(".");else if(!u||!j)u?(H=e("Android"),E=parseInt(H.split(".")[0])):q&&((H=e("Windows Phone OS"))||(H=e("Windows Phone")),E=parseInt(H.split(".")[0]));A&&k&&(A=!1);var Y=h=null;if(i||u&&c)h=E,Y=H;else{var I=null;A?I=e("MSIE",!1)||n("rv"):r?(I=t("Chrome",!1))||(I=t("CrMo",!1)):C?I=t("Version"):j?I=t("Firefox"):
k&&((I=t("Version"))||(I=t("Opera")),I||(I=e("Opera")));I&&(h=parseInt(I.split(".")[0]),Y=I)}return{osVersion:E,osVersionFull:H,browserVersion:h,browserVersionFull:Y,isiPhone:B,isiPad:f,isiOS:i,isAndroid:u,isWindowsPhone:q,isIE:A,isFirefox:j,isChrome:r,isSafari:C,isOpera:k,isAndroidDefaultBrowser:c,isSmartPhone:b,isTablet:g,isDesktop:w,isWebkit:y}}(navigator.userAgent)})})();(function(){function l(a){function d(){e=!0;f=this;k=i(arguments);if(La(a)||ua(a))return a;var b=i(arguments);if(0<c.length)for(var g=
0,w=c.length;g<w;g++){var r=b;r!==arguments&&(r=P(r));M(c[g])&&c[g].apply(this,r)}return a}var e=!1,f=null,k=null,c=[];a.progress=function(){for(var b=i(arguments),d=0,r=b.length;d<r;d++){var E=b[d];if(F(E))a.progress.apply(this,E);else if(M(E))if(e){var l=k;l!==k&&(l=P(l));E.apply(f,l)}else c.push(E)}return this};a.notify=d;a.notifyWith=function(a,c){return!c?d.apply(a):d.apply(a,c)}}function z(a){if(!a)return!1;for(var a=P(a),d=0,e=a.length;d<e;d++)if(M(a[d]))return!0;return!1}function t(j,e){function C(a){e?
e[a]&&(j[a]=e[a]):(g[a]=j[a],j[a]=function(){return function(){if(!c){var b=i(arguments);if("then"===a||"pipe"===a)b=b[1];z(b)&&(c=!0)}return j._h5UnwrappedCall.call(this,a,i(arguments))}}(a),w[a]=j[a])}function y(a){return function(){var e=d.settings.commonFailHandler;!c&&e&&!b&&(j.fail.call(this,e),b=!0);return a.apply(this,arguments)}}if(j._h5UnwrappedCall)return j;var k=!!j.progress;!k&&!A(j)?l(j):e&&(j.progress=e.progress);var c=!1,b=!1,g={},w={};j._h5UnwrappedCall=e?e._h5UnwrappedCall:function(b,
c){c=P(c);a.extend(j,g);var d=j[b].apply(this,c);a.extend(j,w);return d};for(var E=0,q=n.length;E<q;E++){var h=n[E];j[h]&&C(h)}j.pipe&&!e&&(j.pipe=function(){for(var a=d.async.deferred(),b=i(arguments),c=0,j=B.length;c<j;c++){var e=this;(function(b,c,d){function j(){if(g){var c=b.apply(this,arguments);if(c&&M(c.promise)){t(c);c.done(a.resolve);c._h5UnwrappedCall("fail",a.reject);M(c.progress)&&c.progress(a.notify)}else a[d+"With"](this,[c])}else a[d+"With"](this,arguments)}var g=M(b);if(!g&&c==="fail")e._h5UnwrappedCall(c,
j);else e[c](j)})(b[c],B[c],f[c])}return a.promise()},w.pipe=j.pipe);if(j.then&&!e){var x=j.then;j.then=u?j.pipe:function(){var a=arguments,b=x.apply(this,a);!k&&z(a[2])&&j.progress.call(j,a[2]);return b};w.then=j.then}j.reject&&(j.reject=e&&e.reject?e.reject:y(j.reject));j.rejectWith&&(j.rejectWith=e&&e.rejectWith?e.rejectWith:y(j.rejectWith));if(j.promise)if(e&&e.promise)j.promise=e.promise;else{var Y=j.promise;j.promise=function(){return t(Y.apply(this,arguments),j)}}return j}var n=["fail","always",
"pipe","then"],B=["done","fail","progress"],f=["resolve","reject","notify"],i=d.u.obj.argsToArray,u=function(){var d=a.Deferred();return d!==d.then()}(),q=function(){var d=a.Deferred();return t(d)},A=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};d.u.obj.expose("h5.async",{deferred:q,when:function(){var e=i(arguments);1===e.length&&F(e[0])&&(e=e[0]);var f=e.length,C=d.async.deferred(),l=C.promise(),k=a.when.apply(a,e).done(function(){C.resolveWith(this&&this.promise&&this.promise()===
k?C:this,i(arguments))}).fail(function(){C.rejectWith(this,i(arguments))});if(k.progress)k.progress(function(){C.notifyWith(this===k?l:this,i(arguments))});else{for(var c=[],b=0;b<f;b++)c[b]=void 0;for(var g=function(a){return function(b){c[a]=1<arguments.length?i(arguments):b;C.notifyWith(l,c)}},b=0;b<f;b++){var w=e[b];w&&M(w.promise)&&w.progress&&(1<f?w.progress(g(b)):w.progress(function(){C.notifyWith(l,i(arguments))}))}}return l},isPromise:A,loop:function(d,f,i){F(d)||e(5E3);var l=q(),k="number"===
a.type(i)?i:20,c=0,b=d.length,g,w=null,E=function(){if(c===b)l.resolve(d);else{var a=f.call(d,c,d[c],w);c++;A(a)?a.done(function(){g()}).fail(function(){l.reject(d)}):g()}},u=function(){setTimeout(function(){var a=c-1;0<c&&l.notify({data:d,index:a,value:d[a]});E()},0)},h=!1;g=function(){h||(0===c%k?u():E())};var n=!1,w={resume:function(){!n&&h&&(h=!1,g())},pause:function(){h=!0},stop:function(){n=!0;l.resolve(d)}};u();return l.promise()}})})();(function(){function e(a,d){for(var l=0,n=B.length;l<
n;l++){var j=B[l];a[j]&&(d[f[j]](a[j]),a[j]=void 0)}}function z(d,e,f){for(var l in e)if(e.hasOwnProperty(l)&&(f||!M(e[l]))&&-1===a.inArray(l,n))d[l]=e[l]}function t(a,d){z(this,a,!0);d.promise(this);var e=this.always;this.always=function(){e.apply(this,arguments);return this}}var n=["error","success","complete"],B=["error","success","complete"],f={success:"done",error:"fail",complete:"always"};d.u.obj.expose("h5",{ajax:function(){function f(a,d,e){z(r,e);j.resolveWith(this,arguments)}function u(d,
e,k){if(0===q.retryCount||!1===q.retryFilter.apply(this,arguments))z(r,d),j.rejectWith(this,arguments);else if(q.retryCount--,this.async){var c=this;setTimeout(function(){a.ajax(c).done(f).fail(u)},q.retryInterval)}else a.ajax(this).done(f).fail(u)}var q={},n=arguments;x(n[0])?(a.extend(q,n[1]),q.url=n[0]):a.extend(q,n[0]);var q=a.extend({},d.settings.ajax,q),j=d.async.deferred();e(q,j);var n=a.ajax(q),r=new t(n,j);n.done(f).fail(u);return r}})})();(function(){function e(a,d){this.id=a;this.content=
d}function z(a,d,e){this.url=a;this.path=d;this.content=e}function t(a){this._resourceKey=a}function n(a){a=0===a.indexOf("./")?a.slice(2):a;return(d.settings.res.baseUrl||"./")+a}function B(a,d,e){void 0===e&&M(a)&&(e=a,a=void 0);i.unshift({type:a,test:d,resolver:e})}var f=d.async.deferred,i=[],u={};waitingInfoMap={};waitingForImmediateDeferred=[];waitingImmediateTimer=null;var q={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);
var d=a.url;this.cache[d]=a;this.cacheUrls.push(d)},clearCache:function(a,d){var e=ga(a);d||delete this.cache[e];for(var f=0,k=this.cacheUrls.length;f<k;f++)if(this.cacheUrls[f]===e){this.cacheUrls.splice(f,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var d=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return d},loadResourceFromPath:function(a){var e=ga(a);if(this.accessingUrls[e])return this.accessingUrls[e];var i=f(),l=i.promise();
this.accessingUrls[e]=l;var k=this;d.ajax(a,{dataType:"text"}).done(function(c,b,d){delete k.accessingUrls[e];c=new z(e,a,d.responseText);k.append(c);i.resolve(c)}).fail(function(c){delete k.accessingUrls[e];i.reject(T(17E3,[c.status,e],{url:e,path:a,error:c}))});return l}};a.extend(t.prototype,{resolve:function(e){function f(b){for(var c=0,d=i.length;c<d;c++)if(!(e&&e!==i[c].type)){var g=i[c].test;if(!e&&g)if("regexp"===a.type(g)){if(!g.test(b))continue}else if(!1===g(b))continue;return i[c].resolver(b,
e)}return!1}if(!F(this._resourceKey))return f(this._resourceKey);for(var l=this._resourceKey,n=[],k=0,c=l.length;k<c;k++){var b=f(l[k]);n.push(b)}var g=d.async.deferred();ba(n,function(a){F(a)||(a=[a]);a.unshift(a.slice(0));g.resolveWith(g,a)},function(a){g.reject(a)});return g.promise()},getKey:function(){return this._resourceKey}});var A={load:function(a){var d=ga(a);return q.cache[d]?f().resolve(q.getResourceFromCache(d)).promise():q.loadResourceFromPath(a)},clearCache:function(a){q.clearCache(a)},
clearAllCache:function(){q.clearAllCache()}};B("namespace",null,function(a){var e=u[a]||d.u.obj.getByPath(a);if(e)return f().resolve(e).promise();if(waitingInfoMap[a])return waitingInfoMap[a].deferred.promise();var e=n(a.replace(/\./g,"/"))+".js",i=f(),l=d.settings.res.timeoutTime,k=null;0<l&&(k=setTimeout(function(){waitingInfoMap[a]&&(delete waitingInfoMap[a],i.reject(T(17001,[a])))},l));waitingInfoMap[a]={deferred:i,timer:k};d.u.loadScript(e).done(function(){var c=u[a]||d.u.obj.getByPath(a);c&&
waitingInfoMap[a]&&(u[a]=c,delete waitingInfoMap[a],clearTimeout(k),i.resolve(c))}).fail(function(c){clearTimeout(k);delete waitingInfoMap[a];i.reject(c)});return i.promise()});B("ejsfile",/.*\.ejs(\?.*$|$)/,function(d){var i=f();A.load(n(d)).done(function(d){var f=a(d.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),k=[];0<f.not('script[type="text/ejs"]').length?i.reject(T(7011,null,{url:d.url,path:d.path})):(0===f.length&&i.reject(T(7001,null,{url:d.url,path:d.path})),
f.each(function(){var c=a.trim(this.id);c||i.reject(T(7002,null,{url:d.url,path:d.path}));var b=a.trim(this.innerHTML);k.push(new e(c,b))}),i.resolve({url:d.url,path:d.path,templates:k}))}).fail(function(a){var d=a.detail,d=T(7003,[d.error.status,d.url],d);a.code=d.code;a.message=d.message;a.detail=a.detail;i.reject(a)});return i.promise()});B("jsfile",/.*\.js(\?.*$|$)/,function(a){return d.u.loadScript(n(a))});B("cssfile",/.*\.css(\?.*$|$)/,function(a){var d=document.getElementsByTagName("head")[0],
e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href=n(a);d.appendChild(e);return f().resolve(e).promise()});d.u.obj.expose("h5.res",{dependsOn:function(a){return new t(a)},addResolver:B,isDependency:function(a){return a instanceof t},urlLoader:A,resolvers:i,register:function(a,e,f,i){f&&(i?d.u.obj.expose(i,e):d.u.obj.expose(a,e));u[a]=e;if(f=waitingInfoMap[a])delete waitingInfoMap[a],a=f.deferred,(f=f.timer)&&clearTimeout(f),waitingForImmediateDeferred.push({dfd:a,value:e}),
waitingImmediateTimer||(waitingImmediateTimer=setTimeout(function(){waitingImmediateTimer=null;for(var a=waitingForImmediateDeferred.splice(0,waitingForImmediateDeferred.length),c=0,b=a.length;c<b;c++)a[c].dfd.resolve(a[c].value)},0))},get:function(a){return d.res.dependsOn(a).resolve()}})})();(function(){function l(a){null!=a.style.transform&&(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function z(a,b,c,d,m){if(!Pa){Pa=
{};var a=new Xa(null,"a"),f;for(f in a)a.hasOwnProperty(f)&&"__name"!==f&&"__templates"!==f&&"__meta"!==f&&(Pa[f]=1);a=Xa.prototype;for(f in a)a.hasOwnProperty(f)&&(Pa[f]=null)}for(var g in c)g in Pa&&e(Cb,[m,g],{controllerDefObj:c})}function t(K,b){function c(d,m){-1!==a.inArray(d,m)&&e(Db,[b],{controllerDefObj:K});r(d,function(a){c(a,m.concat([d]))},!0)}c(K,[])}function n(K){function b(c,d){-1!==a.inArray(c,d)&&e(Eb,[K.__name],{logicDefObj:K});C(c,function(a){b(a,d.concat(c))})}b(K,[])}function B(K,
b,c){null==K&&e(Qa,[c],{controllerDefObj:b});!x(K)&&"object"!==typeof K&&e(sb,[c],{controllerDefObj:b});K=a(K);0===K.length&&e(m,[c],{controllerDefObj:b});1<K.length&&e(L,[c],{controllerDefObj:b});K[0].nodeType!==Ta&&K[0].nodeType!==X&&e(tb,[c],{controllerDefObj:b})}function f(K){K=a(K);this._controller=null;if(0===K.length)this._targetElement=null;else{1<K.length?e(L):K[0].nodeType!==Ta&&K[0].nodeType!==X?e(tb):this._targetElement=K[0];var b=d.core.controllerManager.getController(this._controller);
1<b.length&&e();1==b.length?this._controller=controllres[0]:0===b.length&&(K=K.data("h5-controller"),this._controller=d.res.dependsOn(K))}}function i(a,b,c,d,m){this.controller=a;this.event=b;this.evArg=c;this.selector=d;this.selectorType=m}function u(a){if(!na(this)&&this.__controllerContext.executeListeners)return a.proceed()}function q(a,b,c){var m;m=a.__name;var e=[],f=d.settings.aspects;if(f&&0!==f.length)for(var f=P(f),g=f.length-1;-1<g;g--){var o=f[g];if(!o.target||o.compiledTarget.test(m)){var p=
o.interceptors;if(!o.pointCut||o.compiledPointCut.test(b))if(F(p))for(o=p.length-1;-1<o;o--)e=e.concat(p[o]);else e.push(p)}}m=e;c&&m.push(u);return A(a[b],b,m)}function A(a,b,c){for(var d=function(a,b,K){return function(){var c=this;return K.call(c,{target:c,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(c,this.args)}})}},m=0,e=c.length;m<e;m++)a=d(a,b,c[m]);return a}function j(a,b,c){if(c&&a===ta)return c.rootElement;for(var m=["window","document","navigator"],e=0,f=m.length;e<
f;e++){var g=m[e];if(a===g||ub(a,g+"."))return d.u.obj.getByPath(a,Q(b))}return c&&ub(a,"this.")?d.u.obj.getByPath(a.slice(5),c):a}function r(a,b,c){if(c){var d=wa.get(a.__name);if(d){c=0;for(e=d.childControllerProperties.length;c<e;c++){var m=d.childControllerProperties[c];if((f=a[m])&&!1===b(a[m],a,m))return!1}}else for(m in a){var d=a,e=m,f=c,g=d[e];if(Ra(e,ya)&&"rootController"!==e&&"parentController"!==e&&g&&(f||g.__controllerContext&&!g.__controllerContext.isRoot&&(!g.parentController||g.parentController===
d))&&!1===b(a[m],a,m))return!1}}else if(!na(a))for(var m=a.__controllerContext.childControllers,c=0,e=m.length;c<e;c++){var f=m[c];if(!1===b(f,a))return!1}}function C(a,b){var c=wa.get(a.__name);if(c)for(var d=0,m=c.logicProperties.length;d<m;d++){var e=c.logicProperties[d];if(!1===b(a[e],a,e))return!1}else for(e in a)if(a.hasOwnProperty(e)&&Ra(e,hb)&&!1===b(a[e],a,e))return!1}function y(a,b,c,d){return!1===b.call(this,a,c,d)?!1:r(a,function(a,c,K){if(y(a,b,c,K)===false)return false})}function k(a,
b,c,d){if(!1===r(a,function(a,c,K){if(!a||!1===k(a,b,c,K))return!1})||!1===b.call(this,a,c,d))return!1}function c(a,b){var c=[];r(a,function(a){(a=a[b])&&c.push(a)});return c}function b(a){var b=a.__controllerContext.cache.bindMap,c=N(a.rootElement),d;for(d in b)for(var m=g(a,b[d],a[d]),e=0,f=m.length;e<f;e++)w(m[e],c)}function g(b,c,m){function e(b){var c=b.handler,K=b.controller;b.originalHandler=c;b.handler=function(){var m=!b.isNativeBind&&1===d.settings.listenerElementType?a(this):this;c.call(K,
S(b,arguments),m)}}var f=c.selector,g=c.eventName;switch(g){case "mousewheel":m=W(b,f,g,m);break;case za:case Ga:case xa:m=J(b,f,g,m);break;default:m=$(b,f,g,m)}F(m)||(m=[m]);f=0;for(g=m.length;f<g;f++){var o=m[f];e(o);o.isBindRequested=c.isBindRequested;o.isGlobal=c.isGlobal;o.bindTarget=c.bindTarget;o.controller=b}return m}function w(b,c){var m=b.controller,e=m.rootElement,f=b.selector,g=b.eventName,o=b.handler,p=b.isBindRequested,k=b.isGlobal;b.bindTarget?(b.evSelectorType=Ha.SELECTOR_TYPE_OBJECT,
Sa(b)):k?(m=j(f,c,m),p||!x(m)?(b.evSelectorType=Ha.SELECTOR_TYPE_OBJECT,b.bindTarget=x(m)?a(m):m,Sa(b)):(b.evSelectorType=Ha.SELECTOR_TYPE_GLOBAL,a(c).delegate(m,g,o)),b.evSelector=m):(b.evSelectorType=Ha.SELECTOR_TYPE_LOCAL,b.evSelector=f,p?(b.bindTarget=a(f,e),Sa(b)):a(e).delegate(f,g,o));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),Ea&&g===za&&null!=d.settings.trackstartTouchAction&&(k?a(b.evSelector,c):a(b.evSelector,e)).each(function(){this.style[qa]=d.settings.trackstartTouchAction}))}
function E(b,c,d){var m=b.controller,e=m.rootElement,f=b.selector,g=b.handler,o=b.eventName,p=b.isGlobal;if(b.bindTarget)c=b.bindTarget,e=b.eventName,f=b.handler,b.isNativeBind?c.removeEventListener(e,f):a(c).unbind(e,f);else if(p){if(null==Q(c))return;a(c).undelegate(f,o,g)}else a(e).undelegate(f,o,g);d||(d=m.__controllerContext.boundHandlers,d.splice(a.inArray(b,d),1))}function H(a,b){y(a,function(a){a.__controllerContext.executeListeners=b})}function h(a,b,c){return function(){var d=null,m=a[b],
e=a.__name,f=!1,f="__init"===b?a.isInit:"__postInit"===b?a.isPostInit:a.isReady;if(!f&&m)try{d=a[b]({args:a.__controllerContext.args})}catch(g){ha(a,g)}d&&M(d.done)&&M(d.fail)?d.done(c).fail(function(){var b=T(Fb,e,Ia(arguments));ha(a.rootController,null,b)}):c()}}function ja(a,b){p(a)||y(a,function(c){var d,m;"__init"===b?(d=va(c),m=[c.preInitPromise],c.parentController&&m.push(c.parentController.initPromise)):"__postInit"===b?(d=Fa(c),m=Y(c)):(d=gb(c),m=I(c));var e=a.__controllerContext;e.waitingPromisesManagerMap=
e.waitingPromsiesManager||{};e.waitingPromisesManagerMap[b]=ba(m,h(c,b,d))})}function Y(a){var b=c(a,"postInitPromise");b.push(a.initPromise);return b}function I(a){var b=c(a,"readyPromise");b.push(a.postInitPromise);return b}function va(b){return function(){function c(){var a=!0;y(b.rootController,function(b){return a=b.isInit});return a}if(!G(b))if(b.isInit)c()&&ia(b.rootController);else{b.isInit=!0;var d=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preInitDfd;
delete b.__controllerContext.initDfd;var m=b.rootElement;try{var e=b.__meta,f=b.__controllerContext.childControllers,g;for(g in e)-1!==a.inArray(b[g],f)&&(b[g].__controllerContext.metaRootElement=e[g]&&e[g].rootElement);r(b,function(a){var c=a.__controllerContext.metaRootElement;delete a.__controllerContext.metaRootElement;a.rootElement||(c=c?R(c,a,b):m,B(c,a.__controllerContext.controllerDef,a.__name),a.rootElement=c,a.view.__controller=a)})}catch(o){ha(b,o);return}e=c();d.resolveWith(b);!G(b)&&
e&&ia(b.rootController)}}}function Fa(c){return function(){if(!G(c)){c.isPostInit=!0;var d=c.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__postInit=ba(Y(c),function(){if(!G(c)){var m=d.postInitDfd;if(m&&(delete d.postInitDfd,m.resolveWith(c),!G(c)&&!d.isExecutedBind))if(d.isRoot){var m=c.__meta,e=d.childControllers,f;for(f in m)-1!==a.inArray(c[f],e)&&(c[f].__controllerContext.metaUseHandlers=m[f]&&m[f].useHandlers);y(c,function(a){var c=a.__controllerContext.metaUseHandlers;
delete a.__controllerContext.metaUseHandlers;a.__controllerContext.isExecutedBind||(a.__controllerContext.isExecutedBind=!0,!1!==c&&b(a))});if(!1!==d.managed&&(a(c.rootElement).trigger("h5controllerbound",c),G(c)))return;ca(c)}else c.rootController.isPostInit&&((!c.parentController.__meta||!1!==c.parentController.__meta.userHandlers)&&b(c),ca(c.rootController))}})}}}function gb(b){return function(){if(!G(b)){b.isReady=!0;var c=b.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||
{};c.waitingPromsiesManager.__ready=ba(I(b),function(){if(!G(b)){var d=c.readyDfd;d&&(delete c.readyDfd,d.resolveWith(b),!G(b)&&c.isRoot&&a(b.rootElement).trigger("h5controllerready",b))}})}}}function V(b,c){if(!x(b))return a(b);var d=a.trim(b);return vb.test(d)?(d=a.trim(d.substring(1,d.length-1)),a(j(d,N(c.rootElement),c))):a(c.rootElement).find(b)}function $(a,b,c,d){return{controller:a,selector:b,eventName:c,handler:d}}function W(a,b,c,d){return{controller:a,selector:b,eventName:typeof document.onmousewheel===
la?"DOMMouseScroll":c,handler:function(b){var c=b.event;null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.wheelDelta&&(c.wheelDelta=c.originalEvent.wheelDelta);null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.detail&&(c.wheelDelta=40*-c.originalEvent.detail);d.call(a,b)}}}function J(b,c,d,m){function e(a,b){for(var c in a)a.hasOwnProperty(c)&&!b[c]&&"target"!==c&&"currentTarget"!==c&&"originalEvent"!==c&&"liveFired"!==c&&(b[c]=a[c]);b.h5DelegatingEvent=a}var f=typeof document.ontouchstart!==
la;if(d!==za)return $(b,c,d,function(b){var c=b.event.h5DelegatingEvent.type;if("mousemove"===c||"mouseup"===c){var c=b.event,d=a(c.currentTarget).offset()||{left:0,top:0};c.offsetX=c.pageX-d.left;c.offsetY=c.pageY-d.top}m.apply(this,arguments)});var g=a(N(b.rootElement));return function(){function o(c,d,m){return function(f){var p;a:{switch(c){case "touchstart":case "mousedown":p=za;break a;case "touchmove":case "mousemove":p=Ga;break a;case "touchend":case "mouseup":p=xa;break a}p=void 0}var Va=
p===za;if(!Va||!h){var j=0===f.event.type.indexOf("touch");j&&Bb(f.event,c);var s=new a.Event(p);e(f.event,s);var L=f.event.target;d&&(L=d);m&&m(s);var i=f.event.originalEvent||f.event;Va&&-1===a.inArray(i,Aa)&&(Aa=[],Ja=[]);var v=a.inArray(i,Aa);-1===v&&(v=Aa.push(i)-1,Ja[v]=!1);if(!Ja[v]&&(!j||h||Va))Ja[v]=!0,a(L).trigger(s,f.evArg),h=!0;if(f.event.currentTarget===document&&(p===xa&&(Aa=[],Ja=[]),-1!==a.inArray(i,Aa)))Aa.splice(v,1),Ja.splice(v,1);if(Va&&h){s.h5DelegatingEvent.preventDefault();
p=s.target;var w=s.clientX,eb=s.clientY,O=j?"touchmove":"mousemove",Ka=j?"touchend":"mouseup",da=o(O,p,function(a){var b=a.clientX,c=a.clientY;a.dx=b-w;a.dy=c-eb;w=b;eb=c}),l=o(Ka,p),Wa=function(a){f.event=a;f.evArg=ea(arguments);da(f)},G=function(a){f.event=a;f.evArg=ea(arguments);l(f)},Ca=j?a(p):g;k=function(){Aa=[];Ja=[];Ca.unbind(O,Wa);Ca.unbind(Ka,G);if(!j&&b.rootElement!==document){a(b.rootElement).unbind(O,Wa);a(b.rootElement).unbind(Ka,G)}};Ca.bind(O,Wa);Ca.bind(Ka,G);!j&&b.rootElement!==
document&&(a(b.rootElement).bind(O,Wa),a(b.rootElement).bind(Ka,G))}else p===xa&&(k(),h=!1)}}}function p(a){return{controller:b,selector:c,eventName:a,handler:o(a)}}var k=null,h=!1,j=[$(b,c,d,m)];f&&j.push(p("touchstart"));j.push(p("mousedown"));return j}()}function rb(b){if("svg"!==b.tagName.toLowerCase()||Ua())return a(b).offset();var c=N(b).createElementNS(ib,"rect"),d=b.viewBox,m=d.baseVal.y;c.setAttribute("x",d.baseVal.x);c.setAttribute("y",m);c.setAttribute("width",1);c.setAttribute("height",
1);l(c);b.appendChild(c);d=a(c).offset();b.removeChild(c);return d}function Bb(a,b){var c=a.originalEvent;if(c){var d="touchend"===b||"touchcancel"===b?c.changedTouches[0]:c.touches[0],m=d.pageX,e=d.pageY;a.pageX=c.pageX=m;a.pageY=c.pageY=e;a.screenX=c.screenX=d.screenX;a.screenY=c.screenY=d.screenY;a.clientX=c.clientX=d.clientX;a.clientY=c.clientY=d.clientY;d=a.target;if(d.ownerSVGElement)d=d.farthestViewportElement;else if(d===window||d===document)d=document.body;d=rb(d);e-=d.top;a.offsetX=c.offsetX=
m-d.left;a.offsetY=c.offsetY=e}}function ea(a){return 3>a.length?a[1]:Ia(a).slice(1)}function S(a,b){var c=null,d=null;b&&(c=b[0],d=ea(b));var m=c;if(m&&null==m.offsetX&&null==m.offsetY&&m.pageX&&m.pageY){var e=m.target;if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=rb(e);m.offsetX=m.pageX-e.left;m.offsetY=m.pageY-e.top}return new i(a.controller,c,d,a.evSelector,a.evSelectorType)}function v(a){y(a,function(a){a.rootElement=null;a.view.__controller=
null})}function R(b,c,d){null==b&&e(Qa,[c.__name]);!x(b)&&"object"!==typeof b&&e(sb,[c.__name]);b=d?V(b,d):a(b);0===b.length&&e(m,[c.__name]);1<b.length&&e(L,[c.__name]);return b.get(0)}function ca(b){var c=b.__controllerContext.managed,d=Ba.controllers;-1===a.inArray(b,d)&&!1!==c&&d.push(b);b.__controllerContext.triggerReadyExecuted=!0;ja(b,"__ready")}function D(a,b){!1===b?ja(a,"__init"):setTimeout(function(){G(a)||!a.__controllerContext.isRoot&&a.rootController.readyDfd||ja(a,"__init")},0)}function ia(a){a.__controllerContext.triggerPostInitExecuted=
!0;ja(a,"__postInit")}function jb(a,b){y(a,function(a){var c=ra();c.resolve();var d=a.__controllerContext;d.templatePromise=c.promise();d.initDfd=ra();d.postInitDfd=ra();d.readyDfd=ra();d.isUnbinding=!1;d.isUnbinded=!1;d.isExecutedBind=!1;d.triggerPostInitExecuted=!1;d.triggerReadyExecuted=!1;d.args=b;a.initPromise=d.initDfd.promise();a.postInitPromise=d.postInitDfd.promise();a.readyPromise=d.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=!1})}function Ya(b,c){var m=null,e=c;a.isPlainObject(e)?
m=e.target:e={};m=m?V(m,b):b.rootElement;return d.ui.indicator.call(b,m,e)}function Ma(a,b){var c=[],d=null;k(a,function(a){if(a[b]&&M(a[b])){try{var m=a[b]()}catch(e){d=d||e}wb(m)&&c.push(m)}});if(d)throw d;return c}function ha(a,b,c){function d(){var a=b||c||o||s;k(e,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var c in b)b.hasOwnProperty(c)&&(b[c]=null)});s?j.rejectWith(e,[s]):j.resolveWith(e);if(a&&(Ba.dispatchEvent({type:"lifecycleerror",
detail:a,rootController:e}),b||o))throw b||o;}function m(){s=o||T(Gb,e.__name,Ia(arguments));d()}var e=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);if(e){if(!p(e)){e.__controllerContext.isDisposing=1;try{Za(e,c||b)}catch(f){b=b||f}var g,o=null;try{g=Ma(e,"__dispose")}catch(h){b=b||h,o=o||h}var j=e.deferred(),s=null;o?m():ba(g,d,m,!0);return j.promise()}}else if(b)throw b;}function Za(b,c){if(!G(b)){b.__controllerContext.isUnbinding=1;ma(b,c);var d;try{Ma(b,"__unbind")}catch(m){d=
m}y(b,function(a){var b=a.rootElement;if(b){for(var b=N(b),c=a.__controllerContext.boundHandlers,d=0,m=c.length;d<m;d++)E(c[d],b,!0);a.__controllerContext.boundHandlers=[]}});b.__controllerContext.unbindList={};Ba.controllers=a.grep(Ba.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);v(b);b.__controllerContext.isUnbinded=1;if(d)throw d;}}function oa(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?
oa(a,b.parentController):d.core.view}function na(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function p(a){return na(a)||a.__controllerContext.isDisposing}function G(a){a=a.__controllerContext&&a.__controllerContext.isRoot?a:a.rootController;return!a||na(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function ma(a,b){var c=["postInitDfd","readyDfd"],d=[];y(a,function(a){d.push(a);var c=a.__controllerContext.initDfd;c&&!La(c)&&!ua(c)&&c.rejectWith(a,[b])});
for(var m=0,e=c.length;m<e;m++)for(var f=c[m],g=d.length-1;0<=g;g--){var o=d[g],p=o.__controllerContext[f];p&&!La(p)&&!ua(p)&&p.rejectWith(o,[b])}}function $a(a,b){for(var c=a.childNodes,d=0,m=c.length;d<m;d++){var e=c[d];if(1===e.nodeType){if(e=$a(e,b))return e}else if(8===e.nodeType){var f=e.nodeValue;if(0===f.indexOf(sa)){var g=f.indexOf("}");if(-1!==g&&(f=f.slice(0,g).match(/id="([A-Za-z][\w-:\.]*)"/))&&f[1]===b)return e}}}return null}function o(a){var b=this;return function(){return a.apply(b,
arguments)}}function s(a){var b=this;return function(){var c=d.u.obj.argsToArray(arguments);c.unshift(this);return a.apply(b,c)}}function da(a,b,c){function m(f){d.u.obj.getByPath("h5.core.view")||e(Hb);c=F(c)?c:[c];for(var g=[],o=0,p=c.length;o<p;o++){var k=Na(c[o])?c[o]:d.res.dependsOn(c[o]);g.push(k.resolve("ejsfile"))}ba(g,function(c){for(var c=F(c)?c:[c],d=0,m=c.length;d<m;d++)for(var e=c[d].templates,f=0,g=e.length;f<g;f++)try{a.view.__view.register(e[f].id,e[f].content)}catch(o){b.reject(o)}b.resolve()},
function(a){var c=a.detail.error.status;f===d.settings.dynamicLoading.retryCount||0!==c&&c!==qb?setTimeout(function(){b.reject(a)},0):setTimeout(function(){m(++f)},d.settings.dynamicLoading.retryInterval)})}m(0)}function O(b,c,d,m){var f=x(b),g=f?null:b,b=f?a.trim(b):null,c=a.trim(c),o=!f||vb.test(b),p=Oa.test(c);p&&(c=a.trim(a.trim(c.substring(1,c.length-1))));f&&o&&(b=a.trim(b.substring(1,b.length-1)),"this"===b&&e(Ib,[d.__name],{controllerDef:d}));return{selector:b,bindTarget:g,isGlobal:o,isBindRequested:p,
eventName:c,propertyKey:m}}function ab(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=[]}function kb(b){var c=new ab,d=c.logicProperties,m=c.eventHandlerProperties,f=c.functionProperties,g=c.otherProperties,o=c.bindMap,p=c.childControllerProperties,k={},j;for(j in b)if(-1!==j.indexOf(" ")&&M(b[j])){m.push(j);var h=a.trim(j),s=h.lastIndexOf(" "),h=O(h.substring(0,s),h.substring(s+1,h.length),
b,j),s=h.selector,L=h.eventName,i=h.isGlobal,v=h.isBindRequested;k[s]||(k[s]={});k[s][L]||(k[s][L]={});k[s][L][i]||(k[s][L][i]={});k[s][L][i][v]?e(Jb,[b.__name,s,L],{controllerDef:b}):k[s][L][i][v]=1;o[j]=h}else Ra(j,ya)&&b[j]&&!M(b[j])?p.push(j):Ra(j,hb)&&b[j]&&!M(b[j])?d.push(j):M(b[j])?f.push(j):g.push(j);return c}function lb(){this.logicProperties=[];this.functionProperties=[]}function mb(a){var b=new lb,c=b.functionProperties,d=b.logicProperties,m;for(m in a)a.hasOwnProperty(m)&&Ra(m,hb)?d.push(m):
M(a[m])&&c.push(m);return b}function bb(b,c){function d(b,c,m){c=c.__logicContext.waitingPromises=c.__logicContext.waitingPromises||[];-1===a.inArray(b,c)&&(c.push(b),b.done(m))}function m(f){function g(){if(!f.__logicContext.isCalledReady){var m=!0;C(f,function(a){return m=a.__logicContext.isReady});if(m){var o=M(f.__ready)&&f.__ready();f.__logicContext.isCalledReady=!0;wb(o)?(e.push(o),o.done(function(){f.__logicContext.isReady=!0;e.splice(a.inArray(o,e),1);f.__logicContext.waitingPromises=null;
f===b&&c.resolveWith(f)})):(f.__logicContext.isReady=!0,f.__logicContext.waitingPromises=null,f===b&&c.resolveWith(f))}else for(var p=0,k=e.length;p<k;p++)d(e[p],f,g)}}f.__logicContext.isReady=!1;f.__logicContext.isCalledReady=!1;C(f,m);g()}var e=[];m(b)}function cb(a,b){if(a===b)return!0;var c=pa(a),d=pa(b);if(!c&&!d)return!1;c=c?a.toArray():[a];d=d?b.toArray():[b];if(c.length!==d.length)return!1;for(var m=0,e=c.length;m<e;m++)if(c[m]!==d[m])return!1;return!0}function U(a,b){(!a||!a.rootElement)&&
e(Kb,b)}function aa(a,b){(!a||na(a))&&e(Lb,b)}function Sa(b){var c=b.bindTarget,d=b.eventName,m=b.handler;c&&typeof c.nodeType!==la||pb(c)||pa(c)?a(c).bind(d,m):!c||!c.addEventListener?b.isBindCanceled=!0:(c.addEventListener(d,m),b.isNativeBind=!0)}function ga(a,b){b.parentController=a;a.__controllerContext.childControllers.push(b);b.__controllerContext.isRoot=!1;if(a.__controllerContext.isExecutedConstruct){var c=a.rootController;y(b,function(a){a.rootController=c})}}function Z(a){this.__controller=
a;d.u.obj.getByPath("h5.core.view")&&(this.__view=d.core.view.createView())}function Xa(a,b,c,m,e){for(var f=0,g=nb.length;f<g;f++)nb[f](this);this.__name=b;this.__templates=null;this.rootElement=a;this.__controllerContext={executeListeners:!0,isRoot:e,boundHandlers:[],controllerDef:c};this.__controllerContext.args=m?m:null;this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=
d.log.createLogger(b);this.view=new Z(this)}function ka(){this.rootElement=document;this.controllers=[];a(document).bind(xb,function(a,b){null==b.target&&(b.target=document);b.indicator=Ya(this,b);a.stopPropagation()})}function yb(){this._init()}function db(b,c,d,m){var f=!m||!m.isInternal;if(!f&&na(m.rootController))return null;var g=c.__name;(!x(g)||0===a.trim(g).length)&&!Na(c)&&e(Ka,null,{controllerDefObj:c});d&&!a.isPlainObject(d)&&e(Ca,[g],{controllerDefObj:c});c.__controllerContext&&e(eb,null,
{controllerDefObj:c});var o=wa.get(g);o||z(f,b,c,d,g);f&&t(c,g);o||(o=kb(c),wa.register(g,o));f&&B(b,c,g);var k=new Xa(b?a(b).get(0):null,g,c,d,f),j=f?k:m.rootController,h=ra(),g=h.promise().fail(fb),s=ra(),L=s.promise().fail(fb),i=ra(),v=i.promise().fail(fb),O=ra(),w=O.promise(),G=m&&m.async;!1===G&&(h.resolve(),s.resolve(),i.resolve(),O.resolve());f||w.fail(fb);b=k.__controllerContext;b.cache=o;b.preInitDfd=h;b.initDfd=s;b.postInitDfd=i;b.readyDfd=O;k.preInitPromise=g;k.initPromise=L;k.postInitPromise=
v;k.readyPromise=w;b.childControllers=[];for(var l=f?[]:m.promisesForTriggerInit,s=0,L=o.logicProperties.length;s<L;s++)i=o.logicProperties[s],g=c[i],Na(g)?(v=g.resolve("namespace"),l.push(v),v.done(function(b,c){return function(d){d=ob(d);k[b]=d;l.splice(a.inArray(c,l),1);l.push(d.readyPromise);d.readyPromise.done(function(b){return function(){l.splice(a.inArray(b,l),1)}}(d.readyPromise))}}(i,v))):k[i]=ob(g);g=a.extend(!0,{},c);c=c.__templates;s=ra();L=s.promise();Na(c)||c&&0<c.length?da(k,s,c):
s.resolve();L.done(function(){p(k)||h.resolveWith(k)}).fail(function(a){h.rejectWith(k,[a]);ha(k,null,a)});s=0;for(L=o.eventHandlerProperties.length;s<L;s++)i=o.eventHandlerProperties[s],k[i]=q(g,i,!0);s=0;for(L=o.functionProperties.length;s<L;s++)i=o.functionProperties[s],k[i]=q(g,i);s=0;for(L=o.otherProperties.length;s<L;s++)i=o.otherProperties[s],k[i]=g[i];b.managed=m&&m.managed;try{if(k.__construct&&k.__construct({args:k.__controllerContext.args}),p(k))return null}catch(ma){return ha(j,ma),null}f?
(k.rootController=k,k.parentController=null):(k.parentController=m.parentController,k.rootController=m.rootController);if(k.__controllerContext.childControllers){s=0;m=k.__controllerContext.childControllers;for(L=m.length;s<L;s++)m[s].rootController=k.rootController}k.__controllerContext.isExecutedConstruct=!0;s=0;for(L=o.childControllerProperties.length;s<L;s++)if(i=o.childControllerProperties[s],m=g[i],Na(m))v=m.resolve("namespace"),l.push(v),v.done(function(b,c){return function(m){m=db(null,a.extend(true,
{},m),d,{isInternal:true,parentController:k,rootController:j,promisesForTriggerInit:l,async:G});if(m==null)return null;k[b]=m;k.__controllerContext.childControllers.push(m);l.splice(a.inArray(c,l),1)}}(i,v));else{m=db(null,a.extend(!0,{},g[i]),d,{isInternal:!0,parentController:k,rootController:j});if(null==m)return null;k.__controllerContext.childControllers.push(m);k[i]=m}if(f){var R=function(){l.length===0?D(k,G):ba(l,R)};ba(l,R)}return k}function ob(b){function c(b,m){var f=b.__name;(!x(f)||0===
a.trim(f).length)&&e(Mb,null,{logicDefObj:b});b.__logicContext&&e(Nb,null,{logicDefObj:b});var g=wa.get(f);g||(m&&n(b),g=mb(b));for(var p=a.extend(!0,{},b),j=g.functionProperties,h=0,L=j.length;h<L;h++){var i=j[h];p[i]=q(p,i)}p.deferred=ra;p.log=d.log.createLogger(f);p.__logicContext={logicDef:b};p.own=o;p.ownWithOrg=s;wa.register(f,g);M(p.__construct)&&p.__construct();f=g.logicProperties;h=0;for(L=f.length;h<L;h++)i=f[h],g=p[i],Na(g)?(g=g.resolve(),k.push(g),g.done(function(b,d){return function(m){p[b]=
c(m);k.splice(a.inArray(d,k),1)}}(i,g))):p[i]=c(g);return p}function m(){0===k.length?bb(p,f):ba(k,m)}var f=d.async.deferred(),g=f.promise(),k=[],p=c(b,!0);p.readyPromise=g;ba(k,m);return p}var ib="http://www.w3.org/2000/svg",Ha={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},ya="Controller",hb="Logic",za="h5trackstart",Ga="h5trackmove",xa="h5trackend",ta="rootElement",xb="triggerIndicator",vb=/^\{.*\}$/,Oa=/^\[.*\]$/,sa="{h5view ",Qa=6001,m=6003,L=6004,Ka=6006,Ca=6007,eb=6008,
Db=6009,Eb=6010,Cb=6011,Ib=6012,Jb=6013,Mb=6017,Nb=6018,Hb=6029,sb=6030,Fb=6033,tb=6034,Kb=6035,Lb=6036,Gb=6038,ra=d.async.deferred,wb=d.async.isPromise,ub=d.u.str.startsWith,Ra=d.u.str.endsWith,Da=d.u.str.format,Ia=d.u.obj.argsToArray,pa=d.u.obj.isJQueryObject,Na=d.res.isDependency,fb=function(){},Ba,wa,Aa=[],Ja=[],qa="",Ea=function(){var a=document.createElement("div");return typeof a.style.touchAction!==la?(qa="touchAction",!0):typeof a.style.msTouchAction!==la?(qa="msTouchAction",!0):!1}(),nb=
[],Ua=function(){var b=null;return function(){if(null!=b)return b;var c=document.createElementNS(ib,"svg");c.setAttribute("width",1);c.setAttribute("height",1);var d=document.createElementNS(ib,"rect");d.setAttribute("x",1);d.setAttribute("y",1);d.setAttribute("width",1);d.setAttribute("height",1);l(d);a(function(){document.body.appendChild(c);var a=c.getBoundingClientRect().top;c.appendChild(d);b=a===c.getBoundingClientRect().top;document.body.removeChild(c)});return b}}();a.extend(i.prototype,Ha);
a.extend(Z.prototype,{get:function(a,b){U(this.__controller,"view#get");return oa(a,this.__controller).get(a,b)},update:function(a,b,c){U(this.__controller,"view#update");a=V(a,this.__controller);return oa(b,this.__controller).update(a,b,c)},append:function(a,b,c){U(this.__controller,"view#append");a=V(a,this.__controller);return oa(b,this.__controller).append(a,b,c)},prepend:function(a,b,c){U(this.__controller,"view#prepend");a=V(a,this.__controller);return oa(b,this.__controller).prepend(a,b,c)},
load:function(a){U(this.__controller,"view#load");return this.__view.load(a)},register:function(a,b){U(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){U(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){U(this.__controller,"view#isAvailable");return oa(a,this.__controller).isAvailable(a)},clear:function(a){U(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){U(this.__controller,"view#getAvailableTemplates");
return this.__view.getAvailableTemplates()},bind:function(b,c){U(this.__controller,"view#bind");var d=b;if(x(b)&&0===b.indexOf("h5view#")){for(var m=$a(this.__controller.rootElement,b.slice(7)),d=m.nodeValue,d=d.slice(d.indexOf("}")+1),e=a("<div>").append(d),d=[],f=e[0].childNodes,g=0,o=f.length;g<o;g++)d.push(f[g]);e.empty();e=document.createDocumentFragment();g=0;for(o=d.length;g<o;g++)e.appendChild(d[g]);m.parentNode.insertBefore(e,m.nextSibling)}return this.__view.bind(d,c)}});a.extend(Xa.prototype,
{$find:function(b){aa(this,"$find");U(this,"$find");return a(this.rootElement).find(b)},deferred:function(){aa(this,"deferred");return ra()},trigger:function(b,c){aa(this,"trigger");U(this,"trigger");var d=x(b)?a.Event(b):b;a(this.rootElement).trigger(d,c);return d},own:function(){aa(this,"own");return o.apply(this,Ia(arguments))},ownWithOrg:function(){aa(this,"ownWithOrg");return s.apply(this,Ia(arguments))},bind:function(a,b){aa(this,"bind");this.__controllerContext.isRoot||e(6031);this.rootElement=
R(a,this);this.view.__controller=this;jb(this,b?b:null);D(this);return this},unbind:function(){aa(this,"unbind");U(this,"unbind");this.__controllerContext.isRoot||e(6031);this.__controllerContext.isExecutedConstruct||e(6037);try{Za(this)}catch(a){ha(this,a)}},dispose:function(){aa(this,"dispose");this.__controllerContext.isRoot||e(6031);return ha(this)},triggerIndicator:function(b){aa(this,"triggerIndicator");U(this,"triggerIndicator");var c={indicator:null};b&&a.extend(c,b);a(this.rootElement).trigger(xb,
[c]);return c.indicator},indicator:function(a){aa(this,"indicator");U(this,"indicator");return Ya(this,a)},enableListeners:function(){aa(this,"enableListeners");H(this,!0)},disableListeners:function(){aa(this,"disableListeners");H(this,!1)},throwError:function(a,b){aa(this,"throwError");var c=Ia(arguments);c.unshift(null);this.throwCustomError.apply(this,c)},throwCustomError:function(a,b,c){aa(this,"throwCustomError");2>arguments.length&&e(6005);var d=null;b&&x(b)?d=Error(Da.apply(null,Ia(arguments).slice(1))):
(d=Error(),d.detail=b);d.customType=a;throw d;},on:function(a,b,c){aa(this,"on");U(this,"on");a=O(a,b,this);c=g(this,a,c);a=0;for(b=c.length;a<b;a++)w(c[a],N(this.rootElement))},off:function(a,b,c){aa(this,"off");U(this,"off");for(var d=O(a,b,this),a=this.__controllerContext.boundHandlers,m=null,e=d.bindTarget,b=d.eventName,f=d.selector,g=d.isGlobal,d=d.isBindRequested,o=0,k=a.length;o<k;o++){var p=a[o];if(e){if(cb(e,p.bindTarget)&&b===p.eventName&&p.originalHandler===c){m=p;break}}else if(f===p.selector&&
g===p.isGlobal&&d===p.isBindRequested&&c===p.originalHandler){m=p;break}}m&&E(m,N(this.rootElement))},manageChild:function(b){aa(this,"manageChild");if(G(this))e(6041);else if(!b||!b.__controllerContext)e(6039);else if(G(b))e(6040);else{b.rootController!==b&&e(6042);ga(this,b);var c=Ba.controllers,b=a.inArray(b,c);-1!=b&&c.splice(b,1)}},unmanageChild:function(b,c){aa(this,"unmanageChild");if(G(this))e(6043);else if(b.parentController!==this)e(6044);else if(c=!1===c?!1:!0,!c&&!b.rootElement)e(6045);
else{b.parentController=null;b.rootController=b;b.__controllerContext.isRoot=!0;var d=this.__controllerContext.childControllers,m=a.inArray(b,d);-1!==m&&d.splice(m,1);c?b.dispose():(Ba.controllers.push(b),d=this.__controllerContext.waitingPromisesManagerMap,m=b.__controllerContext.waitingPromisesManagerMap,d&&(d.__postInit&&d.__postInit.remove(b.postInitPromise),d.__ready&&d.__ready.remove(b.readyPromise)),m&&m.__init&&m.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?
this.rootController.__controllerContext.triggerReadyInitExecuted||ca(b):ia(b))}}});d.mixin.eventDispatcher.mix(ka.prototype);a.extend(ka.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,c){for(var d=c&&c.deep,m=c&&c.name?P(c.name):null,e=a(b)[0],f=this.controllers,g=[],o=0,p=f.length;o<p;o++){var k=f[o];!(m&&-1===a.inArray(k.__name,m))&&k.rootElement&&(e===k.rootElement?g.push(k):d&&N(e)===N(k.rootElement)&&a.contains(e,k.rootElement)&&g.push(k))}return g}});
a.extend(yb.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});wa=new yb;Ba=new ka;d.u.obj.expose("h5.core",{controllerManager:Ba,definitionCacheManager:{clear:function(a){wa.clear(a)},clearAll:function(){wa.clearAll()}}});var Pa=null;fa.controllerInternal=db;fa.addControllerInstantiationHook=function(a){nb.push(a)};fa.isDisposing=p;
d.u.obj.expose("h5.core",{controller:function(a,b,c){2>arguments.length&&e(6032);return db(a,b,c)},logic:ob,expose:function(a){var b=a.__name;b||e(6019,null,{target:a});var c=b.lastIndexOf(".");if(-1===c)window[b]=a;else{var m=b.substr(0,c),b=b.substr(c+1,b.length),c={};c[b]=a;d.u.obj.expose(m,c)}},childFrom:function(a){return new f(a)}})})();(function(){function l(a){return a instanceof Date}function z(a){return function(c){for(var b=a.queries,d=0,e=b.length;d<e;d++){var f=b[d],j=f.compareFunction;
if(!j(c[f.prop],f.queryValue))return!1}b=a.userFunctions;d=0;for(e=b.length;d<e;d++)if(!b[d](c))return!1;b=a.nestedCriterias;d=0;for(e=b.length;d<e;d++)if(!b[d].match(c))return!1;return!0}}function t(a){return function(c){for(var b=a.queries,d=0,e=b.length;d<e;d++){var f=b[d],j=f.compareFunction;if(j(c[f.prop],f.queryValue))return!0}b=a.userFunctions;d=0;for(e=b;d<e;d++)if(!b[d](c))return!0;b=a.nestedCriterias;d=0;for(e=b.length;d<e;d++)if(b[d].match(c))return!0;return!1}}function n(d){var c=d._criteria.match,
b=d.result;return function(e){for(var f=e.removed,j=e.created,e=e.changed,i=!0,h=0,l=f.length;h<l;h++){var n=a.inArray(f[h],b._src);-1!==n&&b.splice(n,1)}h=0;for(l=e.length;h<l;h++)n=a.inArray(e[h].target,b._src),i=!1,c(e[h].target.get())?-1===n&&b.push(e[h].target):-1!==n&&b.splice(n,1);h=0;for(l=j.length;h<l;h++)c(j[h].get())&&(i=!1,b.push(j[h]));d._compareFunction&&!i&&b.sort(d._compareFunction)}}function B(d){var c=[],b=[],f=[],i={queries:c,nestedCriterias:b,userFunctions:f},n;for(n in d)if(n!==
q)if(a.isPlainObject(d[n]))b.push(B(d[n]));else if(M(d[n]))f.push(d[n]);else{var u=d[n],h=F(u)?u[0]:u,y=null,y=h instanceof RegExp?j:l(h)?r:A,x=a.trim(n.replace(/ +/g," ")).split(" "),I=x[1]||"=";(y=y[I])||e(C,[I,a.type(h)]);c.push({prop:x[0],queryValue:u,compareFunction:y})}i.match="or"===d[q]?t(i):z(i);return i}function f(a){return function(c,b){var d=c.get(a),e=b.get(a);return d>e?1:d<e?-1:0}}function i(a){return function(c,b){var d=c.get(a),e=b.get(a);return d>e?-1:d<e?1:0}}function u(a){this.result=
d.core.data.createObservableArray();this._model=a;this._isLive=!1}var q="__op",A={"=":function(a,c){return a===c},"!=":function(a,c){return a!==c},"<":function(a,c){return a<c},">":function(a,c){return a>c},"<=":function(a,c){return a<=c},">=":function(a,c){return a>=c},between:function(a,c){var b=c[1];return c[0]<=a&&a<=b},"!between":function(a,c){var b=c[1];return a<c[0]||b<a},"in":function(d,c){return-1!==a.inArray(d,c)},"!in":function(d,c){return-1===a.inArray(d,c)}},j={"=":function(a,c){return c.test(a)},
"!=":function(a,c){return!c.test(a)}},r={"=":function(a,c){return!l(a)?!1:a.getTime()===c.getTime()},"!=":function(a,c){return!l(a)?!0:a.getTime()!==c.getTime()},"<":function(a,c){return!l(a)?!1:a.getTime()<c.getTime()},">":function(a,c){return!l(a)?!1:a.getTime()>c.getTime()},"<=":function(a,c){return!l(a)?!1:a.getTime()<=c.getTime()},">=":function(a,c){return!l(a)?!1:a.getTime()>=c.getTime()},between:function(a,c){if(!l(a))return!1;var b=c[0].getTime(),d=c[1].getTime(),e=a.getTime();return b<=e&&
e<=d},"!between":function(a,c){if(!l(a))return!1;var b=c[0].getTime(),d=c[1].getTime(),e=a.getTime();return e<b||d<e},"in":function(a,c){if(!l(a))return!1;for(var b=a.getTime(),d=0,e=c.length;d<e;d++)if(b===c[d].getTime())return!0;return!1},"!in":function(a,c){if(!l(a))return!0;for(var b=a.getTime(),d=0,e=c.length;d<e;d++)if(b===c[d].getTime())return!1;return!0}},C=1,y={};y[C]='演算子"{0}"で"{1}"型の値を比較することはできません';y[2]="ORDER BY句の指定が不正です。指定されたキー({0})は存在しません";y[3]='ORDER BY句の指定が不正です。指定されたorder句:{0} "key名 ASC"または"key名 DESC"またはソート関数を指定してください';
Ab(y);a.extend(u.prototype,{setCriteria:function(a){this._criteria=B(a);this._isLive&&this.execute();return this},execute:function(){this._executeDfd=d.async.deferred();var a=this.result;a.copyFrom(null);for(var c in this._model.items){var b=this._model.items[c];this._criteria.match(b.get())&&a.push(b)}this._compareFunction&&a.sort(this._compareFunction);this._executeDfd.resolveWith(this,[a]);return this},onQueryComplete:function(a){this._executeDfd.done(a);return this},setLive:function(){if(!this._isLive)return this._listener=
this._listener||n(this),this._model.addEventListener("itemsChange",this._listener),this._isLive=!0,this},unsetLive:function(){if(this._isLive)return this._model.removeEventListener("itemsChange",this._listener),this._isLive=!1,this},orderBy:function(d){if(M(d))return this._compareFunction=d,this.result.sort(this._compareFunction),this;(!d||!x(d))&&e(3,[d]);var c=d.split(" "),b=a.trim(c[0]);this._model.schema.hasOwnProperty(b)||e(2,[this._model.name,b]);c=c[1]?a.trim(c[1].toUpperCase()):"ASC";"DESC"===
c?this._compareFunction=i(b):"ASC"===c?this._compareFunction=f(b):e(3,[d]);this._isLive&&this.result.sort(this._compareFunction);return this}});Oa={createQuery:function(){return new u(this)}}})();(function(){function l(a){return(a=a&&x(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function z(b,c){return function Ca(b,d){if(!c[b])return!1;for(var m=0,e=c[b].length;m<e;m++)if(-1<a.inArray(c[b][m],d)||Ca(c[b][m],
d.concat([b])))return!0;return!1}(b,[])}function t(a){return"number"===typeof a&&isNaN(a)}function n(a,b){return null==a||t(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(x(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function B(a,b){return null==a||"number"===typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function f(b,c,d){function f(){o.push(k.call(this,
arguments));if(d)throw null;}var o=[];try{if(!a.isPlainObject(b))throw f(Ma),null;ka(b.name)||f(ha);var g=b.base,s=null;if(null!=g)if(!x(g)||0!==g.indexOf("@"))f(Za);else{var j=g.substring(1);c.models[j]?s=c.models[j].schema:f(oa,j)}var h=b.schema;!s&&null==h&&f(na);if(!s&&!a.isPlainObject(h))throw f(p),null;}catch(i){e(S,null,o)}}function i(b,c,d,f){function g(){p.push(k.call(this,arguments));if(f)throw null;}"object"!==typeof b&&e(R);var p=[];try{if(c){var j=!1,h;for(h in b)b[h]&&!0===b[h].id&&
(j&&g(G),j=!0);j||g(ma)}var i={},j=function(a){if(null!=a){q&&g(o,D);u.hasOwnProperty("defaultValue")&&g(pa,D);if(null==a.on)g(s,D);else for(var c=P(a.on),d=0,e=c.length;d<e;d++)if(!b.hasOwnProperty(c[d])){g(s,D);break}"function"!==typeof a.calc&&g(da,D);i[D]=P(a.on)}};h=function(a){q&&null==a&&(a="string");var b={};null!=a&&(x(a)?(q&&"string"!==a&&"integer"!==a&&g(Ha,D),b=l(a),b.elmType?(b.dataModel&&(c||g(ab,D,b.dataModel),d.models[b.dataModel]||g(kb,D,b.dataModel)),"enum"===b.elmType&&null==u.enumValue&&
g(lb,D)):g(ab,D,a)):g(O,D))};var v=function(b,c){if(null!=b)if(a.isPlainObject(b)){for(var d in b){var m=b[d];if(null!=m)switch(d){case "notNull":!0!==m&&!1!==m?g(bb,D,d):q&&!m&&g(fa,D,d,m);break;case "min":case "max":switch(c.elmType){case "integer":(x(m)||!B(m)||t(m))&&g(cb,D,d);break;case "number":(x(m)||x(m)||!n(m)||Infinity===m||-Infinity===m||t(m))&&g(cb,D,d);break;default:g(U,D,d,c.elmType)}break;case "minLength":case "maxLength":switch(c.elmType){case "string":x(m)||!B(m)||t(m)||0>m?g(Sa,
D,d):q&&"maxLength"===d&&0===m&&g(fa,D,d,m);break;default:g(U,D,d,c.elmType)}break;case "notEmpty":switch(c.elmType){case "string":!0!==m&&!1!==m?g(bb,D,d):q&&!m&&g(fa,D,d,m);break;default:g(U,D,d,c.elmType)}break;case "pattern":switch(c.elmType){case "string":"regexp"!==a.type(m)&&g(aa,D,d);break;default:g(U,D,d,c.elmType)}}}b.notEmpty&&0===b.maxLength&&g(T,D,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&g(T,D,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&
g(T,D,"minLength","maxLength")}else g(mb,D)},w=function(b,c){null!=b&&("enum"!==c.elmType&&g(ba,D),(!F(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&g(X,D))},D;for(D in b){var u=null==b[D]?{}:b[D],q=c&&!!u.id;ka(D)||g($a,D);j(u.depend);h(u.type);var r={},E=q&&null==E?"string":u.type;x(E)&&(r=l(E));v(u.constraint,r);w(u.enumValue,r);q&&u.hasOwnProperty("defaultValue")&&g(Z,D)}for(var ia in i)z(ia,i)&&g(qa,ia)}catch(A){e(ca,null,p)}return!0}function u(a,b){var c=[];try{for(var d in a){var f=
a[d];if(f&&(f.hasOwnProperty("defaultValue")||!f.type||!("array"===f.type||l(f.type).dimension))&&f.hasOwnProperty("defaultValue")){var g=f.defaultValue;b[d](g).length&&pushErrorReason(ga,d,g)}}return!0}catch(o){e(ca,null,c)}}function q(a,b,c){var d={},e;for(e in a){var f=d,g=e,o;o=c;var p=a[e]||{},s=[],h=null,i=0,h=p.type,k=p.constraint||{};b&&p.id&&(h=h||"string",k.notNull=!0,"string"===h&&(k.notEmpty=!0));h&&(i=l(h),h=i.elmType,i=i.dimension,s.push(j(h,{manager:o,enumValue:p.enumValue})));k&&s.push(A(k));
o=r({checkFuncs:s,dimension:i});f[g]=o}return d}function A(a){return function(b){var c=[];a.notNull&&null==b&&c.push({notNull:a.notNull});a.notEmpty&&!b&&c.push({notEmpty:a.notEmpty});if(null==b)return c;null!=a.min&&b<a.min&&c.push({min:a.min});null!=a.max&&a.max<b&&c.push({max:a.max});null!=a.minLength&&b.length<a.minLength&&c.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&c.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&c.push({pattern:a.pattern});return c}}
function j(b,c){var d=[{type:b}];switch(b){case "number":return function(a,b){return n(a,b)?[]:d};case "integer":return function(a,b){return B(a,b)?[]:d};case "string":return function(a,b){return null==a||x(a)||!b&&a instanceof String?[]:d};case "boolean":return function(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:d};case "enum":return function(b){var e;a:if(e=c.enumValue,t(b)){for(var b=0,m=e.length;b<m;b++)if(t(e[b])){e=!0;break a}e=!1}else e=null===b||-1<a.inArray(b,
e);return e?[]:d};case "any":return function(){return[]}}var e=b.match(/^@(.+?)$/)[1],f=c.manager;return function(a){var b=f.models[e];return!b||"object"!==typeof a&&null!=a?d:null==a||b.has(a)?[]:d}}function r(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};var c=a.dimension||0;return function(a,e){function m(a,g){if(!g){for(var o=0,p=b.length;o<p;o++){var s=b[o](a,e);if(s.length)return f=f.concat(s),!1}return!0}if(null==a)return!0;if(!F(a)&&!d.core.data.isObservableArray(a))return f.push({dimension:c}),
!1;o=0;for(p=a.length;o<p;o++)if(!m(a[o],g-1))return!1;return!0}var f=[];m(a,c);return f}}function C(a,b){a._values={};a._nullProps={};for(var c in b)if(b[c]&&y(b[c].type)){var d=W();d.relatedItem=a;a._values[c]=d;a._nullProps[c]=!0}}function y(a){return!a?!1:-1!==a.indexOf("[]")}function k(){return{code:arguments[0]}}function c(b,c,d,f){function g(c){for(var c=P(s[c].depend.on),d=0,e=c.length;d<e;d++)if(-1===a.inArray(c[d],b._realProperty)&&-1!==a.inArray(c[d],p))return!1;return!0}function o(b,c){for(var d=
0,e=c.length;d<e;d++){var m=j[c[d]];if(m)for(var f=0,g=m.length;f<g;f++){var p=m[f];-1===a.inArray(p,b)&&b.push(p)}}}var p=[],s=b.schema||b._model.schema,j=b._dependencyMap,h={};for(f?p=b._dependProps.slice():o(p,P(d));0!==p.length;){for(var d=[],f=0,i=p.length;f<i;f++){var k=p[f];if(g(k)){var v=s[k].depend.calc.call(b,c);0!==b._validateItemValue(k,v,!0).length&&e(Ya,[b._model?b._model.name:ya,k,v]);h[k]={oldValue:b._values[k],newValue:v};s[k]&&y(s[k].type)?v?(b._values[k].copyFrom(v),b._nullProps[k]=
!1):(b._values[k].copyFrom([]),b._nullProps[k]=!0):b._values[k]=v}else d.push(k)}o(d,p);p=d}return h}function b(a,b,c,d){for(var f in c){f in a||e(jb,[d?d.name:ya,f]);var g=c[f];if(!a[f]||!y(a[f].type)||c.hasOwnProperty(f))g=b(f,g,d&&d._idKey===f),0<g.length&&e(D,[d?d.name:ya,f],g)}}function g(b,f,g,o){var p=b.schema||b._model.schema,s=[],j;for(j in f)if(!(g&&-1!==a.inArray(j,g))){var h=b._values[j],i=f[j];if(p[j]&&p[j].depend)h!==i&&e(ia,[b._model?b._model.name:ya,j]);else{var k=p[j]&&p[j].type;
y(k)&&(null==i?(i=[],b._nullProps[j]=!0):b._nullProps[j]=!1);if(k&&k.match(/string|number|integer|boolean/)){var v=i;if(F(v)){for(var v=v.slice(0),i=0,l=v.length;i<l;i++)v[i]=v[i]&&"object"===typeof v[i]?v[i]&&v[i].valueOf&&v[i].valueOf():v[i];i=v}else i=v&&"object"===typeof v&&v.valueOf?v.valueOf():v}if(null!=i&&k&&k.match(/number|integer/)&&"number"!==typeof i)if(F(i)||d.core.data.isObservableArray(i)){v=0;for(l=i.length;v<l;v++)null!=i[v]&&n(i[v])&&(i[v]=parseFloat(i[v]))}else null!=i&&(i=parseFloat(i));
if(!y(k)||!h||!h.equals(i))h===i||t(h)&&t(i)||(k&&-1!==k.indexOf("[]")&&d.core.data.isObservableArray(h)&&(h=h.toArray()),s.push({p:j,o:h,n:i}))}}if(s.length){f={};g=[];v=0;for(j=s.length;v<j;v++)h=s[v],p[h.p]&&y(p[h.p].type)?h.n&&b._values[h.p].copyFrom(h.n):b._values[h.p]=h.n,f[h.p]={oldValue:h.o,newValue:b.get(h.p)},g.push(h.p);p={type:!0===o?"create":"change",target:b,props:f};a.extend(f,c(b,p,g,o));return p}}function w(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||
(b._updateLogs[a]={});return b._updateLogs[a]}function E(a,b,c){if(a._manager)for(var d=w(a),e=0,f=c.length;e<f;e++){var g=c[e],o=g._values[a._idKey];d[o]||(d[o]=[]);d[o].push({type:b,item:g})}}function H(a,b){if(a._manager){var c=w(a),d=b.target._values[a._idKey];c[d]||(c[d]=[]);c[d].push({type:ua,ev:b})}}function h(b){var c={},d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d]?b[d].depend:null;if(e)for(var e=P(e.on),f=0,g=e.length;f<g;f++){var o=e[f];c[o]||(c[o]=[]);-1===a.inArray(d,c[o])&&c[o].push(d)}}return c}
function ja(b,c){f(b,c,!0);var d;d=(d=b.base)?c.models[d.slice(1)].schema:{};d=a.extend({},d,b.schema);i(d,!0,c,!0);var e=q(d,!0,c);u(d,e,!0);return new Fa(d,b,e,c)}function Y(b,c){var d=[],e=[],f=[],g;for(g in b)b[g]&&b[g].depend?e.push(g):d.push(g),b[g]&&b[g].type&&-1!==b[g].type.indexOf("[]")&&f.push(g);g=h(b);var o={},p;for(p in b){var i=b[p];if(!i||!i.depend){var s=null,s=i&&void 0!==i.defaultValue?i.defaultValue:null;o[p]=s}}return{_realProps:d,_dependProps:e,_aryProps:f,_dependencyMap:g,_createInitialValueObj:function(b){if(!b)return a.extend({},
o);var c=a.extend({},o),d;for(d in b)c[d]=b[d];return c},_validateItemValue:function(a,b,d){return c[a](b,d)}}}function I(b,c,f,g){var o=!1,p=["sort","reverse","pop","shift"],i=null;f.addEventListener("changeBefore",function(f){g&&(b._isRemoved||!g._manager)&&e(v,[b._values[g._idKey],f.method]);var h=d.u.obj.argsToArray(f.args);if(-1===a.inArray(f.method,p)){var s=!0;switch(f.method){case "splice":s=!1;h.shift();h.shift();break;case "copyFrom":h=h[0];break;case "set":h.shift()}s&&(f=b._validateItemValue(c,
h),0<f.length&&e(D,c,f))}g?(g._manager&&(f=g._manager,h=g.name,f._oldValueLogs||(f._oldValueLogs={}),f._oldValueLogs[h]||(f._oldValueLogs[h]={}),f=f._oldValueLogs[h],h=b._values[g._idKey],f[h]||(f[h]={}),f[h][c]||(f[h][c]=b._values[c].toArray())),(o=g._manager?g._manager.isInUpdate():!1)||g._manager.beginUpdate()):i=b._values[c].toArray()});f.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var d={type:"change",target:b,props:{}};d.props[c]={};g?(H(g,d),o?a.stopImmediatePropagation():
(g._manager._isArrayPropChangeSilentlyRequested=!0,g._manager.endUpdate(),g._manager._isArrayPropChangeSilentlyRequested=!1)):f.equals(i)||(d.props[c]={oldValue:i,newValue:b._values[c]},b.dispatchEvent(d))}})}function va(a){ka(a)||e(ea);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function Fa(a,b,c,d){this.items={};this.size=0;this.name=b.name;this._manager=d;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===
b?N:Q:N;this.schema=a;this._itemConstructor=gb(a,c,this);d.models[this.name]=this}function gb(c,e,f){function o(a){C(this,c,p,a);a=p._createInitialValueObj(a);b(c,p._validateItemValue,a,f);g(this,a,null,!0);for(var a=p._aryProps,d=0,e=a.length;d<e;d++)I(this,a[d],this.get(a[d]),f)}var p=Y(c,e);f._schemaInfo=p;d.mixin.eventDispatcher.mix(o.prototype);a.extend(o.prototype,p,za,{_model:f,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return o}function V(){}function $(){this.length=
0;this._src=[]}function W(){return new $}function J(a){return a&&a.constructor===$?!0:!1}var N="string",Q="number",ea=15E3,S=15001,v=15005,R=15008,ca=15009,D=15011,ia=15012,jb=15013,Ya=15016,Ma=15900,ha=15901,Za=15902,oa=15903,na=15904,p=6,G=15800,ma=15801,$a=15802,o=15803,s=15804,da=15805,O=15806,ab=15807,kb=15808,lb=15809,mb=15810,bb=15811,cb=15812,U=15813,aa=15814,Sa=15815,T=15816,ba=15817,X=15818,Z=15819,ga=15820,fa=15821,pa=15822,qa=15823,Ha=15824,ya="n/a",ua=2,za={get:function(b){if(0===arguments.length)return a.extend({},
this._values);var c=this._model;if(!(c?c.schema:this.schema).hasOwnProperty(b))e(15014,[c?c.name:ya,b]);return this._values[b]},set:function(a){var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);var d=this._model;d&&(this._isRemoved||!d._manager)&&e(v,[this._values[this._model._idKey],"set"],this);if(d)d._idKey in c&&c[d._idKey]!==this._values[d._idKey]&&e(15003,[d.name,this._idKey]),b(d.schema,d._schemaInfo._validateItemValue,c,d);else{var f=this.validate(c);if(f)throw f;}var f=null,
o=d?d._manager.isInUpdate():!1;d&&!o&&d._manager.beginUpdate();this._isInSet=!0;f=g(this,c);this._isInSet=!1;d?(f&&H(d,f),o||d._manager.endUpdate()):f&&this.dispatchEvent(f)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};d.mixin.eventDispatcher.mix(va.prototype);a.extend(va.prototype,{createModel:function(b){(!b||
"object"!==typeof b)&&e(S,null,[k(Ma)]);if(!F(b))return this.models[b.name]?this.models[b.name]:ja(b,this);var c=b.length;c||e(S,null,[k(Ma)]);for(var d={},f=[],g=0;g<c;g++){var o=b[g].name;if(this.models[o])j[g]=manager.models[b.name];else try{f.push(o);o=[];b[g].base&&o.push(b[g].base.substring(1));for(var p in b[g].schema){var h=b[g].schema[p];if(h){var i=h.type;i&&"@"===i.substring(0,1)&&(i=-1===i.indexOf("[]")?i.substring(1):i.substring(1,i.length-2),o.push(i))}}d[g]={depends:o}}catch(s){e(S)}}for(var j=
{size:0};j.size<c;){p={};h=!1;for(g=0;g<c;g++)if(!d[g].registed){for(var o=d[g].depends,i=0,v=o.length;i<v;i++)if(!this.models[o[i]]){p[o[i]]=!0;break}i===v&&(j[g]=ja(b[g],this),j.size++,h=!0,d[g].registed=!0)}if(!h){var g=!0,l;for(l in p)if(-1===a.inArray(l,f)){g=!1;break}g&&e(15004);e(S,null,[k(oa,l)])}}b=[];for(g=0;g<c;g++)b.push(j[g]);return b},dropModel:function(a){if((a=x(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},
isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,c=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var d={},e;for(e in b)if(b.hasOwnProperty(e)){var f;f=this.models[e];var g=b[e],o=[],p=[],i=[],h=[],s=void 0;for(s in g){for(var j=g[s],v=!0,k=[],l=j.length-1;0<=l;l--){var O=j[l],D=O.type;if(D===ua)k.push(O.ev);
else{a:{for(v=0;v<l;v++){var G=j[v].type;if(1===G||3===G){l=j[v];break a}}l=null}if(1===D)l&&3===l.type?o.push({id:s,oldItem:l.item,newItem:O.item}):p.push(O.item);else if(l=l&&3===l.type?l.item:l?null:O.item)h.push(l),l.dispatchEvent({type:"remove",model:f});v=!1;break}}if(v&&0<k.length){O={};for(l=k.length-1;0<=l;l--)for(var da in k[l].props)O[da]||(J(f.get(s).get(da))?(D=c&&c[f.name]&&c[f.name][s]&&c[f.name][s][da],f.get(s).get(da).equals(D)||(O[da]={oldValue:D})):O[da]={oldValue:k[l].props[da].oldValue});
l=!1;for(da in O)D=O[da].oldValue,j=f.get(s).get(da),D===j||t(D)&&t(j)?delete O[da]:(l=f.get(s).get(da),a&&J(l)&&l.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),O[da].newValue=l,l=!0);l&&(k={type:"change",target:k[0].target,props:O},i.push(k),k.target.dispatchEvent(k))}}(f=0===p.length&&0===o.length&&0===h.length&&0===i.length?!1:{created:p,recreated:o,removed:h,changed:i})&&(d[e]=f)}a=!1;for(e in d)a=!0,f=d[e],this.models[e].dispatchEvent({type:"itemsChange",created:f.created,
recreated:f.recreated,removed:f.removed,changed:f.changed});d={type:"itemsChange",models:d};a&&this.dispatchEvent(d)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});d.mixin.eventDispatcher.mix(Fa.prototype);a.extend(Fa.prototype,{create:function(a){this._manager||e(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();
for(var c=[],d=P(a),f=[],o=this._idKey,p=0,i=d.length;p<i;p++){var h=d[p],s=h[o],j=this._findById(s);j?(f.push(j),(s=g(j,h,[o]))&&H(this,s)):(h=new this._itemConstructor(h),this.items[s]=h,this.size++,c.push(h),f.push(h))}0<c.length&&E(this,1,c);b||this._manager.endUpdate();return F(a)?f:f[0]},validate:function(a,c){try{var d=this._idKey,f=P(a);"object"!==typeof a&&!F(a)&&e(15007);if(c)for(var g=0,o=f.length;g<o;g++){var p=f[g],h=p[d];(""===h||null==h)&&e(15002,[this.name,d]);var i=this._schemaInfo._createInitialValueObj(p);
b(this.schema,this._schemaInfo._validateItemValue,i,this)}else for(var g=0,s=f.length;g<s;g++)p=f[g],b(this.schema,this._schemaInfo._validateItemValue,p,this)}catch(j){return j}return null},get:function(a){if(F(a)||d.core.data.isObservableArray(a)){for(var b=[],c=0,e=a.length;c<e;c++)b.push(this._findById(a[c]));return b}return this._findById(a)},remove:function(a){this._manager||e(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var c=
this._idKey,d=P(a),f=[],g=[],o=0,p=d.length;o<p;o++)if(this.has(d[o])){var h=x(d[o])||B(d[o],!0)?d[o]:d[o]._values[c],i=this.items[h];delete this.items[h];this.size--;g.push(i);i._model&&(i._isRemoved=!0);f.push(i)}else g.push(null);0<f.length&&E(this,3,f);b||this._manager.endUpdate();return F(a)?g:g[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return x(a)||B(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&M(a.get)&&a===this.items[a.get(this._idKey)]:
!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===la?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a},createQuery:Oa.createQuery});d.mixin.eventDispatcher.mix(V.prototype);a.extend(V.prototype,
za,{validate:function(a){try{var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);b(this.schema,this._validateItemValue,c)}catch(d){return d}return null}});d.mixin.eventDispatcher.mix($.prototype);var Ga={equals:function(a){var b=J(a);if(!b&&!F(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var c=0;c<b;c++){var d=this[c],e=a[c];if(!(d===e||t(d)&&t(e)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=J(a)?a._src:a;F(a)||e(15010,[0,a]);a=a.slice(0);a.unshift(0,
this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=d.u.obj.argsToArray(arguments),b=0,c=a.length;b<c;b++)J(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},xa="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),ta;for(ta in Ga)Ga.hasOwnProperty(ta)&&-1===a.inArray(ta,
xa)&&xa.push(ta);var sa=["concat","slice","splice","filter","map"],Da=["reverse","sort"],Ea="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");ta=0;for(var La=xa.length;ta<La;ta++){var Qa=xa[ta];$.prototype[Qa]=function(b){function c(){var e=d.apply(this._src,arguments);if(-1!==a.inArray(b,Da))e=this;else if(-1!==a.inArray(b,sa)){var f=W();f.copyFrom(e);e=f}return e}var d=Ga[b]?Ga[b]:Array.prototype[b];return-1===a.inArray(b,Ea)?c:function(){if(!this.dispatchEvent({type:"changeBefore",
method:b,args:arguments})){var a=c.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(Qa)}d.u.obj.expose("h5.core.data",{createManager:function(a,b){ka(a)||e(ea);var c=new va(a);if(null!=b){""===b&&(b="window");var f={};f[a]=c;d.u.obj.expose(b,f)}return c},createObservableArray:W,createObservableItem:function(a){i(a,!1,null,!0);var c=q(a);u(a,c,!0);var d=new V,c=Y(a,c);C(d,a,c);d.schema=a;for(var e in c)d[e]=c[e];
e=c._createInitialValueObj();b(a,c._validateItemValue,e);g(d,e,null,!0);a=0;for(c=d._aryProps.length;a<c;a++)I(d,d._aryProps[a],d.get(d._aryProps[a]));return d},isObservableArray:J,isObservableItem:function(a){return!(!a||!a.constructor||!a._validateItemValue||M(a.getModel))},createSequence:function(b,c,d){function e(){return h}function f(){var a=h;h+=i;return a}function g(){return h.toString()}function o(){var a=h;h+=i;return a.toString()}function p(){}var h=null!=b?b:1,i=null!=c?c:1,b=1===d?{current:g,
next:o,returnType:1}:{current:e,next:f,returnType:2};b.setCurrent=function(a){h=a};a.extend(p.prototype,b);return new p},SEQ_STRING:1,SEQ_INT:2})})();(function(){function l(e){return d.u.obj.isJQueryObject(e)?e:a(e)}function z(){this.__cachedTemplates={}}var t=d.async.deferred,n={escapeHtml:function(a){return d.u.str.escapeHtml(a)}};a.extend(function(){this._templateMap={}}.prototype,{applyToView:function(a){var d=this._templateMap,e;for(e in d)a.register(e,d[e])},register:function(a,d){this._templateMap[a]=
d},marge:function(d){a.extend(this._templateMap,d._templateMap)},registByElement:function(d){d=a(d);if(0!==d.length){var i=this;d.each(function(){var d=a.trim(this.id),f=a.trim(this.innerHTML);d||e(7002,null,{});i.register(d,f)})}}});a.extend(z.prototype,{load:function(f){var i=t(),l=null;switch(a.type(f)){case "string":a.trim(f)||e(7004);l=[f];break;case "array":l=f;0===l.length&&e(7004);for(var f=0,n=l.length;f<n;f++)x(l[f])?a.trim(l[f])||e(7004):e(7004);break;default:e(7004)}for(var n=[],f=0,A=
l.length;f<A;f++)n.push(d.res.get(l[f]));var j=this;ba(n,function(a){for(var a=F(a)?a:[a],d=[],e,f=0,c=a.length;f<c;f++){for(var b=a[f].templates,g=0,l=b.length;g<l;g++){if(!j.isValid(b[g].content)){e=b[g];break}d.push(b[g])}if(e)break}if(e)try{j.register(e.id,e.content)}catch(n){return n.detail.url=a[f].url,n.detail.path=a[f].path,i.reject(n)}f=0;for(c=d.length;f<c;f++)j.register(d[f].id,d[f].content);i.resolve()},function(a){i.reject(a)});return i.promise()},getAvailableTemplates:function(){var a=
[],d;for(d in this.__cachedTemplates)a.push(d);return a},register:function(d,i){"string"!==a.type(i)?e(7E3,null,{id:d}):(!x(d)||!a.trim(d))&&e(7002,[]);try{var l=new EJS.Compiler(i,"[");l.compile();this.__cachedTemplates[d]=l.process}catch(n){l=n.lineNumber,e(7010,[l?" line:"+l:"",n.message],{id:d})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),!0}catch(d){return!1}},get:function(d,i){var l=this.__cachedTemplates;(!x(d)||!a.trim(d))&&e(7002);(l=l[d])||e(7005,d);var q=i?a.extend(!0,
{},i):{},t=q.hasOwnProperty("_h")?new EJS.Helpers(q):new EJS.Helpers(q,{_h:n}),j=null;try{j=l.call(q,q,t)}catch(r){e(7006,r.toString(),r)}return j},update:function(a,d,e){return l(a).html(this.get(d,e))},append:function(a,d,e){return l(a).append(this.get(d,e))},prepend:function(a,d,e){return l(a).prepend(this.get(d,e))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(d){if(typeof d===la)this.__cachedTemplates={};else{var i=null;switch(a.type(d)){case "string":i=[d];break;
case "array":d.length||e(7002);i=d;break;default:e(7002)}for(var d=0,l=i.length;d<l;d++){var n=i[d];(!x(n)||!a.trim(n))&&e(7002)}d=0;for(l=i.length;d<l;d++)delete this.__cachedTemplates[i[d]]}},bind:function(f,i){var l=null;null==f&&e(7007);F(f)?l=f:(l=a(f),0===l.length&&e(7007),l=l.toArray());(null==i||"object"!==typeof i||F(i)||d.core.data.isObservableArray(i))&&e(7009);return sa.createBinding(l,i)}});var B=new z;B.createView=function(){return new z};a(function(){a('script[type="text/ejs"]').each(function(){var d=
a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&d&&(e=new EJS.Compiler(e,"["),e.compile(),B.__cachedTemplates[d]=e.process)})});d.u.obj.expose("h5.core",{view:B})})();(function(){function l(a,b){return!a||a.nodeType!==X?void 0:a.getAttribute(b)}function z(a){if(!a)return null;for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function t(a,b,c,d){var e=[],b=P(b);if(!0===d)return n(e,a,b,c),e;for(var a=a.childNodes,d=0,f=a.length;d<f;d++)n(e,a[d],b,c);return e}function n(a,b,c,d){if(b.nodeType===
X){for(var e=0,f=c.length;e<f;e++){var g=b.getAttribute(c[e]);if(typeof d===la){if(null!==g){a.push(b);break}}else if(null!==g&&g==d){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;e=0;for(f=b.length;e<f;e++)n(a,b[e],c,d)}}}function x(b,c){for(var b=P(b),d=[],e=0,f=b.length;e<f;e++){var h=b[e];if(h.nodeType===X&&!(!0===c&&(null!=l(h,w)||null!=l(h,E))))for(var i=t(h,g,void 0,!0),j=0,k=i.length;j<k;j++){for(var n=!0,q=i[j];null!=q&&q!==h;q=q.parentNode)if(null!=l(q,w)||null!=l(q,E)){n=!1;
break}n&&d.push(i[j])}}return a(d)}function f(b,c,d){for(var e=[],f=0,g=b.length;f<g;f++){var h=b[f];if(h.nodeType===X){if(!0===d){if(null!=h.getAttribute(c)){e.push(h);continue}if(null!=l(h,w)||null!=l(h,E))continue}for(var i=t(h,c,void 0,!1),j=0,k=i.length;j<k;j++){var n=a(i[j])[0],q=n.parentNode;(null==l(q,w)&&null==l(q,E)||q===h)&&e.push(n)}}}return a(e)}function i(a){return a&&a.addEventListener&&a.getModel&&!F(a)&&!d.core.data.isObservableArray(a)||d.core.data.isObservableItem(a)?!0:!1}function u(a,
b){for(var c=0,d=a.length;c<d;c++){var e=a[c];e.nodeType===X&&e.setAttribute(h,b)}}function q(b,c,f){var g=J++,h=c[0];a(h).empty();if(f){!F(f)&&!d.core.data.isObservableArray(f)&&e($);u(c,g);b._addBindingEntry(f,h,g);d.core.data.isObservableArray(f)&&!b._isWatching(f)&&(c=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(f)]=c,f.addEventListener("change",c));var c=l(h,H),c=z(b._getSrcCtxNode(c).childNodes),i=[];b._loopElementsMap[g]=i;for(var g=h.ownerDocument.createDocumentFragment(),
j=f.get?function(a){return f.get(a)}:function(a){return f[a]},k=0,n=f.length;k<n;k++){for(var w=[],q=0,r=c.length;q<r;q++){var p=S(c[q]);w.push(p);g.appendChild(p)}i[k]=w;h.appendChild(g);A(b,w,j(k),!1,!0)}}}function A(a,b,c,f,g){b=P(b);if(f)q(a,b,c);else{f=J++;c&&(("object"!==typeof c||F(c)||d.core.data.isObservableArray(c))&&e($),u(b,f),a._addBindingEntry(c,b,f));var h=i(c);h&&!a._isWatching(c)&&(f=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(c)]=f,c.addEventListener("change",
f));x(b,g).each(function(){r(this,c,h)});j(a,b,c,!1,g);j(a,b,c,!0,g)}}function j(a,b,c,d,e){var g=d?"data-h5-loop-context":"data-h5-context";f(b,g,e).each(function(){var b=l(this,g),e=null;c&&(e=i(c)?c.get(b):c[b]);A(a,this,e,d)})}function r(b,c,d){for(var f=l(b,g).split(va),h=[],i=[],j=[],k=0,n=f.length;k<n;k++){var w=f[k];if(-1===w.indexOf(I))0<a.trim(w).length&&(h.push(null),i.push(null),j.push(a.trim(w)));else{var q=w.split(I),w=a.trim(q[0]),q=a.trim(q[1]),r=null,p=M.exec(w);p&&(r=p[1],w=/(\S+)[\s\(]/.exec(w)[1]);
0<w.length&&0<q.length&&(h.push(w),i.push(r),j.push(q))}}f=b.tagName.toLowerCase();k=a(b);n=0;for(w=h.length;n<w;n++){var r=h[n],p=i[n],G=j[n],q=null;c&&(q=d?c.get(G):c[G]);null==r&&("input"===f?(r="attr",p="value"):r="text");switch(r){case "text":null==q?k.text(""):k.text(q);break;case "html":null==q?k.html(""):k.html(q);break;case "class":var r=l(b,Y),G=(p=null==r)?"":" ",ma=!1;q&&(ma=!RegExp("\\s"+q+"\\s").test(" "+r+" "));k[0].className=(p?"":r)+(ma?G+q:"");break;case "attr":p||e(N);"input"===
f&&"value"===p?null==q?k.val(""):k.val(q):null==q?k.removeAttr(p):k.attr(p,q);break;case "style":p||e(N);null==q?k.css(p,""):k.css(p,q);break;default:e(V)}}}function C(a,b,c){for(var d=0,e=c.length;d<e;d++){var f=c[d];b.removeChild(f);a._removeBinding(f)}}function y(a){for(var a=a.childNodes,b=[],c=0,d=a.length;c<d;c++)b.push(S(a[c]));return b}function k(a,b,c,d,e){for(var f=c.ownerDocument.createDocumentFragment(),g=[],h=0,i=e.length;h<i;h++){var j=y(c);g[h]=j;for(var k=0,l=j.length;k<l;k++)f.appendChild(j[k]);
A(a,j,e[h])}Array.prototype[d].apply(b,g);return f}function c(a,b,c,d,e,f){var g=d.length;if(0!==g){for(var h=d[0],i=h,c=1===g?c.length:i+d[1];i<c;i++){var j=e[i];j&&C(a,b,j)}e.splice(h,d[1]);if(!(2>=g)){i=e.length;i=0===i||0===h?b.firstChild:h>=i?null:e[h][0];c=f.ownerDocument.createDocumentFragment();h=[h,0];for(j=2;j<g;j++){for(var k=y(f),l=0,p=k.length;l<p;l++)c.appendChild(k[l]);A(a,k,d[j]);h.push(k)}b.insertBefore(c,i);Array.prototype.splice.apply(e,h)}}}function b(a,b){void 0!==a.nodeType?
a.nodeType===X&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=z(a));this._bindRootId=T++;Q[this._bindRootId]=this;for(var c=[],d=0,e=this._targets.length;d<e;d++){var f=this._targets[d];if(f.nodeType===X){f.setAttribute(ja,this._bindRootId);for(var h=t(f,[w,E],void 0,!0),i=0,j=h.length;i<j;i++){var k=W++;h[i].setAttribute(H,k)}h=t(f,g,void 0,!0);i=0;for(j=h.length;i<j;i++)k=h[i],/class\s*:/.test(l(k,g))&&""!=k.className&&k.setAttribute(Y,k.className)}c.push(f.cloneNode(!0))}this._srces=
c;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};A(this,this._targets,this._rootContext,!1,!0)}var g="data-h5-bind",w="data-h5-context",E="data-h5-loop-context",H="data-h5-dyn-ctx",h="data-h5-dyn-vid",ja="data-h5-dyn-bind-root",Y="data-h5-dyn-cn",I=":",va=";",M=/\(\s*(\S+)\s*\)/,N=7100,V=7101,$=7102,W=0,J=0,T=0,Q={},ea={},S;(function(){var b=document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),d=void 0!==c.h5Dummy;b.h5Dummy=
void 0;d?(c.h5Dummy=void 0,S=function(b){var c=b.ownerDocument;return b.nodeType===X?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):S=function(a){return a.cloneNode(!0)}})();a.extend(b.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(c.nodeType===X){this._removeBinding(c);c.removeAttribute(ja);for(var d=t(c,Y,void 0,!0),e=0,f=d.length;e<f;e++)d[e].removeAttribute(Y);c=t(c,H,void 0,!0);e=0;for(d=c.length;e<d;e++)c[e].removeAttribute(H)}}delete Q[this._bindRootId]},
_observableArray_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b)for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=this._getSrcCtxNode(l(e,H)),g=this._loopElementsMap[d];switch(a.method){case "set":c(this,e,a.target,[a.args[0],1,a.args[1]],g,f);break;case "shift":case "pop":var h=g[a.method]();h&&C(this,e,h);break;case "unshift":h=k(this,g,f,a.method,a.args);e.insertBefore(h,e.firstChild);break;case "push":h=k(this,g,f,a.method,a.args);e.appendChild(h);break;case "splice":c(this,
e,a.target,a.args,g,f);break;case "reverse":for(var h=e,i=g;h.firstChild;)h.removeChild(h.firstChild);for(var j=0,e=i.length;j<e;j++)for(var f=i[j],n=f.length-1;0<=n;n--)h.insertBefore(f[n],h.firstChild);g.reverse();break;case "sort":case "copyFrom":case null:for(var h=this._loopElementsMap,i=d,j=a.target,n=g,g=f,f=0,w=n.length;f<w;f++)C(this,e,n[f]);for(var n=e.ownerDocument.createDocumentFragment(),w=[],f=0,q=j.length;f<q;f++){var p=y(g);w[f]=p;for(var G=0,ma=p.length;G<ma;G++)n.appendChild(p[G]);
A(this,p,j.get(f))}e.appendChild(n);h[i]=w}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var c=!1;a.target===this._rootContext&&(c=!0);var d=this,e;for(e in b)if(b.hasOwnProperty(e)){var g=b[e];x(g,c).each(function(){r(this,a.target,!0)});f(g,w).each(function(){var b=l(this,w);if(!(b in a.props))return!0;d._removeBinding(this);var c=l(this,H),c=d._getSrcCtxNode(c),c=S(c);this.parentNode.replaceChild(c,this);A(d,c,a.props[b].newValue)});f(g,E).each(function(){var b=
l(this,E);if(!(b in a.props)||a.target._isArrayProp(b))return!0;d._removeBinding(this);A(d,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,c=this._srces.length;b<c;b++){var d=this._srces[b];if(l(d,H)===a)return d;d=t(d,H,a);if(0<d.length)return d[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);
-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);ea[c]=a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=ea[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var e=this._srcToViewMap[c];e&&e[a]&&(delete e[a],this._hasBindingForSrc(e)||(e=!1,i(b)?(b.removeEventListener("change",this._listeners[c]),e=!0):d.core.data.isObservableArray(b)&&
(b.removeEventListener("change",this._listeners[c]),e=!0),e&&delete this._listeners[c],delete this._srcToViewMap[c],this._usingContexts[c]=null))}ea[a]&&delete ea[a]}},_removeBinding:function(a){if(a.nodeType===X){var b=l(a,h);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(h));for(var a=t(a,h),b=0,c=a.length;b<c;b++){var d=a[b];this._removeBindingEntry(l(d,h));d.removeAttribute(h)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});sa={createBinding:function(a,
c){return new b(a,c)}}})();(function(){function e(b){var c={},d;for(d in ea){var f=a("<div></div>").addClass(b).addClass(d).appendTo("body"),g=a.camelCase(d);c[g]={};a.map(ea[d],function(a){c[g][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,""),10):f.css(a)});f.remove()}return c}function z(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function t(a,b){for(var c=[],d=a/2,e=0.8*a/2,f=360/b*Math.PI/180,g=1;g<=b;g++){var h=f*g,i=Math.cos(h),h=Math.sin(h);c.push({from:{x:d+
e/2*i,y:d+e/2*h},to:{x:d+e*i,y:d+e*h}})}return c}function n(a){return function(){var b=document.body,c=document.documentElement,d=R?b:ca?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function B(a){return function(){var b=R?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function f(a){var b=R?document.body:document.documentElement;
return J.isiOS?window["inner"+a]:b["client"+a]}function i(b){var c=a(b)[0],d=document.body,e=a("html")[0],b={top:0,left:0};if(c===d&&ca)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=R?d:document.documentElement;
c=d.clientTop||0;d=d.clientLeft||0;return{top:b.top+ha()-c,left:b.left+fa()-d}}function u(){a.each(ba(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function q(a){a=T(a)?a[0]:a;return a===window||a===document||a===document.body}function A(a){return Q(N(a)).getComputedStyle(a,null)}function j(b,c){return!Q(N(b)).getComputedStyle?a(b).css(c):
A(b)[c]}function r(b){if(!Q(N(b)).getComputedStyle)return a(b).height();var c=A(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function C(b){if(!Q(N(b)).getComputedStyle)return a(b).width();var c=A(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function y(b,c){if(!Q(N(b)).getComputedStyle)return a(b).outerHeight();var d=A(b);return r(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+
(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function k(b,c){if(!Q(N(b)).getComputedStyle)return a(b).outerWidth();var d=A(b);return C(b)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)+parseFloat(d.borderLeftWidth)+parseFloat(d.borderRightWidth)+(c?parseFloat(d.marginLeft)+parseFloat(d.marginRight):0)}function c(b){if(!Q(N(b)).getComputedStyle)return a(b).innerHeight();var c=A(b);return r(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function b(b){if(!Q(N(b)).getComputedStyle)return a(b).innerWidth();
var c=A(b);return C(b)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)}function g(b,c,d,e){function f(){h+=g;h>d?(clearInterval(k),c.each(function(a){for(var c in b[a])this.style[c]=""}),e()):c.each(function(b){var c=i[b],d;for(d in c)c[d]+=j[b][d];a(this).css(c)})}var g=W,h=0,i=[],j=[];c.each(function(a){var e=b[a];j[a]={};i[a]={};var f=A(c[a]),o;for(o in e)i[a][o]=parseFloat(f[o]),j[a][o]=(parseFloat(e[o])-parseFloat(f[o]))*g/d});f();var k=setInterval(f,g)}function w(a,b,c){var d=[];a.each(function(){var a=
parseFloat(j(this,"opacity"));d.push({opacity:a})});a.css({opacity:0,display:"block"});g(d,a,b,c)}function E(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});g(d,a,b,c)}function H(b,c){this.style=a.extend(!0,{},b);if(!c.getElementById(P)){c.namespaces.add("v","urn:schemas-microsoft-com:vml");var d=c.createElement("style");c.getElementsByTagName("head")[0].appendChild(d);d.id=P;d.setAttribute("type","text/css");d.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}d=
this.style.throbber.width;this.group=z("group",c,{width:d+"px",height:this.style.throbber.height+"px"});this.group.className=Fa;for(var d=t(d,this.style.throbber.lines),e=this.style.throbberLine.color,f=this.style.throbberLine.width,g=0,h=d.length;g<h;g++){var i=d[g],j=i.from,k=i.to,i=z("line",c);i.strokeweight=f;i.strokecolor=e;i.fillcolor=e;i.from=j.x+","+j.y;i.to=k.x+","+k.y;j=z("stroke",c);j.opacity=1;i.appendChild(j);this.group.appendChild(i)}this._createPercentArea(c)}function h(b,c){var f=
this,g=a(b);if(g.length){var o=q(g),g=o?a("body"):g,h=N(g[0]);if(h!==window.document&&(g[0]===h||Q(h)===g[0]))g=a(h.body);var i=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},c);this._displayed=!1;this._throbbers=[];this._settings=i;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},e(i.theme));i.throbber&&a.extend(this._styles.throbber,i.throbber);this._isScreenLock=o;this._$target=g;this._target=
1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){f._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){f._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof i.fadeIn?i.fadeIn:-1;this._fadeOutTime="number"===typeof i.fadeOut?i.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=i.showThrobber||
i.message;for(var g=d.u.str.format(V,""===i.message?'style="display: none;"':"",i.message),o="https"===document.location.protocol?"return:false":"about:blank",j=0,k=this._$target.length;j<k;j++)this._$content=this._$content.add(a(h.createElement("div")).append(g).addClass(ja).addClass(i.theme).addClass(Y).css("display","none")),this._$overlay=this._$overlay.add((i.block?a(h.createElement("div")):a()).addClass(ja).addClass(i.theme).addClass(I).css("display","none")),this._$skin=this._$skin.add((ca||
R?a(h.createElement("iframe")):a()).attr("src",o).addClass(ja).addClass(va).css("display","none"));var n=this._isScreenLock&&D?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",n)});h=i.promises;i=function(){f.hide()};g=a.hasOwnProperty("curCSS")?"pipe":"then";F(h)?(h=a.map(h,function(a){return a&&M(a.promise)?a:null}),0<h.length&&qa(d.async.when(h),g,[i,i])):h&&M(h.promise)&&qa(h,g,[i,i])}}var ja="h5-indicator",Y="content",I="overlay",va="skin",Fa="vml-root",
P="h5-vmlstyle",V='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',$=500,W=13,J=d.env.ua,T=d.u.obj.isJQueryObject,ba=d.u.obj.argsToArray,ea={throbber:["width","height"],"throbber-line":["width","color"]},S=!!document.createElement("canvas").getContext,v=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),
R="CSS1Compat"!==document.compatMode,ca=J.isIE&&6>=J.browserVersion,D=!(J.isAndroidDefaultBrowser||J.isiOS&&5>J.browserVersion||ca||R||J.isWindowsPhone),ia=null,X=null,Z=null,ga=null,ha=null,fa=null,oa=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(e){e=a.camelCase(e);if(e in b.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),f=0;f<d;f++)if(c[f]+e in b.style)return!0;return!1}}(),
X=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:R?b["client"+a]:c["client"+a]}}("Height"),Z=n("Height"),ga=n("Width"),ha=B("Top"),fa=B("Left"),ia=oa("animationName");H.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=
this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,d=this.group.childNodes,e=0,f=d.length;e<f;e++){var g=d[e];if("textbox"!==g.nodeName){var h=e+1;g.firstChild.opacity=h==c?"1":h==c+1||h==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var i=this;this._runId=setTimeout(function(){i._run.call(i)},Math.floor(b/a))}},_createPercentArea:function(b){var c=z("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var d=b.find("td");d.width(this.group.style.width);
d.height(this.group.style.height);d.css("line-height",this.group.style.height);d.addClass("throbber-percent");c.appendChild(b[0]);this.group.appendChild(c)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var na=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,e=this.baseDiv,f=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;
d.style.display="block";d.style.position="absolute";e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.appendChild(d);f.style.width=this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.style.lineHeight=this.style.throbber.height+"px";f.className="throbber-percent";e.appendChild(f);this.positions=t(d.width,this.style.throbber.lines)};na.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),
this._run())},hide:function(){a(this.baseDiv).remove();this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,e=this.positions,f=this.style.throbberLine.color,g=this.style.throbberLine.width,h=this.style.throbber.roundTime;b.width=b.width;for(var i=0,j=e.length;i<j;i++){c.beginPath();c.strokeStyle=f;c.lineWidth=g;var k=i+1;c.globalAlpha=k==d?1:k==d+1||k==d-1?0.75:0.4;var l=e[i],
k=l.from,l=l.to;c.moveTo(k.x,k.y);c.lineTo(l.x,l.y);c.stroke()}d==a?d=0:d++;this.highlightPos=d;if(ia)b.className="throbber-canvas";else{var n=this;this._runId=setTimeout(function(){n._run.call(n)},Math.floor(h/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};h.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+ja).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,d=function(){var c=a(window);b._isScreenLock&&(u(b._$overlay,
b._$content),D||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",b._scrollHandler)));c.bind("orientationchange",b._resizeHandler);c.bind("resize",b._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var g=this._$target.eq(e),h=this._$content.eq(e),i=this._$skin.eq(e),k=this._$overlay.eq(e),l=this._settings,n=j(g[0],"position");!this._isScreenLock&&"static"===n&&(g.data("before-position",n),g.data("before-zoom",j(g[0],"zoom")),g.css({position:"relative",zoom:"1"}));var n=N(g[0]),q=null;l.showThrobber&&
(q=S?new na(this._styles,n):v?new H(this._styles,n):null);q&&(b._throbbers.push(q),b.percent(this._settings.percent),q.show(h.children(".indicator-throbber")[0]));g.append(i).append(k);this._showContent&&g.append(h)}e=this._$skin.toArray();Array.prototype.push.apply(e,this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=a(e);0>c?(e.css("display","block"),d()):w(e,c,d);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&
D||0===this._$overlay.length))for(var c=0,d=this._$target.length;c<d;c++){var e=this._$content.eq(c),f=this._$overlay.eq(c);b=this._$target.eq(c);var g=this._$skin.eq(c);if(this._isScreenLock)e=ga(),b=Z();else{f.css("display","none");e.css("display","none");var h=b[0];a=h.scrollWidth;b=h.scrollHeight;if(ca)a=Math.max(a,h.clientWidth),b=Math.max(b,h.clientHeight);else if(J.isIE&&"function"===typeof getComputedStyle){var h=Q(N(h)).getComputedStyle(h,null),i=parseFloat(h.width)+parseFloat(h.paddingLeft)+
parseFloat(h.paddingRight);a+=i-parseInt(i)-1;h=parseFloat(h.height)+parseFloat(h.paddingTop)+parseFloat(h.paddingBottom);b+=h-parseInt(h)-1}f.css("display","block");e.css("display","block");e=a}f[0].style.width=e+"px";f[0].style.height=b+"px";if(ca||R)g[0].style.width=e+"px",g[0].style.height=b+"px"}},_reposition:function(){for(var d=0,e=this._$target.length;d<e;d++){var f=this._$target.eq(d),g=this._$content.eq(d);if(this._isScreenLock){var h=X();D?g.css("top",(h-y(g[0]))/2+"px"):g.css("top",ha()+
h/2-y(g[0])/2+"px")}else g.css("top",f.scrollTop()+(c(f[0])-y(g[0]))/2);var h=b(g[0])-C(g[0]),i=0;g.children().each(function(){var b=a(this);if("none"===j(b[0],"display"))return!0;i+=k(this,!0)});g.css("width",i+h);g.css("left",f.scrollLeft()+(b(f[0])-k(g[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());for(var e=
a(d),d=function(){var c=a(window);e.remove();b._isScreenLock||b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},
f=0,g=this._throbbers.length;f<g;f++)this._throbbers[f].hide();0>c?(e.css("display","none"),d()):E(e,c,d);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!x(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):
this._$content.remove();this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);
b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;D||ca||R?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};d.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new h(b.target,b):new h(b,c)},isInView:function(b,c){var d,e,g,h,j=a(b);if(typeof c===la)e=f("Height"),h=f("Width"),d=ha(),g=fa();else{h=a(c);if(0===h.find(j).length)return;g=i(h);d=g.top+parseInt(h.css("border-top-width"));g=g.left+
parseInt(h.css("border-left-width"));e=h.innerHeight();h=h.innerWidth()}e=d+e;h=g+h;var k=i(j),l=k.top,k=k.left,n=l+j.outerHeight(),j=k+j.outerWidth();return(d<=l&&l<e||d<n&&n<=e)&&(g<=k&&k<h||g<j&&j<=h)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,$))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,$)}})})();(function(){function l(){var c=a.mobile.activePage,c=c&&c[0]&&c[0].id;return x(c)&&0<c.length?c:null}function z(){var c=
l();null!==c&&a(function(){f.addCSS(c);f.bindController(c)})}function t(a,b){for(var d in u)for(var e=u[d],f=a===d,i=0,h=e.length;i<h;i++){var j=e[i];if(f)j[(b?"enable":"disable")+"Listeners"]()}for(d in q){e=q[d];f=a===d;i=0;for(h=e.length;i<h;i++)if(j=e[i],f)j[(b?"enable":"disable")+"Listeners"]()}}function n(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var d=a.split("."),e=b.split("."),f=d.length,i=0;i<f;i++){if(null==e[i])return 1;var h=parseInt(d[i],10),j=
parseInt(e[i],10);if(h!==j)return h<j?-1:1}return null!=e[f]?-1:0}var B,f=null,i={},u={},q={},A={},j={},r=!1,C=!1,y=!1;d.u.obj.ns("h5.ui.jqm");d.ui.jqm.dataPrefix="h5";var k={__name:"JQMController",__ready:function(){var c=this,b=l();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){c.loadScript(this.id)});var d=this.$find("#"+b);d.one("h5controllerready.emulatepageshow",function(){y&&d[0]===a.mobile.activePage[0]&&d.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){B||
this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){B&&this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});C=!0;var c=c.event.target.id,b=u[c],d=q[c];if(b){for(var e=0,f=b.length;e<f;e++)b[e].dispose();u[c]=[]}if(d){e=0;for(f=d.length;e<f;e++)d[e].dispose();q[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=
a.event.target.id;this.addCSS(a);t(a,!0)},"{rootElement} pagehide":function(c){C||a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});C=!1;c=c.event.target.id;t(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(c){var b=!1,d=a(c.event.target),e=c.evArg?c.evArg.prevPage:a("");if(c=u[d[0].id])for(var f=0,i=c.length;f<i;f++)if(!c[f].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",
{prevPage:e})});b=!0;break}b||d.trigger("h5jqmpageshow",{prevPage:e})},"{rootElement} h5controllerbound":function(c){c=c.evArg;if(this!==c){var b=l();null!==b&&-1===a.inArray(c,u[b])&&(q[b]||(q[b]=[]),q[b].push(c))}},"{rootElement} h5controllerunbound":function(c){var b=c.evArg,c=l();null!==c&&(b=a.inArray(b,q[c]),-1!==b&&q[c].splice(b,1))},loadScript:function(c){var c=a("#"+c),b=a.trim(c.data(this.getDataAttribute("script")));if(0!==b.length)return b=a.map(b.split(","),function(b){return a.trim(b)}),
c=!0==c.data(this.getDataAttribute("async")),d.u.loadScript(b,{async:c})},getDataAttribute:function(a){var b=d.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=i[a],e=A[a];if(b&&0!==b.length){u[a]||(u[a]=[]);for(var f=u[a],j=0,k=b.length;j<k;j++){for(var h=b[j],l=!1,n=0,q=f.length;n<q;n++){var r=f[n];if(r&&r.__name===h.__name){l=!0;break}}l||u[a].push(d.core.controller("#"+a,h,e[j]))}}},addCSS:function(c){if(c=j[c])for(var b=document.getElementsByTagName("head")[0],
d=b.getElementsByTagName("link"),e=d.length,f=0,i=c.length;f<i;f++){for(var h=a.mobile.path.parseUrl(c[f]).filename,k=!1,l=0;l<e;l++)if(a.mobile.path.parseUrl(d[l].href).filename===h){k=!0;break}k||(h=document.createElement("link"),h.type="text/css",h.rel="stylesheet",h.href=c[f],b.appendChild(h))}},removeCSS:function(c){var b=j[c];if(b&&(c=l(),null!==c)){var d=j[c];a("link").filter(function(){var c=a(this).attr("href");return-1!==a.inArray(c,b)&&-1===a.inArray(c,d)}).remove()}}};d.u.obj.expose("h5.ui.jqm.manager",
{init:function(){r||(r=!0,B=0<=n(a.mobile.version,"1.4"),a(document).one("pageshow",function(){y=!0}),a(function(){f=fa.controllerInternal("body",k,null,{managed:!1});z()}))},define:function(c,b,d,f){x(c)||e(12E3,"id");null!=b&&!x(b)&&!F(b)&&e(12E3,"cssSrc");null!=d&&((x(d)||F(d))&&e(12001),(!a.isPlainObject(d)||!("__name"in d))&&e(12E3,"controllerDefObject"),null!=f&&!a.isPlainObject(f)&&e(12E3,"initParam"));j[c]||(j[c]=[]);i[c]||(i[c]=[]);A[c]||(A[c]=[]);a.merge(j[c],a.map(a.makeArray(b),function(b){return a.inArray(b,
j[c])!==-1?null:b}));d&&-1===a.inArray(d,i[c])&&(i[c].push(d),A[c].push(f));r&&null!==l()?z():this.init()}})})();(function(){function l(){n||(n=navigator.geolocation);return n}function z(a,d){this.oblateness=a;this.semiMajorAxis=d}function t(){}var n=null,x=d.env.ua;z.prototype.getOblateness=function(){return this.oblateness};z.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var f=new z(298.257222,6378137),i=new z(299.152813,6377397.155),u=Math.PI/180;a.extend(t.prototype,{isSupported:x.isIE&&
9<=x.browserVersion?!0:!!l(),getCurrentPosition:function(a){var e=d.async.deferred();l().getCurrentPosition(function(a){e.resolve(a)},function(a){e.reject(T(2002,null,a))},a);return e.promise()},watchPosition:function(a){function e(){}var f=d.async.deferred(),i=l().watchPosition(function(a){f.notify(a)},function(a){l().clearWatch(i);f.reject(T(2002,null,a))},a);e.prototype.unwatch=function(){l().clearWatch(i);f.resolve()};return f.promise(new e)},getDistance:function(a,d,i,l,n){(!isFinite(a)||!isFinite(d)||
!isFinite(i)||!isFinite(l))&&e(2E3);var t=n?n:f;t instanceof z||e(2001);var n=t.getSemiMajorAxis(),k=t.getOblateness(),a=a*u,d=d*u,i=i*u,t=l*u,l=(a+i)/2,k=Math.sqrt(2*k-1)/k,k=Math.pow(k,2),c=Math.sqrt(1-k*Math.pow(Math.sin(l),2)),k=n*(1-k)/Math.pow(c,3),n=n/c,d=d-t;return Math.sqrt(Math.pow(k*(a-i),2)+Math.pow(n*Math.cos(l)*d,2))},GS_GRS80:f,GS_BESSEL:i});d.u.obj.expose("h5.api",{geo:new t})})();(function(){function l(a){if(a){var c=a.deferred;(La(c)||ua(c)||!a.result)&&e(r)}}function z(b,c,d){if(a.isPlainObject(b))for(var f in b){var i=
a.trim(f).replace(/ +/g," ").split(" "),h=[];""===i[0]?e(y):1===i.length?(h.push(i[0]),h.push("="),h.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(i[1])?3===i.length&&/^like$/i.test(i[1])?(h.push(i[0]),h.push(i[1]),h.push("?"),h.push("ESCAPE"),h.push('"'+i[2]+'"')):(h.push(i[0]),h.push(i[1]),h.push("?")):e(C);c.push(h.join(" "));d.push(b[f])}}function t(){}function n(){this._multiple=!1}function B(a){this._db=a;this._df=k();this._tx=null;this._tasks=[];this._queue=[]}function f(a,c,d){this._statements=
[];this._parameters=[];this._executor=a;this._tableName=c;this._columns=F(d)?d.join(", "):"*";this._orderBy=this._where=null}function i(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d?P(d):[];this._df=k();this._multiple=!0}function u(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d;this._where=null}function q(a,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._where=null}
function A(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(c);this._parameters.push(d||[])}function j(a){this._db=a}var r=3E3,C=3003,y=3011,k=d.async.deferred,c=d.u.str.format;a.extend(n.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});a.extend(B.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=
a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof n||e(3009);var c=this._getRecentTask();(!c||c.result)&&this._queue.push(a);return this},_execute:function(a){function c(){if(0===f.length){var i=a(h);d._setResult.apply(d,[i]);e.notify(i,d)}else{for(var j=f.shift(),l=j._statements,n=j._parameters,q=k().resolve().promise(),i=[],r=0,t=l.length;r<t;r++)(function(a,b){q=Z(q,function(){var c=k();d._tx.executeSql(a,b,function(a,b){i.push(j._onComplete(b));
c.resolve()});return c.promise()})})(l[r],n[r]);Z(q,function(){h.push(j._multiple?i:i[0]);c()})}}var d=this,e=this._df,f=this._queue,h=[];try{l(this._getRecentTask());this._addTask(e);for(var i=0,j=f.length;i<j;i++)f[i]._buildStatementAndParameters();this._runTransaction()?c():this._db.transaction(function(a){d._tx=a;c()},function(a){d._tx=null;for(var b=d._tasks,c=b.length-1;0<=c;c--)b[c].deferred.reject(T(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,
b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(n){e.reject(n)}this._df=k();return e.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});f.prototype=new n;a.extend(f.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&e(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!x(b)&&e(3004,["Select","orderBy"]);this._orderBy=P(b);return this},_buildStatementAndParameters:function(){var b=
"",d=this._where,b=c("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(d)){var e=[];z(d,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else x(d)&&(b+=" WHERE "+d);F(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});i.prototype=new n;a.extend(i.prototype,{_buildStatementAndParameters:function(){var b=this._values,d=this._statements,e=this._parameters;if(0===b.length)d.push(c("INSERT INTO {0} DEFAULT VALUES",
this._tableName)),e.push([]);else for(var f=0,i=b.length;f<i;f++){var h=b[f];if(null==h)d.push(c("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else if(a.isPlainObject(h)){var j=[],k=[],l=[],n;for(n in h)j.push("?"),k.push(n),l.push(h[n]);d.push(c("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,k.join(", "),j.join(", ")));e.push(l)}}},_onComplete:function(a){return a.insertId}});u.prototype=new n;a.extend(u.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&e(3004,["Update",
"where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",d=this._where,b=this._values,e=[],f;for(f in b)e.push(f+" = ?"),this._parameters.push(b[f]);b=c("UPDATE {0} SET {1}",this._tableName,e.join(", "));a.isPlainObject(d)?(f=[],z(d,f,this._parameters),b+=" WHERE "+f.join(" AND ")):x(d)&&(b+=" WHERE "+d);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});q.prototype=new n;a.extend(q.prototype,{where:function(b){!a.isPlainObject(b)&&
!x(b)&&e(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",d=this._where,b=c("DELETE FROM {0}",this._tableName);if(a.isPlainObject(d)){var e=[];z(d,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else x(d)&&(b+=" WHERE "+d);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});A.prototype=new n;a.extend(A.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});
a.extend(j.prototype,{select:function(a,c,d){x(a)||e(3001,"select");!F(c)&&"*"!==c&&e(3005,"select");return new f(this.transaction(d),a,c)},insert:function(b,c,d){x(b)||e(3001,"insert");null!=c&&!F(c)&&!a.isPlainObject(c)&&e(3006,"insert");return new i(this.transaction(d),b,c)},update:function(b,c,d){x(b)||e(3001,"update");a.isPlainObject(c)||e(3006,"update");return new u(this.transaction(d),b,c)},del:function(a,c){x(a)||e(3001,"del");return new q(this.transaction(c),a)},sql:function(a,c,d){x(a)||
e(3007,"sql");null!=c&&!F(c)&&e(3008,"sql");return new A(this.transaction(d),a,c)},transaction:function(a){void 0!=a&&!(a instanceof B)&&e(3002,"transaction");return a?a:new B(this._db)}});a.extend(t.prototype,{isSupported:!!window.openDatabase,open:function(a,c,d,e){if(this.isSupported)return a=openDatabase(a,c,d,e),new j(a)}});d.u.obj.expose("h5.api",{sqldb:new t})})();(function(){function e(a){this._storage=a}a.extend(e.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},
getItem:function(a){a=this._storage.getItem(a);return null===a?null:d.u.obj.deserialize(a)},setItem:function(a,e){this._storage.setItem(a,d.u.obj.serialize(e))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var d=this._storage,e=0,l=d.length;e<l;e++){var f=d.key(e);a(e,f,this.getItem(f))}}});d.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__",
"ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new e(window.localStorage),session:new e(window.sessionStorage)})})();(function(){function l(a){for(var a=d.core.controllerManager.getControllers(a,{deep:!0}),b=0,c=a.length;b<c;b++)ia(a[b])||a[b].dispose()}function z(b,c){var d=a(b).filter(c),e=a(b).find(c);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function t(b){b=a(b).closest("["+V+"],["+
$+"]");return b.length?b.get(0):null}function n(b){b=a(b).closest("["+J+"],["+W+"]");return b.length?b.get(0):null}function B(a,b){if(a===b)return!0;var c=n(a),d=b?n(b):null;return c!==d?!1:t(a)===b}function f(b,c,f){var g=b?b:document.body,b=a(g);if(0!==b.length){1!==b.length&&e(v);if(!G&&d.settings.scene.autoCreateMainContainer){var h=z(g,"["+J+"]");0===h.length&&(h=z(g,"main"),0===h.length&&g===document.body&&(h=a(g)),0<h.length&&h.eq(0).attr(J,J))}if(b.is("["+W+"]"))N(g);else if(b.is("["+J+"]"))N(g,
!0);else{var j=a(g).is("["+V+"],["+$+"]")&&!i(g),k=j?d.async.deferred():null,l=a(g).is("["+V+"],["+$+"]")?g:t(g),n=!1;z(g,"["+Q+"]").each(function(){for(var b=this.getAttribute(Q).split(","),d=0,e=b.length;d<e;d++){var h=a.trim(b[d]);if(""===h||c&&h!==c)return!0;if(!i(this,h)){if(!B(this,l))return!0;var o=!1;j&&!n&&this===g&&(o=n=!0);u(this,h);h=A(h,this,o?f:null);o&&h.done(function(a){k.resolve(a)})}}});b.find("["+J+"],["+W+"]").each(function(){if(B(this,l))return!0;var b=a(this);b.is("["+J+"]")?
N(this,!0):b.is("["+W+"]")&&N(this)});if(j)return k.promise()}}}function i(b,c){var d=a(b).attr(X);if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(a.trim(d[e])===c)return!0;return!1}function u(b,c){var d=a(b).attr(X)||"";d&&(d+=",");a(b).attr(X,d+c)}function q(b,c,g){var h=b?b:document.body,j=d.async.deferred(),b=!1,k=null,l=a(h).find(">["+V+"]");0<l.length&&(k=l.eq(0),i(k)||(b=!0,k.is("["+Q+"]")||(u(k,ka.__name),k=d.core.controller(k,ka,g),j.resolve(k))));b||
(h=a(h).children().eq(0).filter("["+$+"]"),0<h.length&&!i(h)&&(b=!0,h.attr(V,V),l=h,h.is("["+Q+"]")||(u(h,ka.__name),k=d.core.controller(h,ka,g),j.resolve(k))));b||e(R);c=f(l.get(0),c,g);ua(j)||c.done(function(a){j.resolve(a)});return j.promise()}function A(a,b,c){var e=d.async.deferred();d.res.get(a).then(function(a){a=d.core.controller(b,a,c);e.resolve(a)});return e.promise()}function j(a,b){this.type=a;this.data=b}function r(b,c){this.type=b;this._targetWindow=c;this._closed=!1;this._subscribers=
[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};a(window).on("message",this._recv)}function C(a,b){var c=pa[a];c||(c=new r(a,b),pa[a]=c);return c}function y(){this._recvChannel=new r(ea,window.opener);this._recvChannel.subscribe(this._receive,this);this._sendChannel=new r(S,window.opener)}function k(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=d.core.data.createSequence(1,1,d.core.data.SEQ_INT);this._sendChannel=C(ea,a);this._recvChannel=
C(S,a);this._recvChannel.subscribe(this._receive,this)}function c(a){this.__controller=a}function b(){}function g(a,b,c,d){this.window=a=window.open(a,b,c);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===d?!0:!1);this._rmi=new k(a);this._watchChild()}function w(b){b=a(b);if(!1===b.children().eq(0).is("["+V+"],["+$+"]")){b.wrapInner(a("<div "+V+"></div>"));var c=b.attr(Q);c&&b.removeAttr(Q).children().attr(Q,c)}}function E(b,c){var f=d.async.deferred();d.ajax({url:b,dataType:"html"}).done(function(g){var h=
g.replace(ha,"").match(qa),g=h?"<div "+ba+" "+h[1]+">"+h[2]+"</div>":g;oa.test(g)&&(g="<div "+W+">"+g+"</div>");g=a(g);c?(g=z(g,"["+W+'="'+c+'"]'),0===g.length&&e(ca,[b,c]),g=g.eq(0)):(h=z(g,"["+J+"]"),d.settings.scene.autoCreateMainContainer&&0===h.length&&(h=z(g,"main")),0<h.length&&(g=h.eq(0),g.attr(J,J)));if(1<g.length||!a(g).is("["+J+"],["+W+"]")&&!g.is("["+ba+"]"))g=a("<div "+W+"></div>").append(g);w(g);f.resolve(g.children())}).fail(function(a){f.reject(a)});return f}function F(b,c){var e;
if(x(b))e=E(b,c);else{e=d.async.deferred();var f;f=null==b?a.parseHTML(na):d.u.obj.isJQueryObject(b)?b[0]:b;e.resolve(f)}return e.promise()}function h(){}function N(b,c){null==b&&(b=a("<div></div>").get(0));a(b).is("["+Z+"]")&&e(D);c?a(b).is(":not(["+J+"])")&&a(b).attr(J,J):a(b).is(":not(["+W+"])")&&a(b).attr(W,W);var d=fa.controllerInternal(b,sa,{isMain:c},{async:!1});a(b).attr(Z,Z);return d}function Y(){la||(la=!0,f())}function I(a){return d.core.controllerManager.getControllers(a||document.body,
{name:sa.__name,deep:!0})}function T(a){if(null==a)return null;var b=null,c=null;x(a)?b=a:c=a;a=I(c);if(0===a.length)return null;if(b){for(c=0;c<a.length;c++)if(a[c]._containerName===b)return a[c];return null}return a[0]}var Q="data-h5-controller",X="data-h5-dyn-controller-bound",V="data-h5-default-scene",$="data-h5-scene",W="data-h5-container",J="data-h5-main-container",Z="data-h5-dyn-container-bound",ba="data-h5-dyn-dummy-body",ea="__h5__RMI",S="__h5__RMI_Result",v=1E5,R=100001,ca=100002,D=100008,
ia=fa.isDisposing,la=!1,ka={__name:"h5.scene.DummyController"};d.mixin.eventDispatcher.mix(r.prototype);a.extend(r.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new j(this.type,a),this._targetWindow.postMessage(d.u.obj.serialize(a),location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},_receiveMessage:function(a){var b;try{if(b=d.u.obj.deserialize(a.data),b.type!==
this.type)return}catch(c){return}for(var a=this._subscribers,e=0,f=a.length;e<f;e++){var g=a[e];g.func.call(g.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var pa={};a.extend(y.prototype,{_receive:function(a){var b=d.core.controllerManager.getControllers(document.body)[0],c=a.id,e=a.method,a=a.args;!b[e]||M(b[e])?this._callFunction(c,b,e,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},_callFunction:function(a,b,c,e){var e=P(e),f=void 0;try{f=b[c].apply(b,e)}catch(g){this._sendChannel.send({id:a,
isAsync:!1,status:1,result:null});return}var h=this;d.async.isPromise(f)?f.done(function(){var b=d.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=d.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:f})}});a.extend(k.prototype,{invoke:function(a,b){var c=d.async.deferred(),e={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[e.id]=
c;this._sendChannel.send(e);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});window.opener&&new y;a.extend(c.prototype,{navigate:function(a){ia(this.__controller)||this.__controller.trigger("sceneChangeRequest",a)},getParentSceneContainer:function(){if(ia(this.__controller))return null;var a=n(this.__controller.rootElement);
return!a?null:T(a)}});a.extend(g.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(){return new b},setModal:function(a){this._isModal!=a&&(this._isModal?(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=d.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=d.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&
(clearInterval(b),a.setModal(!1))},300)}});var ha=/<\!--(?:\s|\S)*?--\>/g,qa=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,oa=/^\s*(?!\s|<)/,na='<div class="h5-scene"></div>',p={};a.extend(h.prototype,{onChange:function(b,c){var e=d.async.deferred();a(b).empty();a(c).appendTo(b);e.resolve();return e.promise()},onChangeStart:function(a){this._ind=d.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(){this._ind.hide()}});p["default"]=h;var G=null,ma=/Controller$/,
sa={__name:"h5.scene.SceneContainerController",isMain:!1,_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_notPushState:!0,__init:function(b){var c=this.rootElement,d=this;(this.isMain=!!(b.args||{}).isMain)&&G&&e(100003);this._transition=this._createTransition();this._transition.onChangeStart(c);this._containerName=a(c).attr(J)||a(c).attr(W);this._currentController=null;w(c);this.on("{rootElement}","sceneChangeRequest",this.own(this._onSceneChangeRequest));
var f;if(this.isMain){G=this;this.on("{window}","popstate",this.own(this._onWindowPopstate));if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));f=void 0}q(c,null,f).done(function(a){d._currentController=a;d._transition.onChangeEnd(d.rootElement,null,c);d._transition=null})},__dispose:function(){ia(this._currentController)||this._currentController.dispose();this._currentController=null;a(this.rootElement).empty()},_onAClick:function(a){a.event.preventDefault();this.changeScene(a.event.originalEvent.target.href)},
_onWindowPopstate:function(){this._changeScene(location.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.changeScene(a.evArg)}),0)},changeScene:function(b){if(x(b))return this.changeScene({to:b});var b=a.extend(!0,{},b),c=b.to;this._transition=this._createTransition(b.transition);this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var f=this._dfd=d.async.deferred();this._isNavigated=!0;if(this.isMain){ma.test(c)||
delete b.to;x(c)||e(100004,[c]);-1!==c.indexOf("#")&&e(100005,[c]);ma.test(c)&&e(100006,[c]);var g=ga(c);history.pushState(null,null,g)}this._changeScene(c,d.u.obj.deserialize(d.u.obj.serialize(b)));return f.promise()},_changeScene:function(b,c){var c=c||{},d=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=this._createTransition(c.transition),this._transition.onChangeStart(this.rootElement,d));d&&l(d);var f=this;x(b)&&(ma.test(b)?A(b,a("<div></div>"),c.args).done(function(a){f._onLoadController(a,
d)}):F(b,!this.isMain?c.container:null).done(function(b){q(a("<div></div>").append(b),null,c.args).done(function(a){f._onLoadController(a,d)})}).fail(function(a){e(100009,[b],a)}))},_createTransition:function(a){var b=p[null!=a?a:"default"];b||e(100007,[a]);return new b},_onLoadController:function(b,c){var d=this,e=b.rootElement;this._transition.onChange(this.rootElement,e).done(function(){this._dfd&&this._dfd.resolve({from:c,to:e});c&&a(c).remove();d._currentController=b;d._transition.onChangeEnd(d.rootElement,
c,e);d._isNavigated=!1;d._dfd=null;d._transition=null})}};fa.addControllerInstantiationHook(function(a){a.scene=new c(a)});d.settings.scene=d.settings.scene||{};a(function(){d.settings.scene.autoInit&&Y()});d.u.obj.expose("h5.scene",{openWindow:function(a,b,c,e){var f=d.async.deferred(),h=new g(a,b,c,e);setTimeout(function(){f.resolve(h)},100);return f.promise()},createSceneContainer:N,init:Y,getMainContainer:function(){return G},scan:f,getAllSceneContainers:I,getSceneContainer:T})})()})(jQuery);