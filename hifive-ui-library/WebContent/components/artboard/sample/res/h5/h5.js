/* Copyright (C) 2012-2014 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.2.0 gitCommitId 07e269546ea24ade0249619fc5ac11bd5c33a1dc (util,async,resource,controller,dataModel,modelWithBinding,view,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){var ea,Pa,ra;function e(a,e,s){var o=null,A=Ga[a],f=gb[a];f&&(o=f(a,A,e,s));!o&&A&&(o=c.u.str.format.apply(null,[A].concat(e)));o&&(o+="(code="+a+")");e=o?Error(o):Error("FwError: code = "+a);a&&(e.code=a);s&&(e.detail=s);throw e;}function yb(a){for(var c in a)a.hasOwnProperty(c)&&(Ga[c]=a[c])}function ba(a,e,s){var o=null,A=Ga[a];A&&(e=[A].concat(e),o=c.u.str.format.apply(null,e));return{code:a,message:o,detail:s}}function P(a){return null==a?a:G(a)?a:[a]}function v(a){return"string"===
typeof a}function Na(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function ua(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function oa(a){return!v(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function na(l){if("regexp"===a.type(l))return l;var c="",c=-1!==l.indexOf("*")?a.map(l.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):l;return RegExp("^"+c+"$")}function pa(a,c,e){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(c,e):a[c](e))}function ca(l,c,e,o){return l[a.hasOwnProperty("curCSS")?
"pipe":"then"](c,e,o)}function pb(a){return a&&a.document&&a.document.nodeType===Wa&&X(a.document)===a}function O(a){return typeof a.nodeType===ha?pb(a)?a.document:null:a.nodeType===Wa?a:a.ownerDocument}function X(a){return window.document===a?window:a.defaultView||a.parentWindow}function Ha(e,y,s,o){function A(j){return function(){if(!q._rejected){var k=c.u.obj.argsToArray(arguments),b=a.inArray(j,e);r[b]=2>k.length?k[0]:k;++q._resolveCount===q._promisesLength&&q._doneCallbackExecuter()}}}var f=
e?e.length:0,i=c.async.isPromise,q=this,r=null;this._doneCallbackExecuter=function(){q._resolved=!0;y&&(r?y.call(this,r):y.apply(this,arguments))};this._failCallbackExecuter=function(){q._rejected=!0;s?s.apply(this,arguments):o&&c.settings.commonFailHandler&&c.settings.commonFailHandler.call(this,arguments)};if(1===f||i(e)){var z=1===f?e[0]:e;i(z)?(this.remove=function(a){!this._resolved&&!this._rejected&&z===a&&this._doneCallbackExecuter()},z.done(this._doneCallbackExecuter),z.fail(this._failCallbackExecuter)):
this._doneCallbackExecuter()}else{for(var f=[],j=0,t=e.length;j<t;j++){var D=e[j];i(D)&&f.push(D)}i=f.length;if(0===i)this._resolved=!0,y&&y();else{this._promises=f;r=[];this._resolveArgs=[];this._resolveCount=0;this._promisesLength=i;for(j=0;j<i;j++)t=f[j],t.done(A(t)).fail(this._failCallbackExecuter)}}}function S(a,e,c,o){return new Ha(a,e,c,o)}var Xa=void 0;if(window.h5){if(window.h5.env&&"1.2.0"===window.h5.env.version)return;Xa=window.h5}var c={};window.h5=c;c.coexist=function(){window.h5=Xa;
return c};c.env={version:"1.2.0"};var Ga={},gb={},qb=12029,ha="undefined",Y=1,Wa=9,W=function(){var a=null,e=null,c=null;return function(o){a||(a=document.createElement("a"));null===c&&(a.setAttribute("href","./"),c="./"!==a.href);if(c)return a.setAttribute("href",o),a.href;e||(e=document.createElement("span"));e.innerHTML='<a href="'+o+'" />';return e.firstChild.href}}();parseHTML=a.parseHTML?a.parseHTML:function(e,c,s){if(!e||!v(e))return null;"boolean"===typeof c&&(s=c,c=!1);c=c||document;e=a("<div>"+
e+"</div>",c);s||e.find("script").remove();for(var s=e[0].childNodes,c=c.createDocumentFragment(),e=0,o=s.length;e<o;e++)c.appendChild(s[e]);return c.childNodes};var G=Array.isArray||function(){var a=Object.prototype.toString;return function(e){return"[object Array]"===a.call(e)}}(),M=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(e){return"[object Function]"===a.call(e)}}return function(a){return"function"===typeof a}}();Ha.prototype=a.extend(Ha.prototype,
{remove:function(e){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var c=a.inArray(e,this._promises);-1!==c&&(this._promises.splice(c,1),this._resolveArgs.splice(c,1),ua(e)||(this._promisesLength--,that._resolveCount===this._promisesLength&&this._doneCallbackExecuter()))}}});ea={controllerInternal:null};ra=Pa=void 0;(function(){function l(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";
case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case r:return"u";case "undefElem":return"_";case "objElem":return"@"}}function y(a,d){if(v(a)){var b=a;d&&(b=b.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,
"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(y(a.toString())):a}function s(a,d){return"1"===d?a:v(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(s(a.toString())):a}function o(a,d,b){var g=c.async.deferred();c.ajax({url:a,async:d,cache:b,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=
q(arguments);a.push(this.url);g.notifyWith(g,a);g.resolveWith(g,a)}).fail(function(){g.rejectWith(g,q(arguments))});return g.promise()}function A(a){v(a)||e(z,"h5.u.obj.ns()");for(var a=a.split("."),d=a.length,b=0;b<d;b++)oa(a[b])||e(z,"h5.u.obj.ns()");for(var g=window,b=0;b<d;b++){var j=a[b];typeof g[j]===r&&(g[j]={});g=g[j]}return g}function f(a,d){var b=A(a),g;for(g in d)d.hasOwnProperty(g)&&(void 0!==b[g]&&e(j,[a,g]),b[g]=d[g])}function i(d){return!d||!d.jquery?!1:d.jquery===a().jquery}function q(a){return Array.prototype.slice.call(a)}
var r="undefined",z=11E3,j=11001,t=11004,D=11005,x=11006,k={},b={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},d=void 0!==document.createElement("script").onload,h=-1===/\r\n/.toString().indexOf("\r\n");f("h5.u",{loadScript:function(b,j){var h=c.async.deferred,g=P(b);(!g||0===g.length)&&e(11007);for(var f=0,t=g.length;f<t;f++)b=g[f],(!v(b)||!a.trim(b))&&e(11007);null!=j&&!a.isPlainObject(j)&&e(11008,"h5.u.loadScript()");var J=j&&!1===j.async?!1:!0,i=!!(j&&!0===j.force),f=!!(j&&!0===
j.parallel),l=!!(j&&!0===j.atomic),D=!i,x=J?h():null,r=J?function(a){x.reject(ba(11010,[a]))}:null,t=J?function(){var a=h();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,s=f?[]:null,A=[],z={};if(J){if(!l&&d){var y=a("head"),G=function(a){var d=h(),b=document.createElement("script");b.onload=function(){b.onload=null;k[a]=a;d.resolve()};b.onerror=function(){b.onerror=null;d.reject(a)};b.type="text/javascript";b.src=D?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;y[0].appendChild(b);
return d.promise()};if(f)s.push(t()),a.each(g,function(){var a=W(this.toString());if(!i&&a in k)return!0;s.push(G(a))}),S(s,function(){x.resolve()},r);else{var R=ca(h().resolve(),t);a.each(g,function(){var a=W(this.toString());R=ca(R,function(){if(i||!(a in k))return G(a)},r)});ca(R,function(){x.resolve()},r)}}else if(f){var u=[];s.push(t());u.push(null);a.each(g,function(){var a=W(this.toString());if(!i&&(a in k||a in z))return!0;s.push(o(a,J,D));l?z[a]=a:u.push(null)});f=g=null;l?(g=function(){a.each(q(arguments),
function(b,d){a.globalEval(d[0])});a.extend(k,z);x.resolve()},f=a.noop):(g=function(){x.resolve()},f=function(){for(var d=q(arguments),b=0;b<u.length;b++)if(d[b]){var g=d[b][3];u[b]!==g&&(a.globalEval(d[b][0]),u.splice(b,1,g))}});c.async.when(s).done(g).fail(r).progress(f)}else R=ca(h().resolve(),t),a.each(g,function(){var b=W(this.toString());R=ca(R,function(){var d=h();!i&&(b in k||b in z)?d.resolve():o(b,J,D).done(function(g){l?(A.push(g),z[b]=b):(a.globalEval(g),k[b]=b);d.resolve()}).fail(function(){d.reject(this.url)});
return d.promise()},r)}),ca(R,function(){l&&(a.each(A,function(b,d){a.globalEval(d)}),a.extend(k,z));x.resolve()},r);return x.promise()}a.each(g,function(){var b=W(this.toString());if(!i&&(b in k||b in z))return!0;o(b,J,D).done(function(d){l?(A.push(d),z[b]=b):(a.globalEval(d),k[b]=b)}).fail(function(){e(11010,[b])})});l&&(a.each(A,function(b,d){a.globalEval(d)}),a.extend(k,z))},createInterceptor:function(a,b){return function(d){var g={},j=a?a.call(this,d,g):d.proceed();d.result=j;if(!b)return j;
if(j&&M(j.promise)&&!i(j)){var h=this;pa(j,"always",function(){b.call(h,d,g)});return j}b.call(this,d,g);return j}}});f("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var d=a.length-b.length;return 0<=d&&a.lastIndexOf(b)===d},format:function(a,b){if(null==a)return"";var d=arguments;return a.replace(/\{(\d+)\}/g,function(a,b){var j=d[parseInt(b,10)+1];return typeof j===r?r:j})},escapeHtml:function(d){return"string"!==a.type(d)?d:d.replace(/[&"'<>]/g,function(a){return b[a]})}});
f("h5.u.obj",{expose:f,ns:A,serialize:function(b){function d(a){for(var b=0,g=k.length;b<g;b++)if(a===k[b])return!0;return!1}function j(a){for(var b=0,d=k.length;b<d;b++)a===k[b]&&k.splice(b,1)}function g(b){var c=b,f=a.type(b);"object"===typeof b&&(b instanceof String?f="String":b instanceof Number?f="Number":b instanceof Boolean&&(f="Boolean"));switch(f){case "String":case "string":c=l(f)+y(c);break;case "Boolean":c=c.valueOf();case "boolean":c=l(f)+(c?1:0);break;case "Number":c=c.valueOf();if(a.isNaN&&
a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))c=Infinity===b.valueOf()?l("infinity"):-Infinity===b.valueOf()?l("-infinity"):l("nan");c=l(f)+c;break;case "number":c=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?l("infinity"):-Infinity===b?l("-infinity"):l("nan"):l(f)+c;break;case "regexp":c=l(f)+y(c.toString(),h);break;case "date":c=l(f)+ +c;break;case "array":d(b)&&e(ERR_CODE_REFERENCE_CYCLE);k.push(b);for(var w=[],c=l(f)+"[",f=0,t=b.length;f<t;f++){w[f.toString()]=!0;var i;i=b.hasOwnProperty(f)?
"function"===a.type(b[f])?l(r):g(b[f]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):l("undefElem");c+='"'+i+'"';f!==b.length-1&&(c+=",")}var f="",o;for(o in b)w[o]||"function"!==a.type(b[o])&&(f+='"'+y(o)+'":"'+g(b[o]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');f&&(c+=(b.length?",":"")+'"'+l("objElem")+"{"+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),c=c.replace(/,$/,""),c+='}"');c+="]";j(b);break;case "object":d(b)&&e(D);k.push(b);c=l(f)+"{";for(o in b)b.hasOwnProperty(o)&&"function"!==a.type(b[o])&&
(c+='"'+o+'":"'+g(b[o]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');c=c.replace(/,$/,"");c+="}";j(b);break;case "null":case r:c=l(f)}return c}M(b)&&e(11002);var k=[];return"2|"+g(b)},deserialize:function(b){function d(b){function c(a){switch(a){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";
case "a":return"array";case "o":return"object";case "l":return"null";case "u":return r;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;g=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(c(b)){case "String":g=new String(s(g,j));break;case "string":break;case "Boolean":"0"===g||"1"===g?g=new Boolean("1"===g):e(x);break;case "boolean":"0"===g||"1"===g?g="1"===g:e(x);break;case "nan":""!==g&&e(x);g=NaN;break;case "infinity":""!==g&&e(x);g=Infinity;break;case "-infinity":""!==
g&&e(x);g=-Infinity;break;case "Number":"infinity"===c(g)?g=new Number(Infinity):"-infinity"===c(g)?g=new Number(-Infinity):"nan"===c(g)?g=new Number(NaN):(g=new Number(g),isNaN(g.valueOf())&&e(x));break;case "number":g=(new Number(g)).valueOf();isNaN(g)&&e(x);break;case "array":var h;try{h=a.parseJSON(g)}catch(k){e(x)}G(h)||e(x);for(var f=0;f<h.length;f++)switch(c(h[f].substring(0,1))){case "undefElem":delete h[f];break;case "objElem":for(var w=d(l("object")+h[f].substring(1)),b=[],f=0,i=h.length-
1;f<i;f++)b[f]=h[f];h=b;for(var o in w)h[o]=w[o];break;default:h[f]=d(h[f])}g=h;break;case "object":try{h=a.parseJSON(g)}catch(q){e(x)}a.isPlainObject(h)||e(x);for(o in h)h[o]=d(h[o]);g=h;break;case "date":g=new Date(parseInt(g,10));break;case "regexp":try{f=g.match(/^\/(.*)\/(.*)$/),w=s(f[1],j),g=RegExp(w,f[2])}catch(D){e(x)}break;case "null":""!==g&&e(x);g=null;break;case r:""!==g&&e(x);g=void 0;break;default:e(t)}return s(g,j)}v(b)||e(11009);b.match(/^(.)\|(.*)/);var j=RegExp.$1;"1"!==j&&"2"!==
j&&e(11003,[j,"2"]);var g=RegExp.$2;return d(g)},isJQueryObject:i,argsToArray:q,getByPath:function(a,b){v(a)||e(z,"h5.u.obj.getByPath()");var d=a.split("."),g=0;if("window"===d[0]&&(!b||b===window))g=1;for(var j=b||window,c=d.length;g<c&&!(j=j[d[g]],null==j);g++);return j}})})();(function(){function l(a,c){a.target||(a.target=c);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var f=!1;a.isDefaultPrevented=function(){return f};a.preventDefault=function(){f=true}}if(!a.isImmediatePropagationStopped){var e=
!1;a.isImmediatePropagationStopped=function(){return e};a.stopImmediatePropagation=function(){e=true}}}function y(a){var e={},f;for(f in a){var i=a[f];if(a.hasOwnProperty(f)&&(M(i)||null===i||"string"===typeof i||"number"===typeof i||"boolean"===typeof i))e[f]=i}this._mix=function(a){for(var c in e)a[c]=e[c]};this._hasInterface=function(a){for(var f in e)if(!c.u.str.startsWith(f,"_")&&typeof a[f]===ha)return!1;return!0}}function s(a){return new y(a)}a.extend(y.prototype,{mix:function(a){return this._mix(a)},
hasInterface:function(a){return this._hasInterface(a)}});c.u.obj.expose("h5.mixin",{createMixin:s,eventDispatcher:s({hasEventListener:function(a,c){if(!this._eventListeners)return!1;var e=this._eventListeners[a];if(!e||!this._eventListeners.hasOwnProperty(a))return!1;for(var i=0,l=e.length;i<l;i++)if(e[i]===c)return!0;return!1},addEventListener:function(a,c){(2>arguments.length||!v(a))&&e(16E3);null==c||this.hasEventListener(a,c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||
(this._eventListeners[a]=[]),this._eventListeners[a].push(c))},removeEventListener:function(a,c){if(this.hasEventListener(a,c))for(var e=this._eventListeners[a],i=0,l=e.length;i<l;i++)if(e[i]===c){e.splice(i,1);break}},dispatchEvent:function(a){if(this._eventListeners){var c=this._eventListeners[a.type];if(c){c=c.slice(0);l(a,this);for(var e=0,i=c.length;e<i&&!a.isImmediatePropagationStopped();e++)M(c[e])?c[e].call(a.target,a):c[e].handleEvent&&c[e].handleEvent(a);return a.isDefaultPrevented()}}}})})})();
(function(){var l,y,s,o,A,f,i;function q(a){return a.match(/^error$/i)?l:a.match(/^warn$/i)?y:a.match(/^info$/i)?s:a.match(/^debug$/i)?o:a.match(/^trace$/i)?A:a.match(/^all$/i)?f:a.match(/^none$/i)?i:null}function r(a,b){var d={},j=a.slice(0,b),c=Math.min(F,b),h=j.slice(0,c).join(" <- ");j.length>c&&(h+=" ...");d.preview=h;d.all=j.join("\n");return d}function z(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function j(b){for(var b=c.u.obj.argsToArray(b),
d=[],j=0,h=b.length;j<h;j++)d.push(a.type(b[j]));return d.join(", ")}function t(){}function D(d){(!v(d)||0===a.trim(d).length)&&e(b);this.category=a.trim(d)}var x=10003,k=10004,b=10005,d=10007,h=10008,w=10010,F=3;l=50;y=40;s=30;o=20;A=10;f=0;i=-1;var I=null;t.prototype={init:function(){},log:function(a){window.console&&(v(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,d=null,d=1===b.length?b[0]:c.u.str.format.apply(c.u.str,b),b=this._getLogPrefix(a)+d;a.logger.enableStackTrace&&
(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var d=!1;a==l&&console.error?(console.error(b),d=!0):a==y&&console.warn?(console.warn(b),d=!0):a==s&&console.info?(console.info(b),d=!0):a==o&&console.debug&&(console.debug(b),d=!0);!d&&console.log&&console.log(b)},
_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,d=this._getLogPrefix(a);b.unshift(d);a.level==l&&console.error?this._output(console.error,b):a.level==y&&console.warn?this._output(console.warn,b):a.level==s&&console.info?this._output(console.info,b):a.level==o&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,
b);return}}catch(d){}a(b)}};D.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(l,arguments,this.error)},warn:function(a){this._log(y,arguments,this.warn)},info:function(a){this._log(s,arguments,this.info)},debug:function(a){this._log(o,arguments,this.debug)},trace:function(a){this._log(A,arguments,this.trace)},_traceFunctionName:function(b){var d=[],c=Error();if(c=c.stack||c.stacktrace)var h=/_traceFunctionName/,d=c.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,
"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),e=null,k=null,d=a.map(d,function(b,d){if(0===b.length)return null==k?"":null;e=""===a.trim(b)?"{anonymous}":a.trim(b);null===k&&h.test(b)&&(k=d);return e}).slice(k+3);else for(var b=b.caller,c=0,f=this.maxStackSize;c<f;c++){var w=z(b),t=j(b.arguments),i;try{i=b.caller}catch(l){d.push("{unable to trace}");break}w?d.push("{"+w+"}("+t+")"):i?d.push("{anonymous}("+t+")"):d.push("{root}("+t+")");if(!i)break;b=i}return r(d,this.maxStackSize)},
_log:function(a,b,d){var b={level:a,args:c.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},j=I.out,h=I.defaultOut,d=[],e=!1;if(j)for(var j=P(j),k=0,f=j.length;k<f;k++){var w=j[k];if(w.compiledCategory.test(this.category)&&a>=w.compiledLevel&&0<=w.compiledLevel&&(d.push(w),!1!==w.terminate)){e=!0;break}}(!d.length||!e)&&d.push(h);k=0;for(j=d.length;k<j;k++){h=d[k];f=h.compiledLevel;h=h.compiledTargets;if(a<f||0>f)break;b.logger=this;b.date=new Date;b.levelString=
this._levelToString(a);if(!h||0===h.length)break;e=0;for(f=h.length;e<f;e++)h[e].log(b)}},_levelToString:function(a){if(a===l)return"ERROR";if(a===y)return"WARN";if(a===s)return"INFO";if(a===o)return"DEBUG";if(a===A)return"TRACE"}};c.u.obj.expose("h5.log",{createLogger:function(a){return new D(a)},configure:function(){function b(c,f,g){if(!g){var t=f.category;(!v(t)||0===a.trim(t).length)&&e(w);t=a.trim(t);f.compiledCategory=na(t);l.push(t)}g=null==f.level?q(g?j.level:i.level):v(f.level)?q(a.trim(f.level)):
f.level;"number"!==typeof g&&e(x,f.level);f.compiledLevel=g;g=[];t=f.targets;if(null!=t){var D=[];null==t||G(t)||v(t)&&a.trim(t).length||e(h);for(var t=P(t),F=0,u=t.length;F<u;F++){null==t[F]||v(t[F])&&a.trim(t[F]).length||e(h);var Q=t[F];if(Q){-1!==a.inArray(Q,D)&&e(d,Q);var da=c[Q];da||e(k,Q);D.push(Q);g.push(da.compiledTarget)}}}f.compiledTargets=g}var j={level:"NONE",targets:null},f=a.extend(!0,{},c.settings.log),i=f.defaultOut;i||(i=j,f.defaultOut=i);var l=[],D=f.target;D||(D={},f.target=D);
(function(b){a.isPlainObject(b)||e(10009);for(var d in b){var j=b[d];a.type(j.type)!=="object"&&j.type!=="console"&&e(1E4);var c=null,c=j.type==="console"?new t:a.extend(true,{},j.type);c.init&&c.init(j);j.compiledTarget=c}b.console={type:"console",compiledTarget:new t}})(D);b(D,i,!0);var F=f.out;if(F)for(var F=P(F),o=0,r=F.length;o<r;o++)b(D,F[o]);I=f}})})();(function(){function e(l){c.settings.aspects=a.map(P(l),function(a){a.target&&(a.compiledTarget=na(a.target));a.pointCut&&(a.compiledPointCut=
na(a.pointCut));return a})}c.u.obj.ns("h5.settings");c.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||a===qb))return!1}},trackstartTouchAction:"none",res:{baseUrl:null,timeoutTime:1E4}};var y=c.u.createInterceptor(function(a,c){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);c.start=new Date;
return a.proceed()},function(a,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,e)});c.u.obj.expose("h5.core.interceptor",{lapInterceptor:y,logInterceptor:y,errorInterceptor:function(a){var e=null;try{e=a.proceed()}catch(l){c.settings.commonFailHandler&&M(c.settings.commonFailHandler)&&c.settings.commonFailHandler.call(null,l)}return e}});a(document).trigger("h5preinit");c.settings.aspects&&e(c.settings.aspects);c.log.configure()})();
(function(){c.u.obj.expose("h5.env",{ua:function(c){function e(a,b){var d=v(a,"[^;)]*",b).split(" ");return 1===d.length?"":d[d.length-1]}function s(a,b){var d=v(a,"[^;) ]*",b).split("/");return 1===d.length?"":d[d.length-1]}function o(a,b){var d=v(a,"[^;) ]*",b).split(":");return 1===d.length?"":d[d.length-1]}var A=!!c.match(/iPhone/i),f=!!c.match(/iPad/i),i=A||f,q=!!c.match(/android/i),r=!!c.match(/Windows Phone/i),z=!!c.match(/MSIE/)||!!c.match(/Trident/),j=!!c.match(/Firefox/i),t=!!c.match(/Chrome/i)||
!!c.match(/CrMo/)||!!c.match(/CriOS/),D=!q&&!!c.match(/Safari/i)&&!t,x=!!c.match(/Webkit/i),k=!!c.match(/Opera/i),b=q&&!!c.match(/Safari/i)&&!t,d=!(!A&&!r&&!(b&&c.match(/Mobile/)&&!c.match(/SC-01C/)||q&&t&&c.match(/Mobile/)||c.match(/Fennec/i)||c.match(/Opera Mobi/i))),h=!(!f&&!(b&&!c.match(/Mobile/)||q&&t&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),w=!d&&!h,F=null,I=null,g=function(b,d){return a.trim(c.substring(c.indexOf(b)+b.length,c.indexOf(d))).split("_")},
v=function(b,d,j){return a.trim(c.match(!1===j?RegExp(b+d):RegExp(b+d,"i")))};if(A)I=g("iPhone OS","like"),F=parseInt(I[0]),I=I.join(".");else if(f)I=g("CPU OS","like"),F=parseInt(I[0]),I=I.join(".");else if(!q||!j)q?(I=e("Android"),F=parseInt(I.split(".")[0])):r&&((I=e("Windows Phone OS"))||(I=e("Windows Phone")),F=parseInt(I.split(".")[0]));z&&k&&(z=!1);var Z=g=null;if(i||q&&b)g=F,Z=I;else{var J=null;z?J=e("MSIE",!1)||o("rv"):t?(J=s("Chrome",!1))||(J=s("CrMo",!1)):D?J=s("Version"):j?J=s("Firefox"):
k&&((J=s("Version"))||(J=s("Opera")),J||(J=e("Opera")));J&&(g=parseInt(J.split(".")[0]),Z=J)}return{osVersion:F,osVersionFull:I,browserVersion:g,browserVersionFull:Z,isiPhone:A,isiPad:f,isiOS:i,isAndroid:q,isWindowsPhone:r,isIE:z,isFirefox:j,isChrome:t,isSafari:D,isOpera:k,isAndroidDefaultBrowser:b,isSmartPhone:d,isTablet:h,isDesktop:w,isWebkit:x}}(navigator.userAgent)})})();(function(){function l(a){function c(){e=!0;f=this;k=i(arguments);if(Na(a)||ua(a))return a;var d=i(arguments);if(0<b.length)for(var h=
0,w=b.length;h<w;h++){var t=d;t!==arguments&&(t=P(t));M(b[h])&&b[h].apply(this,t)}return a}var e=!1,f=null,k=null,b=[];a.progress=function(){for(var d=i(arguments),c=0,t=d.length;c<t;c++){var F=d[c];if(G(F))a.progress.apply(this,F);else if(M(F))if(e){var l=k;l!==k&&(l=P(l));F.apply(f,l)}else b.push(F)}return this};a.notify=c;a.notifyWith=function(a,b){return!b?c.apply(a):c.apply(a,b)}}function y(a){if(!a)return!1;for(var a=P(a),c=0,e=a.length;c<e;c++)if(M(a[c]))return!0;return!1}function s(j,e){function D(a){e?
e[a]&&(j[a]=e[a]):(h[a]=j[a],j[a]=function(){return function(){if(!b){var d=i(arguments);if("then"===a||"pipe"===a)d=d[1];y(d)&&(b=!0)}return j._h5UnwrappedCall.call(this,a,i(arguments))}}(a),w[a]=j[a])}function x(a){return function(){var e=c.settings.commonFailHandler;!b&&e&&!d&&(j.fail.call(this,e),d=!0);return a.apply(this,arguments)}}if(j._h5UnwrappedCall)return j;var k=!!j.progress;!k&&!z(j)?l(j):e&&(j.progress=e.progress);var b=!1,d=!1,h={},w={};j._h5UnwrappedCall=e?e._h5UnwrappedCall:function(b,
d){d=P(d);a.extend(j,h);var c=j[b].apply(this,d);a.extend(j,w);return c};for(var F=0,r=o.length;F<r;F++){var g=o[F];j[g]&&D(g)}j.pipe&&!e&&(j.pipe=function(){for(var a=c.async.deferred(),b=i(arguments),d=0,j=A.length;d<j;d++){var e=this;(function(b,d,c){function j(){if(h){var d=b.apply(this,arguments);if(d&&M(d.promise)){s(d);d.done(a.resolve);d._h5UnwrappedCall("fail",a.reject);M(d.progress)&&d.progress(a.notify)}else a[c+"With"](this,[d])}else a[c+"With"](this,arguments)}var h=M(b);if(!h&&d==="fail")e._h5UnwrappedCall(d,
j);else e[d](j)})(b[d],A[d],f[d])}return a.promise()},w.pipe=j.pipe);if(j.then&&!e){var v=j.then;j.then=q?j.pipe:function(){var a=arguments,b=v.apply(this,a);!k&&y(a[2])&&j.progress.call(j,a[2]);return b};w.then=j.then}j.reject&&(j.reject=e&&e.reject?e.reject:x(j.reject));j.rejectWith&&(j.rejectWith=e&&e.rejectWith?e.rejectWith:x(j.rejectWith));if(j.promise)if(e&&e.promise)j.promise=e.promise;else{var Z=j.promise;j.promise=function(){return s(Z.apply(this,arguments),j)}}return j}var o=["fail","always",
"pipe","then"],A=["done","fail","progress"],f=["resolve","reject","notify"],i=c.u.obj.argsToArray,q=function(){var c=a.Deferred();return c!==c.then()}(),r=function(){var c=a.Deferred();return s(c)},z=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};c.u.obj.expose("h5.async",{deferred:r,when:function(){var e=i(arguments);1===e.length&&G(e[0])&&(e=e[0]);var f=e.length,D=c.async.deferred(),l=D.promise(),k=a.when.apply(a,e).done(function(){D.resolveWith(this&&this.promise&&this.promise()===
k?D:this,i(arguments))}).fail(function(){D.rejectWith(this,i(arguments))});if(k.progress)k.progress(function(){D.notifyWith(this===k?l:this,i(arguments))});else{for(var b=[],d=0;d<f;d++)b[d]=void 0;for(var h=function(a){return function(d){b[a]=1<arguments.length?i(arguments):d;D.notifyWith(l,b)}},d=0;d<f;d++){var w=e[d];w&&M(w.promise)&&w.progress&&(1<f?w.progress(h(d)):w.progress(function(){D.notifyWith(l,i(arguments))}))}}return l},isPromise:z,loop:function(c,f,i){G(c)||e(5E3);var l=r(),k="number"===
a.type(i)?i:20,b=0,d=c.length,h,w=null,F=function(){if(b===d)l.resolve(c);else{var a=f.call(c,b,c[b],w);b++;z(a)?a.done(function(){h()}).fail(function(){l.reject(c)}):h()}},q=function(){setTimeout(function(){var a=b-1;0<b&&l.notify({data:c,index:a,value:c[a]});F()},0)},g=!1;h=function(){g||(0===b%k?q():F())};var o=!1,w={resume:function(){!o&&g&&(g=!1,h())},pause:function(){g=!0},stop:function(){o=!0;l.resolve(c)}};q();return l.promise()}})})();(function(){function e(a,c){for(var l=0,o=A.length;l<
o;l++){var j=A[l];a[j]&&(c[f[j]](a[j]),a[j]=void 0)}}function y(c,e,f){for(var l in e)if(e.hasOwnProperty(l)&&(f||!M(e[l]))&&-1===a.inArray(l,o))c[l]=e[l]}function s(a,c){y(this,a,!0);c.promise(this);var e=this.always;this.always=function(){e.apply(this,arguments);return this}}var o=["error","success","complete"],A=["error","success","complete"],f={success:"done",error:"fail",complete:"always"};c.u.obj.expose("h5",{ajax:function(){function f(a,c,e){y(t,e);j.resolveWith(this,arguments)}function q(c,
e,k){if(0===r.retryCount||!1===r.retryFilter.apply(this,arguments))y(t,c),j.rejectWith(this,arguments);else if(r.retryCount--,this.async){var b=this;setTimeout(function(){a.ajax(b).done(f).fail(q)},r.retryInterval)}else a.ajax(this).done(f).fail(q)}var r={},o=arguments;v(o[0])?(a.extend(r,o[1]),r.url=o[0]):a.extend(r,o[0]);var r=a.extend({},c.settings.ajax,r),j=c.async.deferred();e(r,j);var o=a.ajax(r),t=new s(o,j);o.done(f).fail(q);return t}})})();(function(){function e(a,c){this.id=a;this.content=
c}function y(a,c,e){this.url=a;this.path=c;this.content=e}function s(a){this._resourceKey=a}function o(a){a=0===a.indexOf("./")?a.slice(2):a;return(c.settings.res.baseUrl||"./")+a}function A(a,c,e){void 0===e&&M(a)&&(e=a,a=void 0);i.unshift({type:a,test:c,resolver:e})}var f=c.async.deferred,i=[],q={};waitingInfoMap={};waitingForImmediateDeferred=[];waitingImmediateTimer=null;var r={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);
var c=a.url;this.cache[c]=a;this.cacheUrls.push(c)},clearCache:function(a,c){var e=W(a);c||delete this.cache[e];for(var f=0,k=this.cacheUrls.length;f<k;f++)if(this.cacheUrls[f]===e){this.cacheUrls.splice(f,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var c=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return c},loadResourceFromPath:function(a){var e=W(a);if(this.accessingUrls[e])return this.accessingUrls[e];var i=f(),l=i.promise();
this.accessingUrls[e]=l;var k=this;c.ajax(a,{dataType:"text"}).done(function(b,d,c){delete k.accessingUrls[e];b=new y(e,a,c.responseText);k.append(b);i.resolve(b)}).fail(function(b){delete k.accessingUrls[e];i.reject(ba(17E3,[b.status,e],{url:e,path:a,error:b}))});return l}};a.extend(s.prototype,{resolve:function(e){function f(b){for(var d=0,c=i.length;d<c;d++)if(!(e&&e!==i[d].type)){var h=i[d].test;if(!e&&h)if("regexp"===a.type(h)){if(!h.test(b))continue}else if(!1===h(b))continue;return i[d].resolver(b,
e)}return!1}if(!G(this._resourceKey))return f(this._resourceKey);for(var l=this._resourceKey,o=[],k=0,b=l.length;k<b;k++){var d=f(l[k]);o.push(d)}var h=c.async.deferred();S(o,function(a){G(a)||(a=[a]);a.unshift(a.slice(0));h.resolveWith(h,a)},function(a){h.reject(a)});return h.promise()},getKey:function(){return this._resourceKey}});var z={load:function(a){var c=W(a);return r.cache[c]?f().resolve(r.getResourceFromCache(c)).promise():r.loadResourceFromPath(a)},clearCache:function(a){r.clearCache(a)},
clearAllCache:function(){r.clearAllCache()}};A("namespace",null,function(a){var e=q[a]||c.u.obj.getByPath(a);if(e)return f().resolve(e).promise();if(waitingInfoMap[a])return waitingInfoMap[a].deferred.promise();var e=o(a.replace(/\./g,"/"))+".js",i=f(),l=c.settings.res.timeoutTime,k=null;0<l&&(k=setTimeout(function(){waitingInfoMap[a]&&(delete waitingInfoMap[a],i.reject(ba(17001,[a])))},l));waitingInfoMap[a]={deferred:i,timer:k};c.u.loadScript(e).done(function(){var b=q[a]||c.u.obj.getByPath(a);b&&
waitingInfoMap[a]&&(q[a]=b,delete waitingInfoMap[a],clearTimeout(k),i.resolve(b))}).fail(function(b){clearTimeout(k);delete waitingInfoMap[a];i.reject(b)});return i.promise()});A("ejsfile",/.*\.ejs(\?.*$|$)/,function(c){var i=f();z.load(o(c)).done(function(c){var f=a(c.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),k=[];0<f.not('script[type="text/ejs"]').length?i.reject(ba(7011,null,{url:c.url,path:c.path})):(0===f.length&&i.reject(ba(7001,null,{url:c.url,path:c.path})),
f.each(function(){var b=a.trim(this.id);b||i.reject(ba(7002,null,{url:c.url,path:c.path}));var d=a.trim(this.innerHTML);k.push(new e(b,d))}),i.resolve({url:c.url,path:c.path,templates:k}))}).fail(function(a){var c=a.detail,c=ba(7003,[c.error.status,c.url],c);a.code=c.code;a.message=c.message;a.detail=a.detail;i.reject(a)});return i.promise()});A("jsfile",/.*\.js(\?.*$|$)/,function(a){return c.u.loadScript(o(a))});A("cssfile",/.*\.css(\?.*$|$)/,function(a){var c=document.getElementsByTagName("head")[0],
e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href=o(a);c.appendChild(e);return f().resolve(e).promise()});c.u.obj.expose("h5.res",{dependsOn:function(a){return new s(a)},addResolver:A,isDependency:function(a){return a instanceof s},urlLoader:z,resolvers:i,register:function(a,e,f,i){f&&(i?c.u.obj.expose(i,e):c.u.obj.expose(a,e));q[a]=e;if(f=waitingInfoMap[a])delete waitingInfoMap[a],a=f.deferred,(f=f.timer)&&clearTimeout(f),waitingForImmediateDeferred.push({dfd:a,value:e}),
waitingImmediateTimer||(waitingImmediateTimer=setTimeout(function(){waitingImmediateTimer=null;for(var a=waitingForImmediateDeferred.splice(0,waitingForImmediateDeferred.length),b=0,d=a.length;b<d;b++)a[b].dfd.resolve(a[b].value)},0))},get:function(a){return c.res.dependsOn(a).resolve()}})})();(function(){function l(a){null!=a.style.transform&&(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function y(a,b,d,c,n){for(var f in d)f in
gb&&e(zb,[n,f],{controllerDefObj:d})}function s(L,b){function d(c,n){-1!==a.inArray(c,n)&&e(Ab,[b],{controllerDefObj:L});t(c,function(a){d(a,n.concat([c]))},!0)}d(L,[])}function o(L){function b(d,c){-1!==a.inArray(d,c)&&e(Bb,[L.__name],{logicDefObj:L});D(d,function(a){b(a,c.concat(d))})}b(L,[])}function A(L,b,d){null==L&&e(Ta,[d],{controllerDefObj:b});!v(L)&&"object"!==typeof L&&e(rb,[d],{controllerDefObj:b});L=a(L);0===L.length&&e(n,[d],{controllerDefObj:b});1<L.length&&e(C,[d],{controllerDefObj:b});
L[0].nodeType!==Wa&&L[0].nodeType!==Y&&e(sb,[d],{controllerDefObj:b})}function f(L){L=a(L);this._controller=null;if(0===L.length)this._targetElement=null;else{1<L.length?e(C):L[0].nodeType!==Wa&&L[0].nodeType!==Y?e(sb):this._targetElement=L[0];var b=c.core.controllerManager.getController(this._controller);1<b.length&&e();1==b.length?this._controller=controllres[0]:0===b.length&&(L=L.data("h5-controller"),this._controller=c.res.dependsOn(L))}}function i(a,b,d,c,n){this.controller=a;this.event=b;this.evArg=
d;this.selector=c;this.selectorType=n}function q(a){if(!la(this)&&this.__controllerContext.executeListeners)return a.proceed()}function r(a,b,d){var n;n=a.__name;var e=[],f=c.settings.aspects;if(f&&0!==f.length)for(var f=P(f),h=f.length-1;-1<h;h--){var m=f[h];if(!m.target||m.compiledTarget.test(n)){var k=m.interceptors;if(!m.pointCut||m.compiledPointCut.test(b))if(G(k))for(m=k.length-1;-1<m;m--)e=e.concat(k[m]);else e.push(k)}}n=e;d&&n.push(q);return z(a[b],b,n)}function z(a,b,d){for(var c=function(a,
b,L){return function(){var d=this;return L.call(d,{target:d,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(d,this.args)}})}},n=0,e=d.length;n<e;n++)a=c(a,b,d[n]);return a}function j(a,b,d){if(d&&a===sa)return d.rootElement;for(var n=["window","document","navigator"],e=0,f=n.length;e<f;e++){var m=n[e];if(a===m||tb(a,m+"."))return c.u.obj.getByPath(a,X(b))}return d&&tb(a,"this.")?c.u.obj.getByPath(a.slice(5),d):a}function t(a,b,d){if(d){var c=ya.get(a.__name);if(c){d=0;for(e=c.childControllerProperties.length;d<
e;d++){var n=c.childControllerProperties[d];if((f=a[n])&&!1===b(a[n],a,n))return!1}}else for(n in a){var c=a,e=n,f=d,m=c[e];if(Ua(e,Aa)&&"rootController"!==e&&"parentController"!==e&&m&&(f||m.__controllerContext&&!m.__controllerContext.isRoot&&(!m.parentController||m.parentController===c))&&!1===b(a[n],a,n))return!1}}else if(!la(a))for(var n=a.__controllerContext.childControllers,d=0,e=n.length;d<e;d++){var f=n[d];if(!1===b(f,a))return!1}}function D(a,b){var d=ya.get(a.__name);if(d)for(var c=0,n=
d.logicProperties.length;c<n;c++){var e=d.logicProperties[c];if(!1===b(a[e],a,e))return!1}else for(e in a)if(a.hasOwnProperty(e)&&Ua(e,ib)&&!1===b(a[e],a,e))return!1}function x(a,b,d,c){return!1===b.call(this,a,d,c)?!1:t(a,function(a,d,L){if(x(a,b,d,L)===false)return false})}function k(a,b,d,c){if(!1===t(a,function(a,d,L){if(!a||!1===k(a,b,d,L))return!1})||!1===b.call(this,a,d,c))return!1}function b(a,b){var d=[];t(a,function(a){(a=a[b])&&d.push(a)});return d}function d(a){var b=a.__controllerContext.cache.bindMap,
d=O(a.rootElement),c;for(c in b)for(var n=h(a,b[c],a[c]),e=0,f=n.length;e<f;e++)w(n[e],d)}function h(b,d,n){function e(b){var d=b.handler,L=b.controller;b.originalHandler=d;b.handler=function(){var n=!b.isNativeBind&&1===c.settings.listenerElementType?a(this):this;d.call(L,R(b,arguments),n)}}var f=d.selector,m=d.eventName;switch(m){case "mousewheel":n=xa(b,f,m,n);break;case Ba:case Ia:case za:n=N(b,f,m,n);break;default:n=U(b,f,m,n)}G(n)||(n=[n]);f=0;for(m=n.length;f<m;f++){var h=n[f];e(h);h.isBindRequested=
d.isBindRequested;h.isGlobal=d.isGlobal;h.bindTarget=d.bindTarget;h.controller=b}return n}function w(b,d){var n=b.controller,e=n.rootElement,f=b.selector,m=b.eventName,h=b.handler,k=b.isBindRequested,p=b.isGlobal;b.bindTarget?(b.evSelectorType=Ja.SELECTOR_TYPE_OBJECT,W(b)):p?(n=j(f,d,n),k||!v(n)?(b.evSelectorType=Ja.SELECTOR_TYPE_OBJECT,b.bindTarget=v(n)?a(n):n,W(b)):(b.evSelectorType=Ja.SELECTOR_TYPE_GLOBAL,a(d).delegate(n,m,h)),b.evSelector=n):(b.evSelectorType=Ja.SELECTOR_TYPE_LOCAL,b.evSelector=
f,k?(b.bindTarget=a(f,e),W(b)):a(e).delegate(f,m,h));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),Ha&&m===Ba&&null!=c.settings.trackstartTouchAction&&(p?a(b.evSelector,d):a(b.evSelector,e)).each(function(){this.style[pa]=c.settings.trackstartTouchAction}))}function F(b,d,c){var n=b.controller,e=n.rootElement,f=b.selector,m=b.handler,h=b.eventName,k=b.isGlobal;if(b.bindTarget)d=b.bindTarget,e=b.eventName,f=b.handler,b.isNativeBind?d.removeEventListener(e,f):a(d).unbind(e,
f);else if(k){if(null==X(d))return;a(d).undelegate(f,h,m)}else a(e).undelegate(f,h,m);c||(c=n.__controllerContext.boundHandlers,c.splice(a.inArray(b,c),1))}function I(a,b){x(a,function(a){a.__controllerContext.executeListeners=b})}function g(a,b,d){return function(){var c=null,n=a[b],e=a.__name,f=!1,f="__init"===b?a.isInit:"__postInit"===b?a.isPostInit:a.isReady;if(!f&&n)try{c=a[b]({args:a.__controllerContext.args})}catch(m){ga(a,m)}c&&M(c.done)&&M(c.fail)?c.done(d).fail(function(){var b=ba(Cb,e,
Ka(arguments));ga(a.rootController,null,b)}):d()}}function ia(a,b){p(a)||x(a,function(d){var c,n;"__init"===b?(c=va(d),n=[d.preInitPromise],d.parentController&&n.push(d.parentController.initPromise)):"__postInit"===b?(c=Qa(d),n=Z(d)):(c=wa(d),n=J(d));var e=a.__controllerContext;e.waitingPromisesManagerMap=e.waitingPromsiesManager||{};e.waitingPromisesManagerMap[b]=S(n,g(d,b,c))})}function Z(a){var d=b(a,"postInitPromise");d.push(a.initPromise);return d}function J(a){var d=b(a,"readyPromise");d.push(a.postInitPromise);
return d}function va(b){return function(){function d(){var a=!0;x(b.rootController,function(b){return a=b.isInit});return a}if(!H(b))if(b.isInit)d()&&ta(b.rootController);else{b.isInit=!0;var c=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preInitDfd;delete b.__controllerContext.initDfd;var n=b.rootElement;try{var e=b.__meta,f=b.__controllerContext.childControllers,m;for(m in e)-1!==a.inArray(b[m],f)&&(b[m].__controllerContext.metaRootElement=
e[m]&&e[m].rootElement);t(b,function(a){var d=a.__controllerContext.metaRootElement;delete a.__controllerContext.metaRootElement;a.rootElement||(d=d?Q(d,a,b):n,A(d,a.__controllerContext.controllerDef,a.__name),a.rootElement=d,a.view.__controller=a)})}catch(h){ga(b,h);return}e=d();c.resolveWith(b);!H(b)&&e&&ta(b.rootController)}}}function Qa(b){return function(){if(!H(b)){b.isPostInit=!0;var c=b.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__postInit=
S(Z(b),function(){if(!H(b)){var n=c.postInitDfd;if(n&&(delete c.postInitDfd,n.resolveWith(b),!H(b)&&!c.isExecutedBind))if(c.isRoot){var n=b.__meta,e=c.childControllers,f;for(f in n)-1!==a.inArray(b[f],e)&&(b[f].__controllerContext.metaUseHandlers=n[f]&&n[f].useHandlers);x(b,function(a){var b=a.__controllerContext.metaUseHandlers;delete a.__controllerContext.metaUseHandlers;a.__controllerContext.isExecutedBind||(a.__controllerContext.isExecutedBind=!0,!1!==b&&d(a))});if(!1!==c.managed&&(a(b.rootElement).trigger("h5controllerbound",
b),H(b)))return;da(b)}else b.rootController.isPostInit&&((!b.parentController.__meta||!1!==b.parentController.__meta.userHandlers)&&d(b),da(b.rootController))}})}}}function wa(b){return function(){if(!H(b)){b.isReady=!0;var d=b.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__ready=S(J(b),function(){if(!H(b)){var c=d.readyDfd;c&&(delete d.readyDfd,c.resolveWith(b),!H(b)&&d.isRoot&&a(b.rootElement).trigger("h5controllerready",b))}})}}}function Ra(b,
d){if(!v(b))return a(b);var c=a.trim(b);return ub.test(c)?(c=a.trim(c.substring(1,c.length-1)),a(j(c,O(d.rootElement),d))):a(d.rootElement).find(b)}function U(a,b,d,c){return{controller:a,selector:b,eventName:d,handler:c}}function xa(a,b,d,c){return{controller:a,selector:b,eventName:typeof document.onmousewheel===ha?"DOMMouseScroll":d,handler:function(b){var d=b.event;null==d.wheelDelta&&d.originalEvent&&null!=d.originalEvent.wheelDelta&&(d.wheelDelta=d.originalEvent.wheelDelta);null==d.wheelDelta&&
d.originalEvent&&null!=d.originalEvent.detail&&(d.wheelDelta=40*-d.originalEvent.detail);c.call(a,b)}}}function N(b,d,c,n){function e(a,b){for(var d in a)a.hasOwnProperty(d)&&!b[d]&&"target"!==d&&"currentTarget"!==d&&"originalEvent"!==d&&"liveFired"!==d&&(b[d]=a[d]);b.h5DelegatingEvent=a}var f=typeof document.ontouchstart!==ha;if(c!==Ba)return U(b,d,c,function(b){var d=b.event.h5DelegatingEvent.type;if("mousemove"===d||"mouseup"===d){var d=b.event,c=a(d.currentTarget).offset()||{left:0,top:0};d.offsetX=
d.pageX-c.left;d.offsetY=d.pageY-c.top}n.apply(this,arguments)});var m=a(O(b.rootElement));return function(){function h(d,c,n){return function(f){var k;a:{switch(d){case "touchstart":case "mousedown":k=Ba;break a;case "touchmove":case "mousemove":k=Ia;break a;case "touchend":case "mouseup":k=za;break a}k=void 0}var Ya=k===Ba;if(!Ya||!g){var j=0===f.event.type.indexOf("touch");j&&hb(f.event,d);var C=new a.Event(k);e(f.event,C);var i=f.event.target;c&&(i=c);n&&n(C);var E=f.event.originalEvent||f.event;
Ya&&-1===a.inArray(E,Ca)&&(Ca=[],La=[]);var u=a.inArray(E,Ca);-1===u&&(u=Ca.push(E)-1,La[u]=!1);if(!La[u]&&(!j||g||Ya))La[u]=!0,a(i).trigger(C,f.evArg),g=!0;if(f.event.currentTarget===document&&(k===za&&(Ca=[],La=[]),-1!==a.inArray(E,Ca)))Ca.splice(u,1),La.splice(u,1);if(Ya&&g){C.h5DelegatingEvent.preventDefault();k=C.target;var eb=C.clientX,w=C.clientY,Sa=j?"touchmove":"mousemove",Ma=j?"touchend":"mouseup",$=h(Sa,k,function(a){var b=a.clientX,d=a.clientY;a.dx=b-eb;a.dy=d-w;eb=b;w=d}),l=h(Ma,k),H=
function(a){f.event=a;f.evArg=fa(arguments);$(f)},K=function(a){f.event=a;f.evArg=fa(arguments);l(f)},Fa=j?a(k):m;p=function(){Ca=[];La=[];Fa.unbind(Sa,H);Fa.unbind(Ma,K);if(!j&&b.rootElement!==document){a(b.rootElement).unbind(Sa,H);a(b.rootElement).unbind(Ma,K)}};Fa.bind(Sa,H);Fa.bind(Ma,K);!j&&b.rootElement!==document&&(a(b.rootElement).bind(Sa,H),a(b.rootElement).bind(Ma,K))}else k===za&&(p(),g=!1)}}}function k(a){return{controller:b,selector:d,eventName:a,handler:h(a)}}var p=null,g=!1,j=[U(b,
d,c,n)];f&&j.push(k("touchstart"));j.push(k("mousedown"));return j}()}function T(b){if("svg"!==b.tagName.toLowerCase()||Xa())return a(b).offset();var d=O(b).createElementNS(jb,"rect"),c=b.viewBox,n=c.baseVal.y;d.setAttribute("x",c.baseVal.x);d.setAttribute("y",n);d.setAttribute("width",1);d.setAttribute("height",1);l(d);b.appendChild(d);c=a(d).offset();b.removeChild(d);return c}function hb(a,b){var d=a.originalEvent;if(d){var c="touchend"===b||"touchcancel"===b?d.changedTouches[0]:d.touches[0],n=
c.pageX,e=c.pageY;a.pageX=d.pageX=n;a.pageY=d.pageY=e;a.screenX=d.screenX=c.screenX;a.screenY=d.screenY=c.screenY;a.clientX=d.clientX=c.clientX;a.clientY=d.clientY=c.clientY;c=a.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;c=T(c);e-=c.top;a.offsetX=d.offsetX=n-c.left;a.offsetY=d.offsetY=e}}function fa(a){return 3>a.length?a[1]:Ka(a).slice(1)}function R(a,b){var d=null,c=null;b&&(d=b[0],c=fa(b));var n=d;if(n&&null==n.offsetX&&null==n.offsetY&&
n.pageX&&n.pageY){var e=n.target;if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=T(e);n.offsetX=n.pageX-e.left;n.offsetY=n.pageY-e.top}return new i(a.controller,d,c,a.evSelector,a.evSelectorType)}function u(a){x(a,function(a){a.rootElement=null;a.view.__controller=null})}function Q(b,d,c){null==b&&e(Ta,[d.__name]);!v(b)&&"object"!==typeof b&&e(rb,[d.__name]);b=c?Ra(b,c):a(b);0===b.length&&e(n,[d.__name]);1<b.length&&e(C,[d.__name]);return b.get(0)}
function da(b){var d=b.__controllerContext.managed,c=Da.controllers;-1===a.inArray(b,c)&&!1!==d&&c.push(b);b.__controllerContext.triggerReadyExecuted=!0;ia(b,"__ready")}function B(a,b){!1===b?ia(a,"__init"):setTimeout(function(){!H(a)&&a.__controllerContext.isRoot&&ia(a,"__init")},0)}function ta(a){a.__controllerContext.triggerPostInitExecuted=!0;ia(a,"__postInit")}function kb(a,b){x(a,function(a){var d=qa();d.resolve();var c=a.__controllerContext;c.templatePromise=d.promise();c.initDfd=qa();c.postInitDfd=
qa();c.readyDfd=qa();c.isUnbinding=!1;c.isUnbinded=!1;c.isExecutedBind=!1;c.triggerPostInitExecuted=!1;c.triggerReadyExecuted=!1;c.args=b;a.initPromise=c.initDfd.promise();a.postInitPromise=c.postInitDfd.promise();a.readyPromise=c.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=!1})}function Za(b,d){var n=null,e=d;a.isPlainObject(e)?n=e.target:e={};n=n?Ra(n,b):b.rootElement;return c.ui.indicator.call(b,n,e)}function ka(a,b){var d=[],c=null;k(a,function(a){if(a[b]&&M(a[b])){try{var n=a[b]()}catch(e){c=
c||e}vb(n)&&d.push(n)}});if(c)throw c;return d}function ga(a,b,d){function c(){var a=b||d||h||C;k(e,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var d in b)b.hasOwnProperty(d)&&(b[d]=null)});C?j.rejectWith(e,[C]):j.resolveWith(e);if(a&&(Da.dispatchEvent({type:"lifecycleerror",detail:a,rootController:e}),b||h))throw b||h;}function n(){C=h||ba(Db,e.__name,Ka(arguments));c()}var e=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);
if(e){if(!p(e)){e.__controllerContext.isDisposing=1;try{$a(e,d||b)}catch(f){b=b||f}var m,h=null;try{m=ka(e,"__dispose")}catch(g){b=b||g,h=h||g}var j=e.deferred(),C=null;h?n():S(m,c,n,!0);return j.promise()}}else if(b)throw b;}function $a(b,d){if(!H(b)){b.__controllerContext.isUnbinding=1;ja(b,d);var c;try{ka(b,"__unbind")}catch(n){c=n}x(b,function(a){var b=a.rootElement;if(b){for(var b=O(b),d=a.__controllerContext.boundHandlers,c=0,n=d.length;c<n;c++)F(d[c],b,!0);a.__controllerContext.boundHandlers=
[]}});b.__controllerContext.unbindList={};Da.controllers=a.grep(Da.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);u(b);b.__controllerContext.isUnbinded=1;if(c)throw c;}}function ma(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?ma(a,b.parentController):c.core.view}function la(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function p(a){return la(a)||a.__controllerContext.isDisposing}
function H(a){a=a.__controllerContext&&a.__controllerContext.isRoot?a:a.rootController;return!a||la(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function ja(a,b){var d=["postInitDfd","readyDfd"],c=[];x(a,function(a){c.push(a);var d=a.__controllerContext.initDfd;d&&!Na(d)&&!ua(d)&&d.rejectWith(a,[b])});for(var n=0,e=d.length;n<e;n++)for(var f=d[n],m=c.length-1;0<=m;m--){var h=c[m],k=h.__controllerContext[f];k&&!Na(k)&&!ua(k)&&k.rejectWith(h,[b])}}function Ea(a,b){for(var d=
a.childNodes,c=0,n=d.length;c<n;c++){var e=d[c];if(1===e.nodeType){if(e=Ea(e,b))return e}else if(8===e.nodeType){var f=e.nodeValue;if(0===f.indexOf(ra)){var m=f.indexOf("}");if(-1!==m&&(f=f.slice(0,m).match(/id="([A-Za-z][\w-:\.]*)"/))&&f[1]===b)return e}}}return null}function ab(a){var b=this;return function(){return a.apply(b,arguments)}}function m(a){var b=this;return function(){var d=c.u.obj.argsToArray(arguments);d.unshift(this);return a.apply(b,d)}}function E(a,b,d){function n(f){c.u.obj.getByPath("h5.core.view")||
e(Eb);d=G(d)?d:[d];for(var m=[],h=0,k=d.length;h<k;h++){var p=Oa(d[h])?d[h]:c.res.dependsOn(d[h]);m.push(p.resolve("ejsfile"))}S(m,function(d){for(var d=G(d)?d:[d],c=0,n=d.length;c<n;c++)for(var e=d[c].templates,f=0,m=e.length;f<m;f++)try{a.view.__view.register(e[f].id,e[f].content)}catch(h){b.reject(h)}b.resolve()},function(a){var d=a.detail.error.status;f===c.settings.dynamicLoading.retryCount||0!==d&&d!==qb?setTimeout(function(){b.reject(a)},0):setTimeout(function(){n(++f)},c.settings.dynamicLoading.retryInterval)})}
n(0)}function $(b,d,c,n){var f=v(b),m=f?null:b,b=f?a.trim(b):null,d=a.trim(d),h=!f||ub.test(b),k=Pa.test(d);k&&(d=a.trim(a.trim(d.substring(1,d.length-1))));f&&h&&(b=a.trim(b.substring(1,b.length-1)),"this"===b&&e(Fb,[c.__name],{controllerDef:c}));return{selector:b,bindTarget:m,isGlobal:h,isBindRequested:k,eventName:d,propertyKey:n}}function K(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=
[]}function lb(b){var d=new K,c=d.logicProperties,n=d.eventHandlerProperties,f=d.functionProperties,m=d.otherProperties,h=d.bindMap,k=d.childControllerProperties,p={},g;for(g in b)if(-1!==g.indexOf(" ")&&M(b[g])){n.push(g);var j=a.trim(g),C=j.lastIndexOf(" "),j=$(j.substring(0,C),j.substring(C+1,j.length),b,g),C=j.selector,i=j.eventName,u=j.isGlobal,E=j.isBindRequested;p[C]||(p[C]={});p[C][i]||(p[C][i]={});p[C][i][u]||(p[C][i][u]={});p[C][i][u][E]?e(Gb,[b.__name,C,i],{controllerDef:b}):p[C][i][u][E]=
1;h[g]=j}else Ua(g,Aa)&&b[g]&&!M(b[g])?k.push(g):Ua(g,ib)&&b[g]&&!M(b[g])?c.push(g):M(b[g])?f.push(g):m.push(g);return d}function mb(){this.logicProperties=[];this.functionProperties=[]}function nb(a){var b=new mb,d=b.functionProperties,c=b.logicProperties,n;for(n in a)a.hasOwnProperty(n)&&Ua(n,ib)?c.push(n):M(a[n])&&d.push(n);return b}function bb(b,d){function c(b,d,n){d=d.__logicContext.waitingPromises=d.__logicContext.waitingPromises||[];-1===a.inArray(b,d)&&(d.push(b),b.done(n))}function n(f){function m(){if(!f.__logicContext.isCalledReady){var n=
!0;D(f,function(a){return n=a.__logicContext.isReady});if(n){var h=M(f.__ready)&&f.__ready();f.__logicContext.isCalledReady=!0;vb(h)?(e.push(h),h.done(function(){f.__logicContext.isReady=!0;e.splice(a.inArray(h,e),1);f.__logicContext.waitingPromises=null;f===b&&d.resolveWith(f)})):(f.__logicContext.isReady=!0,f.__logicContext.waitingPromises=null,f===b&&d.resolveWith(f))}else for(var k=0,p=e.length;k<p;k++)c(e[k],f,m)}}f.__logicContext.isReady=!1;f.__logicContext.isCalledReady=!1;D(f,n);m()}var e=
[];n(b)}function cb(a,b){if(a===b)return!0;var d=na(a),c=na(b);if(!d&&!c)return!1;d=d?a.toArray():[a];c=c?b.toArray():[b];if(d.length!==c.length)return!1;for(var n=0,e=d.length;n<e;n++)if(d[n]!==c[n])return!1;return!0}function V(a,b){(!a||!a.rootElement)&&e(Hb,b)}function aa(a,b){(!a||la(a))&&e(Ib,b)}function W(b){var d=b.bindTarget,c=b.eventName,n=b.handler;d&&typeof d.nodeType!==ha||pb(d)||na(d)?a(d).bind(c,n):!d||!d.addEventListener?b.isBindCanceled=!0:(d.addEventListener(c,n),b.isNativeBind=!0)}
function Jb(a,b){b.parentController=a;a.__controllerContext.childControllers.push(b);b.__controllerContext.isRoot=!1;if(a.__controllerContext.isExecutedConstruct){var d=a.rootController;x(b,function(a){a.rootController=d})}}function ca(a){this.__controller=a;c.u.obj.getByPath("h5.core.view")&&(this.__view=c.core.view.createView())}function Va(a,b,d,n,e){this.__name=b;this.__templates=null;this.rootElement=a;this.__controllerContext={executeListeners:!0,isRoot:e,boundHandlers:[],controllerDef:d};this.__controllerContext.args=
n?n:null;this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=c.log.createLogger(b);this.view=new ca(this)}function oa(){this.rootElement=document;this.controllers=[];a(document).bind(wb,function(a,b){null==b.target&&(b.target=document);b.indicator=Za(this,b);a.stopPropagation()})}function xb(){this._init()}function db(b,d,c,n){var f=!n||!n.isInternal;if(!f&&la(n.rootController))return null;
var m=d.__name;(!v(m)||0===a.trim(m).length)&&!Oa(d)&&e(Ma,null,{controllerDefObj:d});c&&!a.isPlainObject(c)&&e(Fa,[m],{controllerDefObj:d});d.__controllerContext&&e(eb,null,{controllerDefObj:d});var h=ya.get(m);h||y(f,b,d,c,m);f&&s(d,m);h||(h=lb(d),ya.register(m,h));f&&A(b,d,m);var k=new Va(b?a(b).get(0):null,m,d,c,f),g=f?k:n.rootController,j=qa(),m=j.promise().fail(fb),C=qa(),i=C.promise().fail(fb),u=qa(),w=u.promise().fail(fb),$=qa(),H=$.promise(),l=n&&n.async;!1===l&&(j.resolve(),C.resolve(),
u.resolve(),$.resolve());f||H.fail(fb);b=k.__controllerContext;b.cache=h;b.preInitDfd=j;b.initDfd=C;b.postInitDfd=u;b.readyDfd=$;k.preInitPromise=m;k.initPromise=i;k.postInitPromise=w;k.readyPromise=H;b.childControllers=[];for(var K=f?[]:n.promisesForTriggerInit,C=0,i=h.logicProperties.length;C<i;C++)u=h.logicProperties[C],m=d[u],Oa(m)?(w=m.resolve("namespace"),K.push(w),w.done(function(b,d){return function(c){c=ob(c);k[b]=c;K.splice(a.inArray(d,K),1);K.push(c.readyPromise);c.readyPromise.done(function(b){return function(){K.splice(a.inArray(b,
K),1)}}(c.readyPromise))}}(u,w))):k[u]=ob(m);m=a.extend(!0,{},d);d=d.__templates;C=qa();i=C.promise();Oa(d)||d&&0<d.length?E(k,C,d):C.resolve();i.done(function(){p(k)||j.resolveWith(k)}).fail(function(a){j.rejectWith(k,[a]);ga(k,null,a)});C=0;for(i=h.eventHandlerProperties.length;C<i;C++)u=h.eventHandlerProperties[C],k[u]=r(m,u,!0);C=0;for(i=h.functionProperties.length;C<i;C++)u=h.functionProperties[C],k[u]=r(m,u);C=0;for(i=h.otherProperties.length;C<i;C++)u=h.otherProperties[C],k[u]=m[u];b.managed=
n&&n.managed;try{if(k.__construct&&k.__construct({args:k.__controllerContext.args}),p(k))return null}catch(ja){return ga(g,ja),null}f?(k.rootController=k,k.parentController=null):(k.parentController=n.parentController,k.rootController=n.rootController);if(k.__controllerContext.childControllers){C=0;n=k.__controllerContext.childControllers;for(i=n.length;C<i;C++)n[C].rootController=k.rootController}k.__controllerContext.isExecutedConstruct=!0;C=0;for(i=h.childControllerProperties.length;C<i;C++)if(u=
h.childControllerProperties[C],n=m[u],Oa(n))w=n.resolve("namespace"),K.push(w),w.done(function(b,d){return function(n){n=db(null,a.extend(true,{},n),c,{isInternal:true,parentController:k,rootController:g,promisesForTriggerInit:K,async:l});if(n==null)return null;k[b]=n;k.__controllerContext.childControllers.push(n);K.splice(a.inArray(d,K),1)}}(u,w));else{n=db(null,a.extend(!0,{},m[u]),c,{isInternal:!0,parentController:k,rootController:g});if(null==n)return null;k.__controllerContext.childControllers.push(n);
k[u]=n}if(f){var Q=function(){K.length===0?B(k,l):S(K,Q)};S(K,Q)}return k}function ob(b){function d(b,n){var f=b.__name;(!v(f)||0===a.trim(f).length)&&e(Kb,null,{logicDefObj:b});b.__logicContext&&e(Lb,null,{logicDefObj:b});var h=ya.get(f);h||(n&&o(b),h=nb(b));for(var p=a.extend(!0,{},b),C=h.functionProperties,g=0,j=C.length;g<j;g++){var u=C[g];p[u]=r(p,u)}p.deferred=qa;p.log=c.log.createLogger(f);p.__logicContext={logicDef:b};p.own=ab;p.ownWithOrg=m;ya.register(f,h);M(p.__construct)&&p.__construct();
f=h.logicProperties;g=0;for(j=f.length;g<j;g++)u=f[g],h=p[u],Oa(h)?(h=h.resolve(),k.push(h),h.done(function(b,c){return function(n){p[b]=d(n);k.splice(a.inArray(c,k),1)}}(u,h))):p[u]=d(h);return p}function n(){0===k.length?bb(p,f):S(k,n)}var f=c.async.deferred(),h=f.promise(),k=[],p=d(b,!0);p.readyPromise=h;S(k,n);return p}var jb="http://www.w3.org/2000/svg",Ja={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},Aa="Controller",ib="Logic",Ba="h5trackstart",Ia="h5trackmove",za="h5trackend",
sa="rootElement",wb="triggerIndicator",ub=/^\{.*\}$/,Pa=/^\[.*\]$/,ra="{h5view ",Ta=6001,n=6003,C=6004,Ma=6006,Fa=6007,eb=6008,Ab=6009,Bb=6010,zb=6011,Fb=6012,Gb=6013,Kb=6017,Lb=6018,Eb=6029,rb=6030,Cb=6033,sb=6034,Hb=6035,Ib=6036,Db=6038,qa=c.async.deferred,vb=c.async.isPromise,tb=c.u.str.startsWith,Ua=c.u.str.endsWith,Ga=c.u.str.format,Ka=c.u.obj.argsToArray,na=c.u.obj.isJQueryObject,Oa=c.res.isDependency,fb=function(){},Da,ya,Ca=[],La=[],pa="",Ha=function(){var a=document.createElement("div");
return typeof a.style.touchAction!==ha?(pa="touchAction",!0):typeof a.style.msTouchAction!==ha?(pa="msTouchAction",!0):!1}(),Xa=function(){var b=null;return function(){if(null!=b)return b;var d=document.createElementNS(jb,"svg");d.setAttribute("width",1);d.setAttribute("height",1);var c=document.createElementNS(jb,"rect");c.setAttribute("x",1);c.setAttribute("y",1);c.setAttribute("width",1);c.setAttribute("height",1);l(c);a(function(){document.body.appendChild(d);var a=d.getBoundingClientRect().top;
d.appendChild(c);b=a===d.getBoundingClientRect().top;document.body.removeChild(d)});return b}}();a.extend(i.prototype,Ja);a.extend(ca.prototype,{get:function(a,b){V(this.__controller,"view#get");return ma(a,this.__controller).get(a,b)},update:function(a,b,d){V(this.__controller,"view#update");a=Ra(a,this.__controller);return ma(b,this.__controller).update(a,b,d)},append:function(a,b,d){V(this.__controller,"view#append");a=Ra(a,this.__controller);return ma(b,this.__controller).append(a,b,d)},prepend:function(a,
b,d){V(this.__controller,"view#prepend");a=Ra(a,this.__controller);return ma(b,this.__controller).prepend(a,b,d)},load:function(a){V(this.__controller,"view#load");return this.__view.load(a)},register:function(a,b){V(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){V(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){V(this.__controller,"view#isAvailable");return ma(a,this.__controller).isAvailable(a)},clear:function(a){V(this.__controller,
"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){V(this.__controller,"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},bind:function(b,d){V(this.__controller,"view#bind");var c=b;if(v(b)&&0===b.indexOf("h5view#")){for(var n=Ea(this.__controller.rootElement,b.slice(7)),c=n.nodeValue,c=c.slice(c.indexOf("}")+1),e=a("<div>").append(c),c=[],f=e[0].childNodes,m=0,h=f.length;m<h;m++)c.push(f[m]);e.empty();e=document.createDocumentFragment();m=0;for(h=c.length;m<
h;m++)e.appendChild(c[m]);n.parentNode.insertBefore(e,n.nextSibling)}return this.__view.bind(c,d)}});a.extend(Va.prototype,{$find:function(b){aa(this,"$find");V(this,"$find");return a(this.rootElement).find(b)},deferred:function(){aa(this,"deferred");return qa()},trigger:function(b,d){aa(this,"trigger");V(this,"trigger");var c=v(b)?a.Event(b):b;a(this.rootElement).trigger(c,d);return c},own:function(){aa(this,"own");return ab.apply(this,Ka(arguments))},ownWithOrg:function(){aa(this,"ownWithOrg");
return m.apply(this,Ka(arguments))},bind:function(a,b){aa(this,"bind");this.__controllerContext.isRoot||e(6031);this.rootElement=Q(a,this);this.view.__controller=this;kb(this,b?b:null);B(this);return this},unbind:function(){aa(this,"unbind");V(this,"unbind");this.__controllerContext.isRoot||e(6031);this.__controllerContext.isExecutedConstruct||e(6037);try{$a(this)}catch(a){ga(this,a)}},dispose:function(){aa(this,"dispose");this.__controllerContext.isRoot||e(6031);return ga(this)},triggerIndicator:function(b){aa(this,
"triggerIndicator");V(this,"triggerIndicator");var d={indicator:null};b&&a.extend(d,b);a(this.rootElement).trigger(wb,[d]);return d.indicator},indicator:function(a){aa(this,"indicator");V(this,"indicator");return Za(this,a)},enableListeners:function(){aa(this,"enableListeners");I(this,!0)},disableListeners:function(){aa(this,"disableListeners");I(this,!1)},throwError:function(a,b){aa(this,"throwError");var d=Ka(arguments);d.unshift(null);this.throwCustomError.apply(this,d)},throwCustomError:function(a,
b,d){aa(this,"throwCustomError");2>arguments.length&&e(6005);var c=null;b&&v(b)?c=Error(Ga.apply(null,Ka(arguments).slice(1))):(c=Error(),c.detail=b);c.customType=a;throw c;},on:function(a,b,d){aa(this,"on");V(this,"on");a=$(a,b,this);d=h(this,a,d);a=0;for(b=d.length;a<b;a++)w(d[a],O(this.rootElement))},off:function(a,b,d){aa(this,"off");V(this,"off");for(var c=$(a,b,this),a=this.__controllerContext.boundHandlers,n=null,e=c.bindTarget,b=c.eventName,f=c.selector,m=c.isGlobal,c=c.isBindRequested,h=
0,k=a.length;h<k;h++){var p=a[h];if(e){if(cb(e,p.bindTarget)&&b===p.eventName&&p.originalHandler===d){n=p;break}}else if(f===p.selector&&m===p.isGlobal&&c===p.isBindRequested&&d===p.originalHandler){n=p;break}}n&&F(n,O(this.rootElement))},manageChild:function(b){aa(this,"manageChild");if(H(this))e(6041);else if(!b||!b.__controllerContext)e(6039);else if(H(b))e(6040);else{b.rootController!==b&&e(6042);Jb(this,b);var d=Da.controllers,b=a.inArray(b,d);-1!=b&&d.splice(b,1)}},unmanageChild:function(b,
d){aa(this,"unmanageChild");if(H(this))e(6043);else if(b.parentController!==this)e(6044);else if(d=!1===d?!1:!0,!d&&!b.rootElement)e(6045);else{b.parentController=null;b.rootController=b;b.__controllerContext.isRoot=!0;var c=this.__controllerContext.childControllers,n=a.inArray(b,c);-1!==n&&c.splice(n,1);d?b.dispose():(Da.controllers.push(b),c=this.__controllerContext.waitingPromisesManagerMap,n=b.__controllerContext.waitingPromisesManagerMap,c&&(c.__postInit&&c.__postInit.remove(b.postInitPromise),
c.__ready&&c.__ready.remove(b.readyPromise)),n&&n.__init&&n.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?this.rootController.__controllerContext.triggerReadyInitExecuted||da(b):ta(b))}}});c.mixin.eventDispatcher.mix(oa.prototype);a.extend(oa.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,d){for(var c=d&&d.deep,n=d&&d.name?P(d.name):null,e=a(b)[0],f=this.controllers,m=[],h=0,k=f.length;h<k;h++){var p=f[h];
!(n&&-1===a.inArray(p.__name,n))&&p.rootElement&&(e===p.rootElement?m.push(p):c&&O(e)===O(p.rootElement)&&a.contains(e,p.rootElement)&&m.push(p))}return m}});a.extend(xb.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});ya=new xb;Da=new oa;c.u.obj.expose("h5.core",{controllerManager:Da,definitionCacheManager:{clear:function(a){ya.clear(a)},
clearAll:function(){ya.clearAll()}}});var gb=function(){var a={},b=new Va(null,"a"),d;for(d in b)b.hasOwnProperty(d)&&"__name"!==d&&"__templates"!==d&&"__meta"!==d&&(a[d]=1);b=Va.prototype;for(d in b)b.hasOwnProperty(d)&&(a[d]=null);return a}();ea.controllerInternal=db;ea.controllerConstructor=Va;ea.isDisposing=p;c.u.obj.expose("h5.core",{controller:function(a,b,d){2>arguments.length&&e(6032);return db(a,b,d)},logic:ob,expose:function(a){var b=a.__name;b||e(6019,null,{target:a});var d=b.lastIndexOf(".");
if(-1===d)window[b]=a;else{var n=b.substr(0,d),b=b.substr(d+1,b.length),d={};d[b]=a;c.u.obj.expose(n,d)}},childFrom:function(a){return new f(a)}})})();(function(){function l(a){return a instanceof Date}function y(a){return function(b){for(var d=a.queries,c=0,e=d.length;c<e;c++){var f=d[c],j=f.compareFunction;if(!j(b[f.prop],f.queryValue))return!1}d=a.userFunctions;c=0;for(e=d.length;c<e;c++)if(!d[c](b))return!1;d=a.nestedCriterias;c=0;for(e=d.length;c<e;c++)if(!d[c].match(b))return!1;return!0}}function s(a){return function(b){for(var d=
a.queries,c=0,e=d.length;c<e;c++){var f=d[c],j=f.compareFunction;if(j(b[f.prop],f.queryValue))return!0}d=a.userFunctions;c=0;for(e=d;c<e;c++)if(!d[c](b))return!0;d=a.nestedCriterias;c=0;for(e=d.length;c<e;c++)if(d[c].match(b))return!0;return!1}}function o(c){var b=c._criteria.match,d=c.result;return function(e){for(var f=e.removed,j=e.created,e=e.changed,i=!0,g=0,l=f.length;g<l;g++){var o=a.inArray(f[g],d._src);-1!==o&&d.splice(o,1)}g=0;for(l=e.length;g<l;g++)o=a.inArray(e[g].target,d._src),i=!1,
b(e[g].target.get())?-1===o&&d.push(e[g].target):-1!==o&&d.splice(o,1);g=0;for(l=j.length;g<l;g++)b(j[g].get())&&(i=!1,d.push(j[g]));c._compareFunction&&!i&&d.sort(c._compareFunction)}}function A(c){var b=[],d=[],f=[],i={queries:b,nestedCriterias:d,userFunctions:f},o;for(o in c)if(o!==r)if(a.isPlainObject(c[o]))d.push(A(c[o]));else if(M(c[o]))f.push(c[o]);else{var q=c[o],g=G(q)?q[0]:q,x=null,x=g instanceof RegExp?j:l(g)?t:z,v=a.trim(o.replace(/ +/g," ")).split(" "),J=v[1]||"=";(x=x[J])||e(D,[J,a.type(g)]);
b.push({prop:v[0],queryValue:q,compareFunction:x})}i.match="or"===c[r]?s(i):y(i);return i}function f(a){return function(b,d){var c=b.get(a),e=d.get(a);return c>e?1:c<e?-1:0}}function i(a){return function(b,d){var c=b.get(a),e=d.get(a);return c>e?-1:c<e?1:0}}function q(a){this.result=c.core.data.createObservableArray();this._model=a;this._isLive=!1}var r="__op",z={"=":function(a,b){return a===b},"!=":function(a,b){return a!==b},"<":function(a,b){return a<b},">":function(a,b){return a>b},"<=":function(a,
b){return a<=b},">=":function(a,b){return a>=b},between:function(a,b){var d=b[1];return b[0]<=a&&a<=d},"!between":function(a,b){var d=b[1];return a<b[0]||d<a},"in":function(c,b){return-1!==a.inArray(c,b)},"!in":function(c,b){return-1===a.inArray(c,b)}},j={"=":function(a,b){return b.test(a)},"!=":function(a,b){return!b.test(a)}},t={"=":function(a,b){return!l(a)?!1:a.getTime()===b.getTime()},"!=":function(a,b){return!l(a)?!0:a.getTime()!==b.getTime()},"<":function(a,b){return!l(a)?!1:a.getTime()<b.getTime()},
">":function(a,b){return!l(a)?!1:a.getTime()>b.getTime()},"<=":function(a,b){return!l(a)?!1:a.getTime()<=b.getTime()},">=":function(a,b){return!l(a)?!1:a.getTime()>=b.getTime()},between:function(a,b){if(!l(a))return!1;var d=b[0].getTime(),c=b[1].getTime(),e=a.getTime();return d<=e&&e<=c},"!between":function(a,b){if(!l(a))return!1;var d=b[0].getTime(),c=b[1].getTime(),e=a.getTime();return e<d||c<e},"in":function(a,b){if(!l(a))return!1;for(var d=a.getTime(),c=0,e=b.length;c<e;c++)if(d===b[c].getTime())return!0;
return!1},"!in":function(a,b){if(!l(a))return!0;for(var d=a.getTime(),c=0,e=b.length;c<e;c++)if(d===b[c].getTime())return!1;return!0}},D=1,x={};x[D]='演算子"{0}"で"{1}"型の値を比較することはできません';x[2]="ORDER BY句の指定が不正です。指定されたキー({0})は存在しません";x[3]='ORDER BY句の指定が不正です。指定されたorder句:{0} "key名 ASC"または"key名 DESC"またはソート関数を指定してください';yb(x);a.extend(q.prototype,{setCriteria:function(a){this._criteria=A(a);this._isLive&&this.execute();return this},execute:function(){this._executeDfd=c.async.deferred();var a=this.result;a.copyFrom(null);
for(var b in this._model.items){var d=this._model.items[b];this._criteria.match(d.get())&&a.push(d)}this._compareFunction&&a.sort(this._compareFunction);this._executeDfd.resolveWith(this,[a]);return this},onQueryComplete:function(a){this._executeDfd.done(a);return this},setLive:function(){if(!this._isLive)return this._listener=this._listener||o(this),this._model.addEventListener("itemsChange",this._listener),this._isLive=!0,this},unsetLive:function(){if(this._isLive)return this._model.removeEventListener("itemsChange",
this._listener),this._isLive=!1,this},orderBy:function(c){if(M(c))return this._compareFunction=c,this.result.sort(this._compareFunction),this;(!c||!v(c))&&e(3,[c]);var b=c.split(" "),d=a.trim(b[0]);this._model.schema.hasOwnProperty(d)||e(2,[this._model.name,d]);b=b[1]?a.trim(b[1].toUpperCase()):"ASC";"DESC"===b?this._compareFunction=i(d):"ASC"===b?this._compareFunction=f(d):e(3,[c]);this._isLive&&this.result.sort(this._compareFunction);return this}});Pa={createQuery:function(){return new q(this)}}})();
(function(){function l(a){return(a=a&&v(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function y(b,d){return function Fa(b,c){if(!d[b])return!1;for(var n=0,e=d[b].length;n<e;n++)if(-1<a.inArray(d[b][n],c)||Fa(d[b][n],c.concat([b])))return!0;return!1}(b,[])}function s(a){return"number"===typeof a&&isNaN(a)}function o(a,b){return null==a||s(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(v(a)||a instanceof
String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function A(a,b){return null==a||"number"===typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function f(b,d,c){function f(){m.push(k.call(this,arguments));if(c)throw null;}var m=[];try{if(!a.isPlainObject(b))throw f(ka),null;oa(b.name)||f(ga);var h=b.base,g=null;if(null!=h)if(!v(h)||0!==h.indexOf("@"))f($a);else{var j=h.substring(1);d.models[j]?
g=d.models[j].schema:f(ma,j)}var i=b.schema;!g&&null==i&&f(la);if(!g&&!a.isPlainObject(i))throw f(p),null;}catch(u){e(R,null,m)}}function i(b,d,c,f){function h(){p.push(k.call(this,arguments));if(f)throw null;}"object"!==typeof b&&e(Q);var p=[];try{if(d){var g=!1,j;for(j in b)b[j]&&!0===b[j].id&&(g&&h(H),g=!0);g||h(ja)}var i={},g=function(a){if(null!=a){r&&h(ab,B);q.hasOwnProperty("defaultValue")&&h(na,B);if(null==a.on)h(m,B);else for(var d=P(a.on),c=0,e=d.length;c<e;c++)if(!b.hasOwnProperty(d[c])){h(m,
B);break}"function"!==typeof a.calc&&h(E,B);i[B]=P(a.on)}};j=function(a){r&&null==a&&(a="string");var b={};null!=a&&(v(a)?(r&&"string"!==a&&"integer"!==a&&h(Ja,B),b=l(a),b.elmType?(b.dataModel&&(d||h(K,B,b.dataModel),c.models[b.dataModel]||h(lb,B,b.dataModel)),"enum"===b.elmType&&null==q.enumValue&&h(mb,B)):h(K,B,a)):h($,B))};var u=function(b,d){if(null!=b)if(a.isPlainObject(b)){for(var c in b){var n=b[c];if(null!=n)switch(c){case "notNull":!0!==n&&!1!==n?h(bb,B,c):r&&!n&&h(ca,B,c,n);break;case "min":case "max":switch(d.elmType){case "integer":(v(n)||
!A(n)||s(n))&&h(cb,B,c);break;case "number":(v(n)||v(n)||!o(n)||Infinity===n||-Infinity===n||s(n))&&h(cb,B,c);break;default:h(V,B,c,d.elmType)}break;case "minLength":case "maxLength":switch(d.elmType){case "string":v(n)||!A(n)||s(n)||0>n?h(X,B,c):r&&"maxLength"===c&&0===n&&h(ca,B,c,n);break;default:h(V,B,c,d.elmType)}break;case "notEmpty":switch(d.elmType){case "string":!0!==n&&!1!==n?h(bb,B,c):r&&!n&&h(ca,B,c,n);break;default:h(V,B,c,d.elmType)}break;case "pattern":switch(d.elmType){case "string":"regexp"!==
a.type(n)&&h(aa,B,c);break;default:h(V,B,c,d.elmType)}}}b.notEmpty&&0===b.maxLength&&h(W,B,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&h(W,B,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&h(W,B,"minLength","maxLength")}else h(nb,B)},w=function(b,d){null!=b&&("enum"!==d.elmType&&h(ba,B),(!G(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&h(S,B))},B;for(B in b){var q=null==b[B]?{}:b[B],r=d&&!!q.id;oa(B)||h(Ea,B);g(q.depend);j(q.type);
var t={},F=r&&null==F?"string":q.type;v(F)&&(t=l(F));u(q.constraint,t);w(q.enumValue,t);r&&q.hasOwnProperty("defaultValue")&&h(Y,B)}for(var ta in i)y(ta,i)&&h(pa,ta)}catch(z){e(da,null,p)}return!0}function q(a,b){var d=[];try{for(var c in a){var f=a[c];if(f&&(f.hasOwnProperty("defaultValue")||!f.type||!("array"===f.type||l(f.type).dimension))&&f.hasOwnProperty("defaultValue")){var m=f.defaultValue;b[c](m).length&&pushErrorReason(ea,c,m)}}return!0}catch(h){e(da,null,d)}}function r(a,b,d){var c={},
e;for(e in a){var f=c,m=e,h;h=d;var p=a[e]||{},g=[],i=null,u=0,i=p.type,k=p.constraint||{};b&&p.id&&(i=i||"string",k.notNull=!0,"string"===i&&(k.notEmpty=!0));i&&(u=l(i),i=u.elmType,u=u.dimension,g.push(j(i,{manager:h,enumValue:p.enumValue})));k&&g.push(z(k));h=t({checkFuncs:g,dimension:u});f[m]=h}return c}function z(a){return function(b){var d=[];a.notNull&&null==b&&d.push({notNull:a.notNull});a.notEmpty&&!b&&d.push({notEmpty:a.notEmpty});if(null==b)return d;null!=a.min&&b<a.min&&d.push({min:a.min});
null!=a.max&&a.max<b&&d.push({max:a.max});null!=a.minLength&&b.length<a.minLength&&d.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&d.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&d.push({pattern:a.pattern});return d}}function j(b,d){var c=[{type:b}];switch(b){case "number":return function(a,b){return o(a,b)?[]:c};case "integer":return function(a,b){return A(a,b)?[]:c};case "string":return function(a,b){return null==a||v(a)||!b&&a instanceof String?[]:
c};case "boolean":return function(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:c};case "enum":return function(b){var e;a:if(e=d.enumValue,s(b)){for(var b=0,n=e.length;b<n;b++)if(s(e[b])){e=!0;break a}e=!1}else e=null===b||-1<a.inArray(b,e);return e?[]:c};case "any":return function(){return[]}}var e=b.match(/^@(.+?)$/)[1],f=d.manager;return function(a){var b=f.models[e];return!b||"object"!==typeof a&&null!=a?c:null==a||b.has(a)?[]:c}}function t(a){var b=a.checkFuncs;if(!b||
0===b.length)return function(){return[]};var d=a.dimension||0;return function(a,e){function n(a,m){if(!m){for(var h=0,p=b.length;h<p;h++){var g=b[h](a,e);if(g.length)return f=f.concat(g),!1}return!0}if(null==a)return!0;if(!G(a)&&!c.core.data.isObservableArray(a))return f.push({dimension:d}),!1;h=0;for(p=a.length;h<p;h++)if(!n(a[h],m-1))return!1;return!0}var f=[];n(a,d);return f}}function D(a,b){a._values={};a._nullProps={};for(var d in b)if(b[d]&&x(b[d].type)){var c=xa();c.relatedItem=a;a._values[d]=
c;a._nullProps[d]=!0}}function x(a){return!a?!1:-1!==a.indexOf("[]")}function k(){return{code:arguments[0]}}function b(b,d,c,f){function m(d){for(var d=P(g[d].depend.on),c=0,e=d.length;c<e;c++)if(-1===a.inArray(d[c],b._realProperty)&&-1!==a.inArray(d[c],p))return!1;return!0}function h(b,d){for(var c=0,e=d.length;c<e;c++){var n=j[d[c]];if(n)for(var f=0,m=n.length;f<m;f++){var p=n[f];-1===a.inArray(p,b)&&b.push(p)}}}var p=[],g=b.schema||b._model.schema,j=b._dependencyMap,i={};for(f?p=b._dependProps.slice():
h(p,P(c));0!==p.length;){for(var c=[],f=0,u=p.length;f<u;f++){var k=p[f];if(m(k)){var E=g[k].depend.calc.call(b,d);0!==b._validateItemValue(k,E,!0).length&&e(Za,[b._model?b._model.name:Aa,k,E]);i[k]={oldValue:b._values[k],newValue:E};g[k]&&x(g[k].type)?E?(b._values[k].copyFrom(E),b._nullProps[k]=!1):(b._values[k].copyFrom([]),b._nullProps[k]=!0):b._values[k]=E}else c.push(k)}h(c,p);p=c}return i}function d(a,b,d,c){for(var f in d){f in a||e(kb,[c?c.name:Aa,f]);var m=d[f];if(!a[f]||!x(a[f].type)||d.hasOwnProperty(f))m=
b(f,m,c&&c._idKey===f),0<m.length&&e(B,[c?c.name:Aa,f],m)}}function h(d,f,m,h){var p=d.schema||d._model.schema,g=[],j;for(j in f)if(!(m&&-1!==a.inArray(j,m))){var k=d._values[j],i=f[j];if(p[j]&&p[j].depend)k!==i&&e(ta,[d._model?d._model.name:Aa,j]);else{var u=p[j]&&p[j].type;x(u)&&(null==i?(i=[],d._nullProps[j]=!0):d._nullProps[j]=!1);if(u&&u.match(/string|number|integer|boolean/)){var E=i;if(G(E)){for(var E=E.slice(0),i=0,l=E.length;i<l;i++)E[i]=E[i]&&"object"===typeof E[i]?E[i]&&E[i].valueOf&&E[i].valueOf():
E[i];i=E}else i=E&&"object"===typeof E&&E.valueOf?E.valueOf():E}if(null!=i&&u&&u.match(/number|integer/)&&"number"!==typeof i)if(G(i)||c.core.data.isObservableArray(i)){E=0;for(l=i.length;E<l;E++)null!=i[E]&&o(i[E])&&(i[E]=parseFloat(i[E]))}else null!=i&&(i=parseFloat(i));if(!x(u)||!k||!k.equals(i))k===i||s(k)&&s(i)||(u&&-1!==u.indexOf("[]")&&c.core.data.isObservableArray(k)&&(k=k.toArray()),g.push({p:j,o:k,n:i}))}}if(g.length){f={};m=[];E=0;for(j=g.length;E<j;E++)k=g[E],p[k.p]&&x(p[k.p].type)?k.n&&
d._values[k.p].copyFrom(k.n):d._values[k.p]=k.n,f[k.p]={oldValue:k.o,newValue:d.get(k.p)},m.push(k.p);p={type:!0===h?"create":"change",target:d,props:f};a.extend(f,b(d,p,m,h));return p}}function w(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function F(a,b,d){if(a._manager)for(var c=w(a),e=0,f=d.length;e<f;e++){var m=d[e],h=m._values[a._idKey];c[h]||(c[h]=[]);c[h].push({type:b,item:m})}}function I(a,b){if(a._manager){var d=
w(a),c=b.target._values[a._idKey];d[c]||(d[c]=[]);d[c].push({type:ua,ev:b})}}function g(b){var d={},c;for(c in b)if(b.hasOwnProperty(c)){var e=b[c]?b[c].depend:null;if(e)for(var e=P(e.on),f=0,m=e.length;f<m;f++){var h=e[f];d[h]||(d[h]=[]);-1===a.inArray(c,d[h])&&d[h].push(c)}}return d}function ia(b,d){f(b,d,!0);var c;c=(c=b.base)?d.models[c.slice(1)].schema:{};c=a.extend({},c,b.schema);i(c,!0,d,!0);var e=r(c,!0,d);q(c,e,!0);return new Qa(c,b,e,d)}function Z(b,d){var c=[],e=[],f=[],m;for(m in b)b[m]&&
b[m].depend?e.push(m):c.push(m),b[m]&&b[m].type&&-1!==b[m].type.indexOf("[]")&&f.push(m);m=g(b);var h={},p;for(p in b){var i=b[p];if(!i||!i.depend){var j=null,j=i&&void 0!==i.defaultValue?i.defaultValue:null;h[p]=j}}return{_realProps:c,_dependProps:e,_aryProps:f,_dependencyMap:m,_createInitialValueObj:function(b){if(!b)return a.extend({},h);var d=a.extend({},h),c;for(c in b)d[c]=b[c];return d},_validateItemValue:function(a,b,c){return d[a](b,c)}}}function J(b,d,f,m){var h=!1,p=["sort","reverse","pop",
"shift"],i=null;f.addEventListener("changeBefore",function(f){m&&(b._isRemoved||!m._manager)&&e(u,[b._values[m._idKey],f.method]);var g=c.u.obj.argsToArray(f.args);if(-1===a.inArray(f.method,p)){var j=!0;switch(f.method){case "splice":j=!1;g.shift();g.shift();break;case "copyFrom":g=g[0];break;case "set":g.shift()}j&&(f=b._validateItemValue(d,g),0<f.length&&e(B,d,f))}m?(m._manager&&(f=m._manager,g=m.name,f._oldValueLogs||(f._oldValueLogs={}),f._oldValueLogs[g]||(f._oldValueLogs[g]={}),f=f._oldValueLogs[g],
g=b._values[m._idKey],f[g]||(f[g]={}),f[g][d]||(f[g][d]=b._values[d].toArray())),(h=m._manager?m._manager.isInUpdate():!1)||m._manager.beginUpdate()):i=b._values[d].toArray()});f.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var c={type:"change",target:b,props:{}};c.props[d]={};m?(I(m,c),h?a.stopImmediatePropagation():(m._manager._isArrayPropChangeSilentlyRequested=!0,m._manager.endUpdate(),m._manager._isArrayPropChangeSilentlyRequested=!1)):f.equals(i)||(c.props[d]={oldValue:i,
newValue:b._values[d]},b.dispatchEvent(c))}})}function va(a){oa(a)||e(fa);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function Qa(a,b,d,c){this.items={};this.size=0;this.name=b.name;this._manager=c;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===b?T:hb:T;this.schema=a;this._itemConstructor=wa(a,d,this);c.models[this.name]=this}function wa(b,e,f){function m(a){D(this,b,p,a);a=p._createInitialValueObj(a);
d(b,p._validateItemValue,a,f);h(this,a,null,!0);for(var a=p._aryProps,c=0,e=a.length;c<e;c++)J(this,a[c],this.get(a[c]),f)}var p=Z(b,e);f._schemaInfo=p;c.mixin.eventDispatcher.mix(m.prototype);a.extend(m.prototype,p,Ba,{_model:f,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return m}function O(){}function U(){this.length=0;this._src=[]}function xa(){return new U}function N(a){return a&&a.constructor===U?!0:!1}var T="string",hb="number",fa=15E3,R=15001,u=15005,Q=15008,
da=15009,B=15011,ta=15012,kb=15013,Za=15016,ka=15900,ga=15901,$a=15902,ma=15903,la=15904,p=6,H=15800,ja=15801,Ea=15802,ab=15803,m=15804,E=15805,$=15806,K=15807,lb=15808,mb=15809,nb=15810,bb=15811,cb=15812,V=15813,aa=15814,X=15815,W=15816,ba=15817,S=15818,Y=15819,ea=15820,ca=15821,na=15822,pa=15823,Ja=15824,Aa="n/a",ua=2,Ba={get:function(b){if(0===arguments.length)return a.extend({},this._values);var d=this._model;if(!(d?d.schema:this.schema).hasOwnProperty(b))e(15014,[d?d.name:Aa,b]);return this._values[b]},
set:function(a){var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);var c=this._model;c&&(this._isRemoved||!c._manager)&&e(u,[this._values[this._model._idKey],"set"],this);if(c)c._idKey in b&&b[c._idKey]!==this._values[c._idKey]&&e(15003,[c.name,this._idKey]),d(c.schema,c._schemaInfo._validateItemValue,b,c);else{var f=this.validate(b);if(f)throw f;}var f=null,m=c?c._manager.isInUpdate():!1;c&&!m&&c._manager.beginUpdate();this._isInSet=!0;f=h(this,b);this._isInSet=!1;c?(f&&I(c,f),m||
c._manager.endUpdate()):f&&this.dispatchEvent(f)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};c.mixin.eventDispatcher.mix(va.prototype);a.extend(va.prototype,{createModel:function(b){(!b||"object"!==typeof b)&&e(R,null,[k(ka)]);if(!G(b))return this.models[b.name]?this.models[b.name]:ia(b,this);var d=b.length;d||
e(R,null,[k(ka)]);for(var c={},f=[],m=0;m<d;m++){var h=b[m].name;if(this.models[h])u[m]=manager.models[b.name];else try{f.push(h);h=[];b[m].base&&h.push(b[m].base.substring(1));for(var p in b[m].schema){var g=b[m].schema[p];if(g){var i=g.type;i&&"@"===i.substring(0,1)&&(i=-1===i.indexOf("[]")?i.substring(1):i.substring(1,i.length-2),h.push(i))}}c[m]={depends:h}}catch(j){e(R)}}for(var u={size:0};u.size<d;){p={};g=!1;for(m=0;m<d;m++)if(!c[m].registed){for(var h=c[m].depends,i=0,E=h.length;i<E;i++)if(!this.models[h[i]]){p[h[i]]=
!0;break}i===E&&(u[m]=ia(b[m],this),u.size++,g=!0,c[m].registed=!0)}if(!g){var m=!0,l;for(l in p)if(-1===a.inArray(l,f)){m=!1;break}m&&e(15004);e(R,null,[k(ma,l)])}}b=[];for(m=0;m<d;m++)b.push(u[m]);return b},dropModel:function(a){if((a=v(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=
!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,d=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var c={},e;for(e in b)if(b.hasOwnProperty(e)){var f;f=this.models[e];var m=b[e],h=[],p=[],i=[],g=[],j=void 0;for(j in m){for(var k=m[j],u=!0,E=[],l=k.length-1;0<=l;l--){var B=k[l],$=B.type;if($===ua)E.push(B.ev);else{a:{for(u=0;u<l;u++){var H=k[u].type;if(1===H||3===H){l=k[u];break a}}l=null}if(1===$)l&&3===l.type?h.push({id:j,oldItem:l.item,newItem:B.item}):p.push(B.item);else if(l=
l&&3===l.type?l.item:l?null:B.item)g.push(l),l.dispatchEvent({type:"remove",model:f});u=!1;break}}if(u&&0<E.length){B={};for(l=E.length-1;0<=l;l--)for(var K in E[l].props)B[K]||(N(f.get(j).get(K))?($=d&&d[f.name]&&d[f.name][j]&&d[f.name][j][K],f.get(j).get(K).equals($)||(B[K]={oldValue:$})):B[K]={oldValue:E[l].props[K].oldValue});l=!1;for(K in B)$=B[K].oldValue,k=f.get(j).get(K),$===k||s($)&&s(k)?delete B[K]:(l=f.get(j).get(K),a&&N(l)&&l.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),
B[K].newValue=l,l=!0);l&&(E={type:"change",target:E[0].target,props:B},i.push(E),E.target.dispatchEvent(E))}}(f=0===p.length&&0===h.length&&0===g.length&&0===i.length?!1:{created:p,recreated:h,removed:g,changed:i})&&(c[e]=f)}a=!1;for(e in c)a=!0,f=c[e],this.models[e].dispatchEvent({type:"itemsChange",created:f.created,recreated:f.recreated,removed:f.removed,changed:f.changed});c={type:"itemsChange",models:c};a&&this.dispatchEvent(c)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,
d={};d[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:d})}});c.mixin.eventDispatcher.mix(Qa.prototype);a.extend(Qa.prototype,{create:function(a){this._manager||e(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var d=[],c=P(a),f=[],m=this._idKey,p=0,i=c.length;p<i;p++){var g=c[p],j=g[m],k=this._findById(j);k?(f.push(k),(j=h(k,g,[m]))&&I(this,j)):(g=new this._itemConstructor(g),this.items[j]=
g,this.size++,d.push(g),f.push(g))}0<d.length&&F(this,1,d);b||this._manager.endUpdate();return G(a)?f:f[0]},validate:function(a,b){try{var c=this._idKey,f=P(a);"object"!==typeof a&&!G(a)&&e(15007);if(b)for(var m=0,h=f.length;m<h;m++){var p=f[m],g=p[c];(""===g||null==g)&&e(15002,[this.name,c]);var i=this._schemaInfo._createInitialValueObj(p);d(this.schema,this._schemaInfo._validateItemValue,i,this)}else for(var m=0,j=f.length;m<j;m++)p=f[m],d(this.schema,this._schemaInfo._validateItemValue,p,this)}catch(k){return k}return null},
get:function(a){if(G(a)||c.core.data.isObservableArray(a)){for(var b=[],d=0,e=a.length;d<e;d++)b.push(this._findById(a[d]));return b}return this._findById(a)},remove:function(a){this._manager||e(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var d=this._idKey,c=P(a),f=[],m=[],h=0,p=c.length;h<p;h++)if(this.has(c[h])){var g=v(c[h])||A(c[h],!0)?c[h]:c[h]._values[d],i=this.items[g];delete this.items[g];this.size--;m.push(i);i._model&&
(i._isRemoved=!0);f.push(i)}else m.push(null);0<f.length&&F(this,3,f);b||this._manager.endUpdate();return G(a)?m:m[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return v(a)||A(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&M(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===ha?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",
created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,d;for(d in b)b.hasOwnProperty(d)&&a.push(b[d]);return a},createQuery:Pa.createQuery});c.mixin.eventDispatcher.mix(O.prototype);a.extend(O.prototype,Ba,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);d(this.schema,this._validateItemValue,b)}catch(c){return c}return null}});
c.mixin.eventDispatcher.mix(U.prototype);var Ia={equals:function(a){var b=N(a);if(!b&&!G(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var d=0;d<b;d++){var c=this[d],e=a[d];if(!(c===e||s(c)&&s(e)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=N(a)?a._src:a;G(a)||e(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=
c.u.obj.argsToArray(arguments),b=0,d=a.length;b<d;b++)N(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},za="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),sa;for(sa in Ia)Ia.hasOwnProperty(sa)&&-1===a.inArray(sa,za)&&za.push(sa);var ra=["concat","slice","splice","filter","map"],Ga=["reverse","sort"],Ha="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");sa=0;for(var Na=za.length;sa<
Na;sa++){var Ta=za[sa];U.prototype[Ta]=function(b){function d(){var e=c.apply(this._src,arguments);if(-1!==a.inArray(b,Ga))e=this;else if(-1!==a.inArray(b,ra)){var f=xa();f.copyFrom(e);e=f}return e}var c=Ia[b]?Ia[b]:Array.prototype[b];return-1===a.inArray(b,Ha)?d:function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=d.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(Ta)}c.u.obj.expose("h5.core.data",
{createManager:function(a,b){oa(a)||e(fa);var d=new va(a);if(null!=b){""===b&&(b="window");var f={};f[a]=d;c.u.obj.expose(b,f)}return d},createObservableArray:xa,createObservableItem:function(a){i(a,!1,null,!0);var b=r(a);q(a,b,!0);var c=new O,b=Z(a,b);D(c,a,b);c.schema=a;for(var e in b)c[e]=b[e];e=b._createInitialValueObj();d(a,b._validateItemValue,e);h(c,e,null,!0);a=0;for(b=c._aryProps.length;a<b;a++)J(c,c._aryProps[a],c.get(c._aryProps[a]));return c},isObservableArray:N,isObservableItem:function(a){return!(!a||
!a.constructor||!a._validateItemValue||M(a.getModel))},createSequence:function(b,d,c){function e(){return g}function f(){var a=g;g+=i;return a}function m(){return g.toString()}function h(){var a=g;g+=i;return a.toString()}function p(){}var g=null!=b?b:1,i=null!=d?d:1,b=1===c?{current:m,next:h,returnType:1}:{current:e,next:f,returnType:2};b.setCurrent=function(a){g=a};a.extend(p.prototype,b);return new p},SEQ_STRING:1,SEQ_INT:2})})();(function(){function l(a,b){return!a||a.nodeType!==Y?void 0:a.getAttribute(b)}
function y(a){if(!a)return null;for(var b=[],d=0,c=a.length;d<c;d++)b.push(a[d]);return b}function s(a,b,d,c){var e=[],b=P(b);if(!0===c)return o(e,a,b,d),e;for(var a=a.childNodes,c=0,f=a.length;c<f;c++)o(e,a[c],b,d);return e}function o(a,b,d,c){if(b.nodeType===Y){for(var e=0,f=d.length;e<f;e++){var h=b.getAttribute(d[e]);if(typeof c===ha){if(null!==h){a.push(b);break}}else if(null!==h&&h==c){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;e=0;for(f=b.length;e<f;e++)o(a,b[e],d,c)}}}function v(b,
d){for(var b=P(b),c=[],e=0,f=b.length;e<f;e++){var g=b[e];if(g.nodeType===Y&&!(!0===d&&(null!=l(g,w)||null!=l(g,F))))for(var i=s(g,h,void 0,!0),j=0,k=i.length;j<k;j++){for(var o=!0,q=i[j];null!=q&&q!==g;q=q.parentNode)if(null!=l(q,w)||null!=l(q,F)){o=!1;break}o&&c.push(i[j])}}return a(c)}function f(b,d,c){for(var e=[],f=0,h=b.length;f<h;f++){var g=b[f];if(g.nodeType===Y){if(!0===c){if(null!=g.getAttribute(d)){e.push(g);continue}if(null!=l(g,w)||null!=l(g,F))continue}for(var i=s(g,d,void 0,!1),j=0,
k=i.length;j<k;j++){var o=a(i[j])[0],q=o.parentNode;(null==l(q,w)&&null==l(q,F)||q===g)&&e.push(o)}}}return a(e)}function i(a){return a&&a.addEventListener&&a.getModel&&!G(a)&&!c.core.data.isObservableArray(a)||c.core.data.isObservableItem(a)?!0:!1}function q(a,b){for(var d=0,c=a.length;d<c;d++){var e=a[d];e.nodeType===Y&&e.setAttribute(g,b)}}function r(b,d,f){var h=N++,g=d[0];a(g).empty();if(f){!G(f)&&!c.core.data.isObservableArray(f)&&e(U);q(d,h);b._addBindingEntry(f,g,h);c.core.data.isObservableArray(f)&&
!b._isWatching(f)&&(d=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(f)]=d,f.addEventListener("change",d));var d=l(g,I),d=y(b._getSrcCtxNode(d).childNodes),i=[];b._loopElementsMap[h]=i;for(var h=g.ownerDocument.createDocumentFragment(),j=f.get?function(a){return f.get(a)}:function(a){return f[a]},k=0,w=f.length;k<w;k++){for(var o=[],r=0,t=d.length;r<t;r++){var p=R(d[r]);o.push(p);h.appendChild(p)}i[k]=o;g.appendChild(h);z(b,o,j(k),!1,!0)}}}function z(a,b,d,f,h){b=
P(b);if(f)r(a,b,d);else{f=N++;d&&(("object"!==typeof d||G(d)||c.core.data.isObservableArray(d))&&e(U),q(b,f),a._addBindingEntry(d,b,f));var g=i(d);g&&!a._isWatching(d)&&(f=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(d)]=f,d.addEventListener("change",f));v(b,h).each(function(){t(this,d,g)});j(a,b,d,!1,h);j(a,b,d,!0,h)}}function j(a,b,d,c,e){var h=c?"data-h5-loop-context":"data-h5-context";f(b,h,e).each(function(){var b=l(this,h),e=null;d&&(e=i(d)?d.get(b):d[b]);
z(a,this,e,c)})}function t(b,d,c){for(var f=l(b,h).split(va),g=[],i=[],j=[],k=0,w=f.length;k<w;k++){var o=f[k];if(-1===o.indexOf(J))0<a.trim(o).length&&(g.push(null),i.push(null),j.push(a.trim(o)));else{var q=o.split(J),o=a.trim(q[0]),q=a.trim(q[1]),r=null,p=M.exec(o);p&&(r=p[1],o=/(\S+)[\s\(]/.exec(o)[1]);0<o.length&&0<q.length&&(g.push(o),i.push(r),j.push(q))}}f=b.tagName.toLowerCase();k=a(b);w=0;for(o=g.length;w<o;w++){var r=g[w],p=i[w],H=j[w],q=null;d&&(q=c?d.get(H):d[H]);null==r&&("input"===
f?(r="attr",p="value"):r="text");switch(r){case "text":null==q?k.text(""):k.text(q);break;case "html":null==q?k.html(""):k.html(q);break;case "class":var r=l(b,Z),H=(p=null==r)?"":" ",ja=!1;q&&(ja=!RegExp("\\s"+q+"\\s").test(" "+r+" "));k[0].className=(p?"":r)+(ja?H+q:"");break;case "attr":p||e(wa);"input"===f&&"value"===p?null==q?k.val(""):k.val(q):null==q?k.removeAttr(p):k.attr(p,q);break;case "style":p||e(wa);null==q?k.css(p,""):k.css(p,q);break;default:e(O)}}}function D(a,b,d){for(var c=0,e=d.length;c<
e;c++){var f=d[c];b.removeChild(f);a._removeBinding(f)}}function x(a){for(var a=a.childNodes,b=[],d=0,c=a.length;d<c;d++)b.push(R(a[d]));return b}function k(a,b,d,c,e){for(var f=d.ownerDocument.createDocumentFragment(),h=[],g=0,i=e.length;g<i;g++){var j=x(d);h[g]=j;for(var k=0,l=j.length;k<l;k++)f.appendChild(j[k]);z(a,j,e[g])}Array.prototype[c].apply(b,h);return f}function b(a,b,d,c,e,f){var h=c.length;if(0!==h){for(var g=c[0],i=g,d=1===h?d.length:i+c[1];i<d;i++){var j=e[i];j&&D(a,b,j)}e.splice(g,
c[1]);if(!(2>=h)){i=e.length;i=0===i||0===g?b.firstChild:g>=i?null:e[g][0];d=f.ownerDocument.createDocumentFragment();g=[g,0];for(j=2;j<h;j++){for(var k=x(f),l=0,p=k.length;l<p;l++)d.appendChild(k[l]);z(a,k,c[j]);g.push(k)}b.insertBefore(d,i);Array.prototype.splice.apply(e,g)}}}function d(a,b){void 0!==a.nodeType?a.nodeType===Y&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=y(a));this._bindRootId=T++;W[this._bindRootId]=this;for(var d=[],c=0,e=this._targets.length;c<
e;c++){var f=this._targets[c];if(f.nodeType===Y){f.setAttribute(ia,this._bindRootId);for(var g=s(f,[w,F],void 0,!0),i=0,j=g.length;i<j;i++){var k=xa++;g[i].setAttribute(I,k)}g=s(f,h,void 0,!0);i=0;for(j=g.length;i<j;i++)k=g[i],/class\s*:/.test(l(k,h))&&""!=k.className&&k.setAttribute(Z,k.className)}d.push(f.cloneNode(!0))}this._srces=d;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};z(this,this._targets,this._rootContext,!1,!0)}var h="data-h5-bind",
w="data-h5-context",F="data-h5-loop-context",I="data-h5-dyn-ctx",g="data-h5-dyn-vid",ia="data-h5-dyn-bind-root",Z="data-h5-dyn-cn",J=":",va=";",M=/\(\s*(\S+)\s*\)/,wa=7100,O=7101,U=7102,xa=0,N=0,T=0,W={},fa={},R;(function(){var b=document.createElement("div");b.h5Dummy="a";var d=b.cloneNode(!1),c=void 0!==d.h5Dummy;b.h5Dummy=void 0;c?(d.h5Dummy=void 0,R=function(b){var d=b.ownerDocument;return b.nodeType===Y?a(a.trim(b.outerHTML),d)[0]:b.cloneNode(!0)}):R=function(a){return a.cloneNode(!0)}})();a.extend(d.prototype,
{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var d=this._targets[a];if(d.nodeType===Y){this._removeBinding(d);d.removeAttribute(ia);for(var c=s(d,Z,void 0,!0),e=0,f=c.length;e<f;e++)c[e].removeAttribute(Z);d=s(d,I,void 0,!0);e=0;for(c=d.length;e<c;e++)d[e].removeAttribute(I)}}delete W[this._bindRootId]},_observableArray_changeListener:function(a){var d=this._getViewsFromSrc(a.target);if(d)for(var c in d)if(d.hasOwnProperty(c)){var e=d[c],f=this._getSrcCtxNode(l(e,I)),h=this._loopElementsMap[c];
switch(a.method){case "set":b(this,e,a.target,[a.args[0],1,a.args[1]],h,f);break;case "shift":case "pop":var g=h[a.method]();g&&D(this,e,g);break;case "unshift":g=k(this,h,f,a.method,a.args);e.insertBefore(g,e.firstChild);break;case "push":g=k(this,h,f,a.method,a.args);e.appendChild(g);break;case "splice":b(this,e,a.target,a.args,h,f);break;case "reverse":for(var g=e,i=h;g.firstChild;)g.removeChild(g.firstChild);for(var j=0,e=i.length;j<e;j++)for(var f=i[j],q=f.length-1;0<=q;q--)g.insertBefore(f[q],
g.firstChild);h.reverse();break;case "sort":case "copyFrom":case null:for(var g=this._loopElementsMap,i=c,j=a.target,q=h,h=f,f=0,o=q.length;f<o;f++)D(this,e,q[f]);for(var q=e.ownerDocument.createDocumentFragment(),o=[],f=0,w=j.length;f<w;f++){var p=x(h);o[f]=p;for(var H=0,ja=p.length;H<ja;H++)q.appendChild(p[H]);z(this,p,j.get(f))}e.appendChild(q);g[i]=o}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var d=!1;a.target===this._rootContext&&(d=!0);var c=this,
e;for(e in b)if(b.hasOwnProperty(e)){var h=b[e];v(h,d).each(function(){t(this,a.target,!0)});f(h,w).each(function(){var b=l(this,w);if(!(b in a.props))return!0;c._removeBinding(this);var d=l(this,I),d=c._getSrcCtxNode(d),d=R(d);this.parentNode.replaceChild(d,this);z(c,d,a.props[b].newValue)});f(h,F).each(function(){var b=l(this,F);if(!(b in a.props)||a.target._isArrayProp(b))return!0;c._removeBinding(this);z(c,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,d=this._srces.length;b<
d;b++){var c=this._srces[b];if(l(c,I)===a)return c;c=s(c,I,a);if(0<c.length)return c[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,d){var c=this._getContextIndex(a);-1===c&&(this._usingContexts.push(a),c=this._usingContexts.length-1);fa[d]=a;(a=this._srcToViewMap[c])?a[d]=b:(a={},a[d]=b,this._srcToViewMap[c]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;
return!1},_removeBindingEntry:function(a){var b=fa[a];if(b){var d=this._getContextIndex(b);if(-1!==d){var e=this._srcToViewMap[d];e&&e[a]&&(delete e[a],this._hasBindingForSrc(e)||(e=!1,i(b)?(b.removeEventListener("change",this._listeners[d]),e=!0):c.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[d]),e=!0),e&&delete this._listeners[d],delete this._srcToViewMap[d],this._usingContexts[d]=null))}fa[a]&&delete fa[a]}},_removeBinding:function(a){if(a.nodeType===Y){var b=
l(a,g);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(g));for(var a=s(a,g),b=0,d=a.length;b<d;b++){var c=a[b];this._removeBindingEntry(l(c,g));c.removeAttribute(g)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});ra={createBinding:function(a,b){return new d(a,b)}}})();(function(){function l(e){return c.u.obj.isJQueryObject(e)?e:a(e)}function y(){this.__cachedTemplates={}}var s=c.async.deferred,o={escapeHtml:function(a){return c.u.str.escapeHtml(a)}};
a.extend(function(){this._templateMap={}}.prototype,{applyToView:function(a){var c=this._templateMap,e;for(e in c)a.register(e,c[e])},register:function(a,c){this._templateMap[a]=c},marge:function(c){a.extend(this._templateMap,c._templateMap)},registByElement:function(c){c=a(c);if(0!==c.length){var i=this;c.each(function(){var c=a.trim(this.id),f=a.trim(this.innerHTML);c||e(7002,null,{});i.register(c,f)})}}});a.extend(y.prototype,{load:function(f){var i=s(),l=null;switch(a.type(f)){case "string":a.trim(f)||
e(7004);l=[f];break;case "array":l=f;0===l.length&&e(7004);for(var f=0,o=l.length;f<o;f++)v(l[f])?a.trim(l[f])||e(7004):e(7004);break;default:e(7004)}for(var o=[],f=0,z=l.length;f<z;f++)o.push(c.res.get(l[f]));var j=this;S(o,function(a){for(var a=G(a)?a:[a],c=[],e,f=0,b=a.length;f<b;f++){for(var d=a[f].templates,h=0,l=d.length;h<l;h++){if(!j.isValid(d[h].content)){e=d[h];break}c.push(d[h])}if(e)break}if(e)try{j.register(e.id,e.content)}catch(o){return o.detail.url=a[f].url,o.detail.path=a[f].path,
i.reject(o)}f=0;for(b=c.length;f<b;f++)j.register(c[f].id,c[f].content);i.resolve()},function(a){i.reject(a)});return i.promise()},getAvailableTemplates:function(){var a=[],c;for(c in this.__cachedTemplates)a.push(c);return a},register:function(c,i){"string"!==a.type(i)?e(7E3,null,{id:c}):(!v(c)||!a.trim(c))&&e(7002,[]);try{var l=new EJS.Compiler(i,"[");l.compile();this.__cachedTemplates[c]=l.process}catch(o){l=o.lineNumber,e(7010,[l?" line:"+l:"",o.message],{id:c})}},isValid:function(a){try{return(new EJS.Compiler(a,
"[")).compile(),!0}catch(c){return!1}},get:function(c,i){var l=this.__cachedTemplates;(!v(c)||!a.trim(c))&&e(7002);(l=l[c])||e(7005,c);var r=i?a.extend(!0,{},i):{},s=r.hasOwnProperty("_h")?new EJS.Helpers(r):new EJS.Helpers(r,{_h:o}),j=null;try{j=l.call(r,r,s)}catch(t){e(7006,t.toString(),t)}return j},update:function(a,c,e){return l(a).html(this.get(c,e))},append:function(a,c,e){return l(a).append(this.get(c,e))},prepend:function(a,c,e){return l(a).prepend(this.get(c,e))},isAvailable:function(a){return!!this.__cachedTemplates[a]},
clear:function(c){if(typeof c===ha)this.__cachedTemplates={};else{var i=null;switch(a.type(c)){case "string":i=[c];break;case "array":c.length||e(7002);i=c;break;default:e(7002)}for(var c=0,l=i.length;c<l;c++){var o=i[c];(!v(o)||!a.trim(o))&&e(7002)}c=0;for(l=i.length;c<l;c++)delete this.__cachedTemplates[i[c]]}},bind:function(f,i){var l=null;null==f&&e(7007);G(f)?l=f:(l=a(f),0===l.length&&e(7007),l=l.toArray());(null==i||"object"!==typeof i||G(i)||c.core.data.isObservableArray(i))&&e(7009);return ra.createBinding(l,
i)}});var A=new y;A.createView=function(){return new y};a(function(){a('script[type="text/ejs"]').each(function(){var c=a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,"["),e.compile(),A.__cachedTemplates[c]=e.process)})});c.u.obj.expose("h5.core",{view:A})})();(function(){function e(b){var d={},c;for(c in fa){var f=a("<div></div>").addClass(b).addClass(c).appendTo("body"),h=a.camelCase(c);d[h]={};a.map(fa[c],function(a){d[h][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,
""),10):f.css(a)});f.remove()}return d}function y(a,b,d){var a=b.createElement("v:"+a),c;for(c in d)a.style[c]=d[c];return a}function s(a,b){for(var d=[],c=a/2,e=0.8*a/2,f=360/b*Math.PI/180,h=1;h<=b;h++){var g=f*h,i=Math.cos(g),g=Math.sin(g);d.push({from:{x:c+e/2*i,y:c+e/2*g},to:{x:c+e*i,y:c+e*g}})}return d}function o(a){return function(){var b=document.body,d=document.documentElement,c=Q?b:da?d:null;return c?"Height"===a?c["client"+a]>c["scroll"+a]?c["client"+a]:c["scroll"+a]:c["client"+a]:Math.max(b["scroll"+
a],d["scroll"+a],b["offset"+a],d["offset"+a],d["client"+a])}}function A(a){return function(){var b=Q?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function f(a){var b=Q?document.body:document.documentElement;return N.isiOS?window["inner"+a]:b["client"+a]}function i(b){var d=a(b)[0],c=document.body,e=a("html")[0],b={top:0,left:0};if(d===c&&da)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(c.currentStyle.marginTop||0)+parseFloat(c.currentStyle.borderTop||
0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(c.currentStyle.marginLeft||0)+parseFloat(c.currentStyle.borderLeft||0)};"undefined"!==typeof d.getBoundingClientRect&&(b=d.getBoundingClientRect());c=Q?c:document.documentElement;d=c.clientTop||0;c=c.clientLeft||0;return{top:b.top+ga()-d,left:b.left+ea()-c}}function q(){a.each(ca(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",
function(){return!1})})}function r(a){a=T(a)?a[0]:a;return a===window||a===document||a===document.body}function z(a){return X(O(a)).getComputedStyle(a,null)}function j(b,d){return!X(O(b)).getComputedStyle?a(b).css(d):z(b)[d]}function t(b){if(!X(O(b)).getComputedStyle)return a(b).height();var d=z(b);return b.offsetHeight-parseFloat(d.paddingTop)-parseFloat(d.paddingBottom)}function D(b){if(!X(O(b)).getComputedStyle)return a(b).width();var d=z(b);return b.offsetWidth-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight)}
function x(b,d){if(!X(O(b)).getComputedStyle)return a(b).outerHeight();var c=z(b);return t(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)+parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth)+(d?parseFloat(c.marginTop)+parseFloat(c.marginBottom):0)}function k(b,d){if(!X(O(b)).getComputedStyle)return a(b).outerWidth();var c=z(b);return D(b)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)+parseFloat(c.borderLeftWidth)+parseFloat(c.borderRightWidth)+(d?parseFloat(c.marginLeft)+parseFloat(c.marginRight):
0)}function b(b){if(!X(O(b)).getComputedStyle)return a(b).innerHeight();var d=z(b);return t(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)}function d(b){if(!X(O(b)).getComputedStyle)return a(b).innerWidth();var d=z(b);return D(b)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)}function h(b,d,c,e){function f(){h+=m;h>c?(clearInterval(j),d.each(function(a){for(var d in b[a])this.style[d]=""}),e()):d.each(function(b){var d=g[b],c;for(c in d)d[c]+=i[b][c];a(this).css(d)})}var m=xa,h=0,g=
[],i=[];d.each(function(a){var e=b[a];i[a]={};g[a]={};var f=z(d[a]),h;for(h in e)g[a][h]=parseFloat(f[h]),i[a][h]=(parseFloat(e[h])-parseFloat(f[h]))*m/c});f();var j=setInterval(f,m)}function w(a,b,d){var c=[];a.each(function(){var a=parseFloat(j(this,"opacity"));c.push({opacity:a})});a.css({opacity:0,display:"block"});h(c,a,b,d)}function F(a,b,d){var c=[];a.each(function(){c.push({opacity:0})});h(c,a,b,d)}function I(b,d){this.style=a.extend(!0,{},b);if(!d.getElementById(wa)){d.namespaces.add("v",
"urn:schemas-microsoft-com:vml");var c=d.createElement("style");d.getElementsByTagName("head")[0].appendChild(c);c.id=wa;c.setAttribute("type","text/css");c.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}c=this.style.throbber.width;this.group=y("group",d,{width:c+"px",height:this.style.throbber.height+"px"});this.group.className=P;for(var c=s(c,this.style.throbber.lines),e=this.style.throbberLine.color,f=this.style.throbberLine.width,h=0,g=c.length;h<g;h++){var i=
c[h],j=i.from,k=i.to,i=y("line",d);i.strokeweight=f;i.strokecolor=e;i.fillcolor=e;i.from=j.x+","+j.y;i.to=k.x+","+k.y;j=y("stroke",d);j.opacity=1;i.appendChild(j);this.group.appendChild(i)}this._createPercentArea(d)}function g(b,d){var f=this,h=a(b);if(h.length){var g=r(h),h=g?a("body"):h,m=O(h[0]);if(m!==window.document&&(h[0]===m||X(m)===h[0]))h=a(m.body);var i=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},d);this._displayed=!1;this._throbbers=
[];this._settings=i;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},e(i.theme));i.throbber&&a.extend(this._styles.throbber,i.throbber);this._isScreenLock=g;this._$target=h;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){f._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){f._handleResizeEvent()};this._redrawable=!0;this._lastPercent=
-1;this._lastMessage=null;this._fadeInTime="number"===typeof i.fadeIn?i.fadeIn:-1;this._fadeOutTime="number"===typeof i.fadeOut?i.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=i.showThrobber||i.message;for(var h=c.u.str.format(W,""===i.message?'style="display: none;"':"",i.message),g="https"===document.location.protocol?"return:false":"about:blank",j=0,k=this._$target.length;j<k;j++)this._$content=this._$content.add(a(m.createElement("div")).append(h).addClass(ia).addClass(i.theme).addClass(Z).css("display",
"none")),this._$overlay=this._$overlay.add((i.block?a(m.createElement("div")):a()).addClass(ia).addClass(i.theme).addClass(J).css("display","none")),this._$skin=this._$skin.add((da||Q?a(m.createElement("iframe")):a()).attr("src",g).addClass(ia).addClass(va).css("display","none"));var o=this._isScreenLock&&B?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",o)});m=i.promises;i=function(){f.hide()};h=a.hasOwnProperty("curCSS")?"pipe":"then";G(m)?(m=a.map(m,function(a){return a&&
M(a.promise)?a:null}),0<m.length&&pa(c.async.when(m),h,[i,i])):m&&M(m.promise)&&pa(m,h,[i,i])}}var ia="h5-indicator",Z="content",J="overlay",va="skin",P="vml-root",wa="h5-vmlstyle",W='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',U=500,xa=13,N=c.env.ua,T=c.u.obj.isJQueryObject,ca=c.u.obj.argsToArray,fa={throbber:["width","height"],"throbber-line":["width","color"]},R=!!document.createElement("canvas").getContext,u=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));
a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),Q="CSS1Compat"!==document.compatMode,da=N.isIE&&6>=N.browserVersion,B=!(N.isAndroidDefaultBrowser||N.isiOS&&5>N.browserVersion||da||Q||N.isWindowsPhone),ba=null,S=null,Y=null,ka=null,ga=null,ea=null,ma=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),d=["Webkit","Moz","O","ms","Khtml"],c=d.length;return function(e){e=a.camelCase(e);
if(e in b.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),f=0;f<c;f++)if(d[f]+e in b.style)return!0;return!1}}(),S=function(a){return function(){var b=document.body,d=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:Q?b["client"+a]:d["client"+a]}}("Height"),Y=o("Height"),ka=o("Width"),ga=A("Top"),ea=A("Left"),ba=ma("animationName");I.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},
hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,d=this.highlightPos,c=this.group.childNodes,e=0,f=c.length;e<f;e++){var h=c[e];if("textbox"!==h.nodeName){var g=e+1;h.firstChild.opacity=g==d?"1":g==d+1||g==d-1?"0.75":"0.4"}}d==a?d=0:d++;this.highlightPos=d;var i=this;this._runId=setTimeout(function(){i._run.call(i)},Math.floor(b/a))}},_createPercentArea:function(b){var d=
y("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var c=b.find("td");c.width(this.group.style.width);c.height(this.group.style.height);c.css("line-height",this.group.style.height);c.addClass("throbber-percent");d.appendChild(b[0]);this.group.appendChild(d)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var la=function(b,d){this.style=a.extend(!0,{},b);this.canvas=d.createElement("canvas");this.baseDiv=d.createElement("div");this.percentDiv=d.createElement("div");
var c=this.canvas,e=this.baseDiv,f=this.percentDiv;c.width=this.style.throbber.width;c.height=this.style.throbber.height;c.style.display="block";c.style.position="absolute";e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.appendChild(c);f.style.width=this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.style.lineHeight=this.style.throbber.height+"px";f.className="throbber-percent";e.appendChild(f);this.positions=s(c.width,this.style.throbber.lines)};
la.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,d=b.getContext("2d"),c=this.highlightPos,e=this.positions,f=this.style.throbberLine.color,h=this.style.throbberLine.width,g=this.style.throbber.roundTime;b.width=b.width;for(var i=0,j=e.length;i<j;i++){d.beginPath();
d.strokeStyle=f;d.lineWidth=h;var k=i+1;d.globalAlpha=k==c?1:k==c+1||k==c-1?0.75:0.4;var l=e[i],k=l.from,l=l.to;d.moveTo(k.x,k.y);d.lineTo(l.x,l.y);d.stroke()}c==a?c=0:c++;this.highlightPos=c;if(ba)b.className="throbber-canvas";else{var o=this;this._runId=setTimeout(function(){o._run.call(o)},Math.floor(g/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};g.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+ia).length)return this;this._displayed=!0;
for(var b=this,d=this._fadeInTime,c=function(){var d=a(window);b._isScreenLock&&(q(b._$overlay,b._$content),B||(d.bind("touchmove",b._scrollHandler),d.bind("scroll",b._scrollHandler)));d.bind("orientationchange",b._resizeHandler);d.bind("resize",b._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var h=this._$target.eq(e),g=this._$content.eq(e),i=this._$skin.eq(e),k=this._$overlay.eq(e),l=this._settings,o=j(h[0],"position");!this._isScreenLock&&"static"===o&&(h.data("before-position",o),h.data("before-zoom",
j(h[0],"zoom")),h.css({position:"relative",zoom:"1"}));var o=O(h[0]),r=null;l.showThrobber&&(r=R?new la(this._styles,o):u?new I(this._styles,o):null);r&&(b._throbbers.push(r),b.percent(this._settings.percent),r.show(g.children(".indicator-throbber")[0]));h.append(i).append(k);this._showContent&&h.append(g)}e=this._$skin.toArray();Array.prototype.push.apply(e,this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=a(e);0>d?(e.css("display","block"),c()):w(e,d,c);this._reposition();
this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&B||0===this._$overlay.length))for(var d=0,c=this._$target.length;d<c;d++){var e=this._$content.eq(d),f=this._$overlay.eq(d);b=this._$target.eq(d);var h=this._$skin.eq(d);if(this._isScreenLock)e=ka(),b=Y();else{f.css("display","none");e.css("display","none");var g=b[0];a=g.scrollWidth;b=g.scrollHeight;if(da)a=Math.max(a,g.clientWidth),b=Math.max(b,g.clientHeight);else if(N.isIE&&"function"===typeof getComputedStyle){var g=
X(O(g)).getComputedStyle(g,null),i=parseFloat(g.width)+parseFloat(g.paddingLeft)+parseFloat(g.paddingRight);a+=i-parseInt(i)-1;g=parseFloat(g.height)+parseFloat(g.paddingTop)+parseFloat(g.paddingBottom);b+=g-parseInt(g)-1}f.css("display","block");e.css("display","block");e=a}f[0].style.width=e+"px";f[0].style.height=b+"px";if(da||Q)h[0].style.width=e+"px",h[0].style.height=b+"px"}},_reposition:function(){for(var c=0,e=this._$target.length;c<e;c++){var f=this._$target.eq(c),h=this._$content.eq(c);
if(this._isScreenLock){var g=S();B?h.css("top",(g-x(h[0]))/2+"px"):h.css("top",ga()+g/2-x(h[0])/2+"px")}else h.css("top",f.scrollTop()+(b(f[0])-x(h[0]))/2);var g=d(h[0])-D(h[0]),m=0;h.children().each(function(){var b=a(this);if("none"===j(b[0],"display"))return!0;m+=k(this,!0)});h.css("width",m+g);h.css("left",f.scrollLeft()+(d(f[0])-k(h[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,d=this._fadeOutTime,c=this._$skin.toArray();Array.prototype.push.apply(c,
this._$content.toArray());Array.prototype.push.apply(c,this._$overlay.toArray());for(var e=a(c),c=function(){var d=a(window);e.remove();b._isScreenLock||b._$target.each(function(b,d){var c=a(d);c.css({position:c.data("before-position"),zoom:c.data("before-zoom")});c.removeData("before-position").removeData("before-zoom")});d.unbind("touchmove",b._scrollHandler);d.unbind("scroll",b._scrollHandler);d.unbind("orientationchange",b._resizeHandler);d.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&
clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},f=0,h=this._throbbers.length;f<h;f++)this._throbbers[f].hide();0>d?(e.css("display","none"),c()):F(e,d,c);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,d=this._throbbers.length;b<d;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!v(a))return this;if(!this._redrawable)return this._lastMessage=
a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):this._$content.remove();this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();
b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;B||da||Q?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};c.u.obj.expose("h5.ui",{indicator:function(b,d){return a.isPlainObject(b)?new g(b.target,b):new g(b,d)},isInView:function(b,d){var c,e,h,m,g=a(b);if(typeof d===ha)e=f("Height"),m=f("Width"),c=ga(),h=ea();else{m=a(d);if(0===
m.find(g).length)return;h=i(m);c=h.top+parseInt(m.css("border-top-width"));h=h.left+parseInt(m.css("border-left-width"));e=m.innerHeight();m=m.innerWidth()}e=c+e;m=h+m;var j=i(g),k=j.top,j=j.left,l=k+g.outerHeight(),g=j+g.outerWidth();return(c<=k&&k<e||c<l&&l<=e)&&(h<=j&&j<m||h<g&&g<=m)},scrollToTop:function(){function b(){1===window.scrollY&&(d=0);0<d&&(window.scrollTo(0,1),d--,setTimeout(b,U))}var d=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,U)}})})();(function(){function l(){var b=
a.mobile.activePage,b=b&&b[0]&&b[0].id;return v(b)&&0<b.length?b:null}function y(){var b=l();null!==b&&a(function(){f.addCSS(b);f.bindController(b)})}function s(a,d){for(var c in q)for(var e=q[c],f=a===c,i=0,g=e.length;i<g;i++){var j=e[i];if(f)j[(d?"enable":"disable")+"Listeners"]()}for(c in r){e=r[c];f=a===c;i=0;for(g=e.length;i<g;i++)if(j=e[i],f)j[(d?"enable":"disable")+"Listeners"]()}}function o(a,d){a=a.replace(/(\.0+)+$/,"");d=d.replace(/(\.0+)+$/,"");if(a===d)return 0;for(var c=a.split("."),
e=d.split("."),f=c.length,i=0;i<f;i++){if(null==e[i])return 1;var g=parseInt(c[i],10),j=parseInt(e[i],10);if(g!==j)return g<j?-1:1}return null!=e[f]?-1:0}var A,f=null,i={},q={},r={},z={},j={},t=!1,D=!1,x=!1;c.u.obj.ns("h5.ui.jqm");c.ui.jqm.dataPrefix="h5";var k={__name:"JQMController",__ready:function(){var b=this,d=l();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){b.loadScript(this.id)});var c=this.$find("#"+d);c.one("h5controllerready.emulatepageshow",function(){x&&c[0]===
a.mobile.activePage[0]&&c.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){A||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){A&&this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(b){a(b.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});D=!0;var b=b.event.target.id,
d=q[b],c=r[b];if(d){for(var e=0,f=d.length;e<f;e++)d[e].dispose();q[b]=[]}if(c){e=0;for(f=c.length;e<f;e++)c[e].dispose();r[b]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);s(a,!0)},"{rootElement} pagehide":function(b){D||a(b.event.target).trigger("h5jqmpagehide",{nextPage:b.evArg.nextPage});D=!1;b=b.event.target.id;s(b,!1);this.removeCSS(b)},"{rootElement} pageshow":function(b){var d=!1,c=a(b.event.target),e=b.evArg?b.evArg.prevPage:a("");if(b=q[c[0].id])for(var f=
0,i=b.length;f<i;f++)if(!b[f].isReady){c.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===c[0]&&c.trigger("h5jqmpageshow",{prevPage:e})});d=!0;break}d||c.trigger("h5jqmpageshow",{prevPage:e})},"{rootElement} h5controllerbound":function(b){b=b.evArg;if(this!==b){var d=l();null!==d&&-1===a.inArray(b,q[d])&&(r[d]||(r[d]=[]),r[d].push(b))}},"{rootElement} h5controllerunbound":function(b){var d=b.evArg,b=l();null!==b&&(d=a.inArray(d,
r[b]),-1!==d&&r[b].splice(d,1))},loadScript:function(b){var b=a("#"+b),d=a.trim(b.data(this.getDataAttribute("script")));if(0!==d.length)return d=a.map(d.split(","),function(b){return a.trim(b)}),b=!0==b.data(this.getDataAttribute("async")),c.u.loadScript(d,{async:b})},getDataAttribute:function(a){var d=c.ui.jqm.dataPrefix;null==d&&(d="h5");return 0!==d.length?d+"-"+a:a},bindController:function(a){var d=i[a],e=z[a];if(d&&0!==d.length){q[a]||(q[a]=[]);for(var f=q[a],j=0,k=d.length;j<k;j++){for(var g=
d[j],l=!1,o=0,r=f.length;o<r;o++){var t=f[o];if(t&&t.__name===g.__name){l=!0;break}}l||q[a].push(c.core.controller("#"+a,g,e[j]))}}},addCSS:function(b){if(b=j[b])for(var d=document.getElementsByTagName("head")[0],c=d.getElementsByTagName("link"),e=c.length,f=0,i=b.length;f<i;f++){for(var g=a.mobile.path.parseUrl(b[f]).filename,k=!1,l=0;l<e;l++)if(a.mobile.path.parseUrl(c[l].href).filename===g){k=!0;break}k||(g=document.createElement("link"),g.type="text/css",g.rel="stylesheet",g.href=b[f],d.appendChild(g))}},
removeCSS:function(b){var d=j[b];if(d&&(b=l(),null!==b)){var c=j[b];a("link").filter(function(){var b=a(this).attr("href");return-1!==a.inArray(b,d)&&-1===a.inArray(b,c)}).remove()}}};c.u.obj.expose("h5.ui.jqm.manager",{init:function(){t||(t=!0,A=0<=o(a.mobile.version,"1.4"),a(document).one("pageshow",function(){x=!0}),a(function(){f=ea.controllerInternal("body",k,null,{managed:!1});y()}))},define:function(b,d,c,f){v(b)||e(12E3,"id");null!=d&&!v(d)&&!G(d)&&e(12E3,"cssSrc");null!=c&&((v(c)||G(c))&&
e(12001),(!a.isPlainObject(c)||!("__name"in c))&&e(12E3,"controllerDefObject"),null!=f&&!a.isPlainObject(f)&&e(12E3,"initParam"));j[b]||(j[b]=[]);i[b]||(i[b]=[]);z[b]||(z[b]=[]);a.merge(j[b],a.map(a.makeArray(d),function(d){return a.inArray(d,j[b])!==-1?null:d}));c&&-1===a.inArray(c,i[b])&&(i[b].push(c),z[b].push(f));t&&null!==l()?y():this.init()}})})();(function(){function l(){o||(o=navigator.geolocation);return o}function y(a,c){this.oblateness=a;this.semiMajorAxis=c}function s(){}var o=null,v=
c.env.ua;y.prototype.getOblateness=function(){return this.oblateness};y.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var f=new y(298.257222,6378137),i=new y(299.152813,6377397.155),q=Math.PI/180;a.extend(s.prototype,{isSupported:v.isIE&&9<=v.browserVersion?!0:!!l(),getCurrentPosition:function(a){var e=c.async.deferred();l().getCurrentPosition(function(a){e.resolve(a)},function(a){e.reject(ba(2002,null,a))},a);return e.promise()},watchPosition:function(a){function e(){}var f=c.async.deferred(),
i=l().watchPosition(function(a){f.notify(a)},function(a){l().clearWatch(i);f.reject(ba(2002,null,a))},a);e.prototype.unwatch=function(){l().clearWatch(i);f.resolve()};return f.promise(new e)},getDistance:function(a,c,i,l,o){(!isFinite(a)||!isFinite(c)||!isFinite(i)||!isFinite(l))&&e(2E3);var s=o?o:f;s instanceof y||e(2001);var o=s.getSemiMajorAxis(),k=s.getOblateness(),a=a*q,c=c*q,i=i*q,s=l*q,l=(a+i)/2,k=Math.sqrt(2*k-1)/k,k=Math.pow(k,2),b=Math.sqrt(1-k*Math.pow(Math.sin(l),2)),k=o*(1-k)/Math.pow(b,
3),o=o/b,c=c-s;return Math.sqrt(Math.pow(k*(a-i),2)+Math.pow(o*Math.cos(l)*c,2))},GS_GRS80:f,GS_BESSEL:i});c.u.obj.expose("h5.api",{geo:new s})})();(function(){function l(a){if(a){var b=a.deferred;(Na(b)||ua(b)||!a.result)&&e(t)}}function y(b,c,f){if(a.isPlainObject(b))for(var i in b){var j=a.trim(i).replace(/ +/g," ").split(" "),g=[];""===j[0]?e(x):1===j.length?(g.push(j[0]),g.push("="),g.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(j[1])?3===j.length&&/^like$/i.test(j[1])?(g.push(j[0]),g.push(j[1]),
g.push("?"),g.push("ESCAPE"),g.push('"'+j[2]+'"')):(g.push(j[0]),g.push(j[1]),g.push("?")):e(D);c.push(g.join(" "));f.push(b[i])}}function s(){}function o(){this._multiple=!1}function A(a){this._db=a;this._df=k();this._tx=null;this._tasks=[];this._queue=[]}function f(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._columns=G(c)?c.join(", "):"*";this._orderBy=this._where=null}function i(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=
b;this._values=c?P(c):[];this._df=k();this._multiple=!0}function q(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function r(a,b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}function z(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function j(a){this._db=a}var t=3E3,D=3003,x=3011,k=c.async.deferred,b=c.u.str.format;
a.extend(o.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});a.extend(A.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof o||e(3009);var b=this._getRecentTask();(!b||b.result)&&this._queue.push(a);return this},_execute:function(a){function b(){if(0===
f.length){var i=a(g);c._setResult.apply(c,[i]);e.notify(i,c)}else{for(var j=f.shift(),l=j._statements,o=j._parameters,q=k().resolve().promise(),i=[],r=0,s=l.length;r<s;r++)(function(a,b){q=ca(q,function(){var d=k();c._tx.executeSql(a,b,function(a,b){i.push(j._onComplete(b));d.resolve()});return d.promise()})})(l[r],o[r]);ca(q,function(){g.push(j._multiple?i:i[0]);b()})}}var c=this,e=this._df,f=this._queue,g=[];try{l(this._getRecentTask());this._addTask(e);for(var i=0,j=f.length;i<j;i++)f[i]._buildStatementAndParameters();
this._runTransaction()?b():this._db.transaction(function(a){c._tx=a;b()},function(a){c._tx=null;for(var b=c._tasks,d=b.length-1;0<=d;d--)b[d].deferred.reject(ba(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){c._tx=null;for(var a=c._tasks,b=a.length-1;0<=b;b--){var d=a[b];d.deferred.resolve(d.result)}})}catch(o){e.reject(o)}this._df=k();return e.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});f.prototype=new o;
a.extend(f.prototype,{where:function(b){!a.isPlainObject(b)&&!v(b)&&e(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!v(b)&&e(3004,["Select","orderBy"]);this._orderBy=P(b);return this},_buildStatementAndParameters:function(){var c="",e=this._where,c=b("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(e)){var f=[];y(e,f,this._parameters);c+=" WHERE "+f.join(" AND ")}else v(e)&&(c+=" WHERE "+e);G(this._orderBy)&&(c+=" ORDER BY "+this._orderBy.join(", "));
this._statements.push([c]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});i.prototype=new o;a.extend(i.prototype,{_buildStatementAndParameters:function(){var c=this._values,e=this._statements,f=this._parameters;if(0===c.length)e.push(b("INSERT INTO {0} DEFAULT VALUES",this._tableName)),f.push([]);else for(var i=0,j=c.length;i<j;i++){var g=c[i];if(null==g)e.push(b("INSERT INTO {0} DEFAULT VALUES",this._tableName)),f.push([]);else if(a.isPlainObject(g)){var k=[],l=[],
o=[],q;for(q in g)k.push("?"),l.push(q),o.push(g[q]);e.push(b("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,l.join(", "),k.join(", ")));f.push(o)}}},_onComplete:function(a){return a.insertId}});q.prototype=new o;a.extend(q.prototype,{where:function(b){!a.isPlainObject(b)&&!v(b)&&e(3004,["Update","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var c="",e=this._where,c=this._values,f=[],i;for(i in c)f.push(i+" = ?"),this._parameters.push(c[i]);c=b("UPDATE {0} SET {1}",
this._tableName,f.join(", "));a.isPlainObject(e)?(i=[],y(e,i,this._parameters),c+=" WHERE "+i.join(" AND ")):v(e)&&(c+=" WHERE "+e);this._statements.push([c]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});r.prototype=new o;a.extend(r.prototype,{where:function(b){!a.isPlainObject(b)&&!v(b)&&e(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var c="",e=this._where,c=b("DELETE FROM {0}",this._tableName);if(a.isPlainObject(e)){var f=
[];y(e,f,this._parameters);c+=" WHERE "+f.join(" AND ")}else v(e)&&(c+=" WHERE "+e);this._statements.push([c]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});z.prototype=new o;a.extend(z.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});a.extend(j.prototype,{select:function(a,b,c){v(a)||e(3001,"select");!G(b)&&"*"!==b&&e(3005,"select");return new f(this.transaction(c),a,b)},insert:function(b,c,f){v(b)||e(3001,"insert");
null!=c&&!G(c)&&!a.isPlainObject(c)&&e(3006,"insert");return new i(this.transaction(f),b,c)},update:function(b,c,f){v(b)||e(3001,"update");a.isPlainObject(c)||e(3006,"update");return new q(this.transaction(f),b,c)},del:function(a,b){v(a)||e(3001,"del");return new r(this.transaction(b),a)},sql:function(a,b,c){v(a)||e(3007,"sql");null!=b&&!G(b)&&e(3008,"sql");return new z(this.transaction(c),a,b)},transaction:function(a){void 0!=a&&!(a instanceof A)&&e(3002,"transaction");return a?a:new A(this._db)}});
a.extend(s.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,e){if(this.isSupported)return a=openDatabase(a,b,c,e),new j(a)}});c.u.obj.expose("h5.api",{sqldb:new s})})();(function(){function e(a){this._storage=a}a.extend(e.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},getItem:function(a){a=this._storage.getItem(a);return null===a?null:c.u.obj.deserialize(a)},setItem:function(a,e){this._storage.setItem(a,c.u.obj.serialize(e))},
removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var c=this._storage,e=0,l=c.length;e<l;e++){var f=c.key(e);a(e,f,this.getItem(f))}}});c.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new e(window.localStorage),session:new e(window.sessionStorage)})})();
(function(){function l(a){for(var a=c.core.controllerManager.getControllers(a,{deep:!0}),b=0,d=a.length;b<d;b++)ea.isDisposing(a[b])||a[b].dispose()}function y(b,c){var d=a(b).filter(c),e=a(b).find(c);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function s(b){b=a(b).closest("["+U+"],["+X+"]");return b.length?b.get(0):null}function o(b){b=a(b).closest("["+T+"],["+N+"]");return b.length?b.get(0):null}function A(a,b){if(a===b)return!0;var c=
o(a),d=b?o(b):null;return c!==d?!1:s(a)===b}function f(b,d,f){var h=b?b:document.body,b=a(h);if(0!==b.length){1!==b.length&&e(da);if(!ja&&c.settings.scene.autoCreateMainContainer){var j=y(h,"["+T+"]");0===j.length&&(j=y(h,"main"),0===j.length&&h===document.body&&(j=a(h)),0<j.length&&j.eq(0).attr(T,T))}if(b.is("["+N+"]"))g(h);else if(b.is("["+T+"]"))g(h,!0);else{var k=a(h).is("["+U+"],["+X+"]")&&!i(h),l=k?c.async.deferred():null,o=a(h).is("["+U+"],["+X+"]")?h:s(h),p=!1;y(h,"["+S+"]").each(function(){for(var b=
this.getAttribute(S).split(","),c=0,e=b.length;c<e;c++){var g=a.trim(b[c]);if(""===g||d&&g!==d)return!0;if(!i(this,g)){if(!A(this,o))return!0;var m=!1;k&&!p&&this===h&&(m=p=!0);q(this,g);g=z(g,this,m?f:null);m&&g.done(function(a){l.resolve(a)})}}});b.find("["+T+"],["+N+"]").each(function(){if(A(this,o))return!0;var b=a(this);b.is("["+T+"]")?g(this,!0):b.is("["+N+"]")&&g(this)});if(k)return l.promise()}}}function i(b,c){var d=a(b).attr(Y);if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=
0;e<d.length;e++)if(a.trim(d[e])===c)return!0;return!1}function q(b,c){var d=a(b).attr(Y)||"";d&&(d+=",");a(b).attr(Y,d+c)}function r(b,d,g){var h=b?b:document.body,j=c.async.deferred(),b=!1,k=null,l=a(h).find(">["+U+"]");0<l.length&&(k=l.eq(0),i(k)||(b=!0,k.is("["+S+"]")||(q(k,ka.__name),k=c.core.controller(k,ka,g),j.resolve(k))));b||(h=a(h).children().eq(0).filter("["+X+"]"),0<h.length&&!i(h)&&(b=!0,h.attr(U,U),l=h,h.is("["+S+"]")||(q(h,ka.__name),k=c.core.controller(h,ka,g),j.resolve(k))));b||
e(B);d=f(l.get(0),d,g);ua(j)||d.done(function(a){j.resolve(a)});return j.promise()}function z(a,b,d){var e=c.async.deferred();c.res.get(a).then(function(a){a=c.core.controller(b,a,d);e.resolve(a)});return e.promise()}function j(a,b){this.type=a;this.data=b}function t(b,c){this.type=b;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};a(window).on("message",this._recv)}function D(a,b){var c=ga[a];c||(c=new t(a,b),ga[a]=c);
return c}function x(){this._recvChannel=new t(u,window.opener);this._recvChannel.subscribe(this._receive,this);this._sendChannel=new t(Q,window.opener)}function k(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=c.core.data.createSequence(1,1,c.core.data.SEQ_INT);this._sendChannel=D(u,a);this._recvChannel=D(Q,a);this._recvChannel.subscribe(this._receive,this)}function b(){}function d(a,b,c,d){this.window=a=window.open(a,b,c);this._isModal=!1;this._parentBlocker=null;
this.setModal(!0===d?!0:!1);this._rmi=new k(a);this._watchChild()}function h(b){b=a(b);if(!1===b.children().eq(0).is("["+U+"],["+X+"]")){b.wrapInner(a("<div "+U+"></div>"));var c=b.attr(S);c&&b.removeAttr(S).children().attr(S,c)}}function w(b,d){var f=c.async.deferred();c.ajax({url:b,dataType:"html"}).done(function(g){var i=g.replace(pa,"").match(ma),g=i?"<div "+fa+" "+i[1]+">"+i[2]+"</div>":g;la.test(g)&&(g="<div "+N+">"+g+"</div>");g=a(g);d?(g=y(g,"["+N+'="'+d+'"]'),0===g.length&&e(ta,[b,d]),g=
g.eq(0)):(i=y(g,"["+T+"]"),c.settings.scene.autoCreateMainContainer&&0===i.length&&(i=y(g,"main")),0<i.length&&(g=i.eq(0),g.attr(T,T)));if(1<g.length||!a(g).is("["+T+"],["+N+"]")&&!g.is("["+fa+"]"))g=a("<div "+N+"></div>").append(g);h(g);f.resolve(g.children())}).fail(function(a){f.reject(a)});return f}function F(b,d){var e;if(v(b))e=w(b,d);else{e=c.async.deferred();var f;f=null==b?a.parseHTML(p):c.u.obj.isJQueryObject(b)?b[0]:b;e.resolve(f)}return e.promise()}function G(){}function g(b,c){null==
b&&(b=a("<div></div>").get(0));a(b).is("["+ha+"]")&&e(oa);c?a(b).is(":not(["+T+"])")&&a(b).attr(T,T):a(b).is(":not(["+N+"])")&&a(b).attr(N,N);var d=ea.controllerInternal(b,ra,{isMain:c},{async:!1});a(b).attr(ha,ha);return d}function O(){na||(na=!0,f())}function Z(a){return c.core.controllerManager.getControllers(a||document.body,{name:ra.__name,deep:!0})}function J(a){if(null==a)return null;var b=null,c=null;v(a)?b=a:c=a;a=Z(c);if(0===a.length)return null;if(b){for(c=0;c<a.length;c++)if(a[c]._containerName===
b)return a[c];return null}return a[0]}function ba(a){this.trigger(R,a)}function ca(){var a=o(this.rootElement);return!a?null:J(a)}var S="data-h5-controller",Y="data-h5-dyn-controller-bound",U="data-h5-default-scene",X="data-h5-scene",N="data-h5-container",T="data-h5-main-container",ha="data-h5-dyn-container-bound",fa="data-h5-dyn-dummy-body",R="sceneChangeRequest",u="__h5__RMI",Q="__h5__RMI_Result",da=1E5,B=100001,ta=100002,oa=100008,na=!1,ka={__name:"h5.scene.DummyController"};c.mixin.eventDispatcher.mix(t.prototype);
a.extend(t.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new j(this.type,a),this._targetWindow.postMessage(c.u.obj.serialize(a),location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},_receiveMessage:function(a){var b;try{if(b=c.u.obj.deserialize(a.data),b.type!==this.type)return}catch(d){return}for(var a=this._subscribers,e=0,f=a.length;e<f;e++){var g=a[e];g.func.call(g.thisObj,
b.data)}this.dispatchEvent({type:"message",data:b.data})}});var ga={};a.extend(x.prototype,{_receive:function(a){var b=c.core.controllerManager.getControllers(document.body)[0],d=a.id,e=a.method,a=a.args;!b[e]||M(b[e])?this._callFunction(d,b,e,a):this._sendChannel.send({id:d,isAsync:!1,status:4,result:null})},_callFunction:function(a,b,d,e){var e=P(e),f=void 0;try{f=b[d].apply(b,e)}catch(g){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;c.async.isPromise(f)?f.done(function(){var b=
c.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=c.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:f})}});a.extend(k.prototype,{invoke:function(a,b){var d=c.async.deferred(),e={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[e.id]=d;this._sendChannel.send(e);return d.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];
if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});window.opener&&new x;a.extend(d.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(){return new b},setModal:function(a){this._isModal!=a&&(this._isModal?(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=c.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),
this._isModal=a)},close:function(){var a=c.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var pa=/<\!--(?:\s|\S)*?--\>/g,ma=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,la=/^\s*(?!\s|<)/,p='<div class="h5-scene"></div>',H={};a.extend(G.prototype,{onChange:function(b,d){var e=c.async.deferred();a(b).empty();a(d).appendTo(b);e.resolve();return e.promise()},
onChangeStart:function(a){this._ind=c.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(){this._ind.hide()}});H["default"]=G;var ja=null,Ea=/Controller$/,ra={__name:"h5.scene.SceneContainerController",isMain:!1,_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_notPushState:!0,__init:function(b){var c=this.rootElement,d=this;(this.isMain=!!(b.args||{}).isMain)&&ja&&e(100003);this._transition=this._createTransition();this._transition.onChangeStart(c);
this._containerName=a(c).attr(T)||a(c).attr(N);this._currentController=null;h(c);this.on("{rootElement}",R,this.own(this._onSceneChangeRequest));var f;if(this.isMain){ja=this;this.on("{window}","popstate",this.own(this._onWindowPopstate));if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));f=void 0}r(c,null,f).done(function(a){d._currentController=a;d._transition.onChangeEnd(d.rootElement,null,c);d._transition=null})},__dispose:function(){ea.isDisposing(this._currentController)||
this._currentController.dispose();this._currentController=null;a(this.rootElement).empty()},_onAClick:function(a){a.event.preventDefault();this.changeScene(a.event.originalEvent.target.href)},_onWindowPopstate:function(){this._changeScene(location.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.changeScene(a.evArg)}),0)},changeScene:function(b){if(v(b))return this.changeScene({to:b});var b=a.extend(!0,{},b),d=b.to;this._transition=this._createTransition(b.transition);
this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var f=this._dfd=c.async.deferred();this._isNavigated=!0;if(this.isMain){Ea.test(d)||delete b.to;v(d)||e(100004,[d]);-1!==d.indexOf("#")&&e(100005,[d]);Ea.test(d)&&e(100006,[d]);var g=W(d);history.pushState(null,null,g)}this._changeScene(d,c.u.obj.deserialize(c.u.obj.serialize(b)));return f.promise()},_changeScene:function(b,c){var c=c||{},d=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=
this._createTransition(c.transition),this._transition.onChangeStart(this.rootElement,d));d&&l(d);var f=this;v(b)&&(Ea.test(b)?z(b,a("<div></div>"),c.args).done(function(a){f._onLoadController(a,d)}):F(b,!this.isMain?c.container:null).done(function(b){r(a("<div></div>").append(b),null,c.args).done(function(a){f._onLoadController(a,d)})}).fail(function(a){e(100009,[b],a)}))},_createTransition:function(a){var b=H[null!=a?a:"default"];b||e(100007,[a]);return new b},_onLoadController:function(b,c){var d=
this,e=b.rootElement;this._transition.onChange(this.rootElement,e).done(function(){this._dfd&&this._dfd.resolve({from:c,to:e});c&&a(c).remove();d._currentController=b;d._transition.onChangeEnd(d.rootElement,c,e);d._isNavigated=!1;d._dfd=null;d._transition=null})}};ea.controllerConstructor&&(ea.controllerConstructor.prototype.triggerSceneChange=ba,ea.controllerConstructor.prototype.getParentSceneContainer=ca);c.settings.scene=c.settings.scene||{};a(function(){c.settings.scene.autoInit&&O()});c.u.obj.expose("h5.scene",
{openWindow:function(a,b,e,f){var g=c.async.deferred(),h=new d(a,b,e,f);setTimeout(function(){g.resolve(h)},100);return g.promise()},createSceneContainer:g,init:O,getMainContainer:function(){return ja},scan:f,getAllSceneContainers:Z,getSceneContainer:J})})()})(jQuery);