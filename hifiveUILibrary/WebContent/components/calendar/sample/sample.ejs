<script type="text/ejs" id="yearSelect">
  [% var today = new Date(); %]
  [% for (var i = 1900; i <= 2099; i++) { %]
      <option [%= (i == today.getFullYear()) ? 'selected' : '' %]>[%= i %]</option>
  [% } %]
</script>

<script type="text/ejs" id="monthSelect">
  [% var today = new Date(); %]
  [% for (var i = 0; i <= 11; i++) { %]
      <option [%= (i == today.getMonth()) ? 'selected' : '' %]>[%= i+1 %]</option>
  [% } %]
</script>


<script type="text/ejs" id="daySelect">
  [%
  var dayCount = null;
  var isLeapYear = (new Date(date.getYear(), 1, 29).getMonth() == 1) ? 1 : 0;
  switch (date.getMonth()) {
  	case 0:
  	case 2:
  	case 4:
  	case 6:
  	case 7:
  	case 9:
  	case 11:
  		dayCount = 31; break;
	case 3:
	case 5:
	case 6:
	case 8:
	case 10:
  		dayCount = 30; break;
  	case 1:
  		dayCount = 28 + isLeapYear; break;
  }
  %]
  [% for (var i = 1; i <= dayCount; i++) { %]
      <option [%= ( i == date.getDate()) ? 'selected' : '' %]>[%= i %]</option>
  [% } %]
</script>